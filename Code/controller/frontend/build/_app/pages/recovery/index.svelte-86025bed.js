import{S as a,i as e,s,j as t,m as r,o as n,a5 as o,v as c,r as l,w as i,k as p,e as f,t as h,l as d,n as u,c as v,a as m,g as w,d as E,b,N as g,f as y,F as I,G as P,O as k,u as N,Q as T,a3 as $,a4 as L,B}from"../../chunks/vendor-5cf7a4b5.js";import{T as x,n as C}from"../../chunks/Toast-8167f713.js";import{T as U}from"../../chunks/index-6469371a.js";function D(a){let e,s,p;function f(e){a[5](e)}let h={title:"Snapshots",headers:Object.keys(a[0][0])};return void 0!==a[0]&&(h.data=a[0]),e=new U({props:h}),$.push((()=>L(e,"data",f))),{c(){t(e.$$.fragment)},l(a){r(e.$$.fragment,a)},m(a,s){n(e,a,s),p=!0},p(a,t){const r={};1&t&&(r.headers=Object.keys(a[0][0])),!s&&1&t&&(s=!0,r.data=a[0],o((()=>s=!1))),e.$set(r)},i(a){p||(c(e.$$.fragment,a),p=!0)},o(a){l(e.$$.fragment,a),p=!1},d(a){i(e,a)}}}function V(a){let e,s,p;function f(e){a[6](e)}let h={title:"Logfiles",headers:Object.keys(a[1][0])};return void 0!==a[1]&&(h.data=a[1]),e=new U({props:h}),$.push((()=>L(e,"data",f))),{c(){t(e.$$.fragment)},l(a){r(e.$$.fragment,a)},m(a,s){n(e,a,s),p=!0},p(a,t){const r={};2&t&&(r.headers=Object.keys(a[1][0])),!s&&2&t&&(s=!0,r.data=a[1],o((()=>s=!1))),e.$set(r)},i(a){p||(c(e.$$.fragment,a),p=!0)},o(a){l(e.$$.fragment,a),p=!1},d(a){i(e,a)}}}function R(a){let e,s,o,$,L,C,U,R,S,A,F,j,q,M,X,G,J,Q,z,K,W,Y,Z,_,aa,ea,sa,ta,ra,na,oa,ca,la,ia,pa,fa,ha,da,ua,va,ma,wa,Ea,ba,ga,ya,Ia,Pa,ka,Na,Ta,$a,La,Ba,xa,Ca,Ua,Da,Va,Ra,Sa,Ha,Oa,Aa,Fa,ja,qa,Ma,Xa,Ga,Ja,Qa,za,Ka,Wa,Ya,Za,_a,ae,ee,se,te,re,ne,oe,ce,le,ie,pe,fe,he,de,ue,ve,me,we,Ee,be,ge,ye,Ie,Pe,ke,Ne,Te,$e,Le,Be,xe,Ce,Ue,De,Ve,Re,Se,He,Oe,Ae,Fe,je,qe,Me,Xe,Ge,Je,Qe,ze,Ke,We,Ye,Ze,_e,as,es,ss,ts,rs,ns,os;e=new x({});let cs=a[0].length>0&&D(a),ls=a[1].length>0&&V(a);return{c(){t(e.$$.fragment),s=p(),o=f("hr"),$=p(),L=f("div"),C=f("h1"),U=f("b"),R=h("Recovery Handlers"),S=p(),A=f("hr"),F=p(),j=f("h2"),q=h("Upload Checkpoint"),M=p(),X=f("form"),G=f("p"),J=f("label"),Q=f("b"),z=h("Image Tag"),K=p(),W=f("input"),Y=p(),Z=f("p"),_=f("label"),aa=f("b"),ea=h("Image Version"),sa=p(),ta=f("input"),ra=p(),na=f("p"),oa=f("label"),ca=f("b"),la=h("Container Name"),ia=p(),pa=f("input"),fa=p(),ha=f("p"),da=f("label"),ua=f("b"),va=h("Container Ports (8080:8080,443:443)"),ma=p(),wa=f("input"),Ea=p(),ba=f("p"),ga=f("label"),ya=f("b"),Ia=h("Container Networks"),Pa=p(),ka=f("input"),Na=p(),Ta=f("p"),$a=f("label"),La=f("b"),Ba=h("Container Volumes"),xa=p(),Ca=f("input"),Ua=p(),Da=f("p"),Va=f("label"),Ra=f("b"),Sa=h("Container Privileged (yes, no)"),Ha=p(),Oa=f("input"),Aa=p(),Fa=f("p"),ja=f("label"),qa=f("b"),Ma=h("File"),Xa=p(),Ga=f("input"),Ja=p(),Qa=f("p"),za=f("input"),Ka=p(),Wa=f("hr"),Ya=p(),Za=f("h2"),_a=h("Recovery Actions"),ae=p(),ee=f("div"),se=f("div"),te=f("button"),re=h("Snapshot Container ( create image as .tar )"),ne=p(),oe=f("div"),ce=f("input"),le=p(),ie=f("div"),pe=f("div"),fe=f("button"),he=h("Recover Container ( load from .tar )"),de=p(),ue=f("div"),ve=f("input"),me=p(),we=f("div"),Ee=f("div"),be=f("button"),ge=h("Download Snapshot ( as .tar )"),ye=p(),Ie=f("div"),Pe=f("input"),ke=p(),Ne=f("hr"),Te=p(),$e=f("h2"),Le=h("Container Snapshots"),Be=p(),cs&&cs.c(),xe=p(),Ce=f("hr"),Ue=p(),De=f("h2"),Ve=h("Log Files"),Re=p(),Se=f("form"),He=f("p"),Oe=f("label"),Ae=f("b"),Fe=h(".csv File"),je=p(),qe=f("input"),Me=p(),Xe=f("p"),Ge=f("input"),Je=p(),Qe=f("div"),ze=f("div"),Ke=f("button"),We=h("Delete Logfile"),Ye=p(),Ze=f("div"),_e=f("input"),as=p(),es=f("br"),ss=p(),ls&&ls.c(),ts=d(),this.h()},l(a){r(e.$$.fragment,a),s=u(a),o=v(a,"HR",{class:!0}),$=u(a),L=v(a,"DIV",{class:!0});var t=m(L);C=v(t,"H1",{class:!0,style:!0});var n=m(C);U=v(n,"B",{});var c=m(U);R=w(c,"Recovery Handlers"),c.forEach(E),n.forEach(E),t.forEach(E),S=u(a),A=v(a,"HR",{class:!0}),F=u(a),j=v(a,"H2",{});var l=m(j);q=w(l,"Upload Checkpoint"),l.forEach(E),M=u(a),X=v(a,"FORM",{class:!0,enctype:!0});var i=m(X);G=v(i,"P",{});var p=m(G);J=v(p,"LABEL",{});var f=m(J);Q=v(f,"B",{});var h=m(Q);z=w(h,"Image Tag"),h.forEach(E),f.forEach(E),K=u(p),W=v(p,"INPUT",{class:!0,name:!0,type:!0}),p.forEach(E),Y=u(i),Z=v(i,"P",{});var b=m(Z);_=v(b,"LABEL",{});var g=m(_);aa=v(g,"B",{});var y=m(aa);ea=w(y,"Image Version"),y.forEach(E),g.forEach(E),sa=u(b),ta=v(b,"INPUT",{class:!0,name:!0,type:!0}),b.forEach(E),ra=u(i),na=v(i,"P",{});var I=m(na);oa=v(I,"LABEL",{});var P=m(oa);ca=v(P,"B",{});var k=m(ca);la=w(k,"Container Name"),k.forEach(E),P.forEach(E),ia=u(I),pa=v(I,"INPUT",{class:!0,name:!0,type:!0}),I.forEach(E),fa=u(i),ha=v(i,"P",{});var N=m(ha);da=v(N,"LABEL",{});var T=m(da);ua=v(T,"B",{});var B=m(ua);va=w(B,"Container Ports (8080:8080,443:443)"),B.forEach(E),T.forEach(E),ma=u(N),wa=v(N,"INPUT",{class:!0,name:!0,type:!0}),N.forEach(E),Ea=u(i),ba=v(i,"P",{});var x=m(ba);ga=v(x,"LABEL",{});var D=m(ga);ya=v(D,"B",{});var V=m(ya);Ia=w(V,"Container Networks"),V.forEach(E),D.forEach(E),Pa=u(x),ka=v(x,"INPUT",{class:!0,name:!0,type:!0}),x.forEach(E),Na=u(i),Ta=v(i,"P",{});var H=m(Ta);$a=v(H,"LABEL",{});var O=m($a);La=v(O,"B",{});var rs=m(La);Ba=w(rs,"Container Volumes"),rs.forEach(E),O.forEach(E),xa=u(H),Ca=v(H,"INPUT",{class:!0,name:!0,type:!0}),H.forEach(E),Ua=u(i),Da=v(i,"P",{});var ns=m(Da);Va=v(ns,"LABEL",{});var os=m(Va);Ra=v(os,"B",{});var is=m(Ra);Sa=w(is,"Container Privileged (yes, no)"),is.forEach(E),os.forEach(E),Ha=u(ns),Oa=v(ns,"INPUT",{class:!0,name:!0,type:!0}),ns.forEach(E),Aa=u(i),Fa=v(i,"P",{});var ps=m(Fa);ja=v(ps,"LABEL",{class:!0});var fs=m(ja);qa=v(fs,"B",{});var hs=m(qa);Ma=w(hs,"File"),hs.forEach(E),fs.forEach(E),Xa=u(ps),Ga=v(ps,"INPUT",{class:!0,type:!0,name:!0}),ps.forEach(E),Ja=u(i),Qa=v(i,"P",{});var ds=m(Qa);za=v(ds,"INPUT",{class:!0,type:!0,value:!0}),ds.forEach(E),i.forEach(E),Ka=u(a),Wa=v(a,"HR",{class:!0}),Ya=u(a),Za=v(a,"H2",{});var us=m(Za);_a=w(us,"Recovery Actions"),us.forEach(E),ae=u(a),ee=v(a,"DIV",{class:!0});var vs=m(ee);se=v(vs,"DIV",{class:!0});var ms=m(se);te=v(ms,"BUTTON",{class:!0});var ws=m(te);re=w(ws,"Snapshot Container ( create image as .tar )"),ws.forEach(E),ms.forEach(E),ne=u(vs),oe=v(vs,"DIV",{class:!0});var Es=m(oe);ce=v(Es,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Es.forEach(E),vs.forEach(E),le=u(a),ie=v(a,"DIV",{class:!0});var bs=m(ie);pe=v(bs,"DIV",{class:!0});var gs=m(pe);fe=v(gs,"BUTTON",{class:!0});var ys=m(fe);he=w(ys,"Recover Container ( load from .tar )"),ys.forEach(E),gs.forEach(E),de=u(bs),ue=v(bs,"DIV",{class:!0});var Is=m(ue);ve=v(Is,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Is.forEach(E),bs.forEach(E),me=u(a),we=v(a,"DIV",{class:!0});var Ps=m(we);Ee=v(Ps,"DIV",{class:!0});var ks=m(Ee);be=v(ks,"BUTTON",{class:!0});var Ns=m(be);ge=w(Ns,"Download Snapshot ( as .tar )"),Ns.forEach(E),ks.forEach(E),ye=u(Ps),Ie=v(Ps,"DIV",{class:!0});var Ts=m(Ie);Pe=v(Ts,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Ts.forEach(E),Ps.forEach(E),ke=u(a),Ne=v(a,"HR",{class:!0}),Te=u(a),$e=v(a,"H2",{});var $s=m($e);Le=w($s,"Container Snapshots"),$s.forEach(E),Be=u(a),cs&&cs.l(a),xe=u(a),Ce=v(a,"HR",{class:!0}),Ue=u(a),De=v(a,"H2",{});var Ls=m(De);Ve=w(Ls,"Log Files"),Ls.forEach(E),Re=u(a),Se=v(a,"FORM",{class:!0,enctype:!0});var Bs=m(Se);He=v(Bs,"P",{});var xs=m(He);Oe=v(xs,"LABEL",{class:!0});var Cs=m(Oe);Ae=v(Cs,"B",{});var Us=m(Ae);Fe=w(Us,".csv File"),Us.forEach(E),Cs.forEach(E),je=u(xs),qe=v(xs,"INPUT",{class:!0,type:!0,name:!0}),xs.forEach(E),Me=u(Bs),Xe=v(Bs,"P",{});var Ds=m(Xe);Ge=v(Ds,"INPUT",{class:!0,type:!0,value:!0}),Ds.forEach(E),Bs.forEach(E),Je=u(a),Qe=v(a,"DIV",{class:!0});var Vs=m(Qe);ze=v(Vs,"DIV",{class:!0});var Rs=m(ze);Ke=v(Rs,"BUTTON",{class:!0});var Ss=m(Ke);We=w(Ss,"Delete Logfile"),Ss.forEach(E),Rs.forEach(E),Ye=u(Vs),Ze=v(Vs,"DIV",{class:!0});var Hs=m(Ze);_e=v(Hs,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Hs.forEach(E),Vs.forEach(E),as=u(a),es=v(a,"BR",{}),ss=u(a),ls&&ls.l(a),ts=d(),this.h()},h(){b(o,"class","svelte-drd2kv"),b(C,"class","w3-text-yellow"),g(C,"text-shadow","1px 1px 0 #444"),b(L,"class","w3-panel w3-blue"),b(A,"class","svelte-drd2kv"),b(W,"class","w3-input w3-border"),b(W,"name","imagetag"),b(W,"type","text"),b(ta,"class","w3-input w3-border"),b(ta,"name","imageversion"),b(ta,"type","text"),b(pa,"class","w3-input w3-border"),b(pa,"name","containername"),b(pa,"type","text"),b(wa,"class","w3-input w3-border"),b(wa,"name","containerports"),b(wa,"type","text"),b(ka,"class","w3-input w3-border"),b(ka,"name","containernetworks"),b(ka,"type","text"),b(Ca,"class","w3-input w3-border"),b(Ca,"name","containervolumes"),b(Ca,"type","text"),b(Oa,"class","w3-input w3-border"),b(Oa,"name","containerprivilege"),b(Oa,"type","text"),b(ja,"class","w3-text-blue"),b(Ga,"class","w3-input w3-border"),b(Ga,"type","file"),b(Ga,"name","file"),b(za,"class","w3-col w3-input w3-border w3-margin-bottom"),b(za,"type","submit"),za.value="upload",b(X,"class","w3-container w3-card-4"),b(X,"enctype","multipart/form-data"),b(Wa,"class","svelte-drd2kv"),b(te,"class","w3-col w3-input w3-border w3-button"),b(se,"class","w3-third"),b(ce,"class","w3-input w3-border"),b(ce,"name","containername"),b(ce,"type","text"),b(ce,"placeholder","Container Name"),b(oe,"class","w3-rest"),b(ee,"class","w3-row w3-section"),b(fe,"class","w3-col w3-input w3-border w3-button"),b(pe,"class","w3-third"),b(ve,"class","w3-input w3-border"),b(ve,"name","containername"),b(ve,"type","text"),b(ve,"placeholder","Container Name"),b(ue,"class","w3-rest"),b(ie,"class","w3-row w3-section"),b(be,"class","w3-col w3-input w3-border w3-button"),b(Ee,"class","w3-third"),b(Pe,"class","w3-input w3-border"),b(Pe,"name","snapshotname"),b(Pe,"type","text"),b(Pe,"placeholder","Snapshot Name"),b(Ie,"class","w3-rest"),b(we,"class","w3-row w3-section"),b(Ne,"class","svelte-drd2kv"),b(Ce,"class","svelte-drd2kv"),b(Oe,"class","w3-text-blue"),b(qe,"class","w3-input w3-border"),b(qe,"type","file"),b(qe,"name","file"),b(Ge,"class","w3-col w3-input w3-border w3-margin-bottom"),b(Ge,"type","submit"),Ge.value="upload",b(Se,"class","w3-container w3-card-4"),b(Se,"enctype","multipart/form-data"),b(Ke,"class","w3-col w3-input w3-border w3-button"),b(ze,"class","w3-third"),b(_e,"class","w3-input w3-border"),b(_e,"name","logfileid"),b(_e,"type","text"),b(_e,"placeholder","Logfile ID"),b(Ze,"class","w3-rest"),b(Qe,"class","w3-row w3-section")},m(t,r){n(e,t,r),y(t,s,r),y(t,o,r),y(t,$,r),y(t,L,r),I(L,C),I(C,U),I(U,R),y(t,S,r),y(t,A,r),y(t,F,r),y(t,j,r),I(j,q),y(t,M,r),y(t,X,r),I(X,G),I(G,J),I(J,Q),I(Q,z),I(G,K),I(G,W),I(X,Y),I(X,Z),I(Z,_),I(_,aa),I(aa,ea),I(Z,sa),I(Z,ta),I(X,ra),I(X,na),I(na,oa),I(oa,ca),I(ca,la),I(na,ia),I(na,pa),I(X,fa),I(X,ha),I(ha,da),I(da,ua),I(ua,va),I(ha,ma),I(ha,wa),I(X,Ea),I(X,ba),I(ba,ga),I(ga,ya),I(ya,Ia),I(ba,Pa),I(ba,ka),I(X,Na),I(X,Ta),I(Ta,$a),I($a,La),I(La,Ba),I(Ta,xa),I(Ta,Ca),I(X,Ua),I(X,Da),I(Da,Va),I(Va,Ra),I(Ra,Sa),I(Da,Ha),I(Da,Oa),I(X,Aa),I(X,Fa),I(Fa,ja),I(ja,qa),I(qa,Ma),I(Fa,Xa),I(Fa,Ga),I(X,Ja),I(X,Qa),I(Qa,za),y(t,Ka,r),y(t,Wa,r),y(t,Ya,r),y(t,Za,r),I(Za,_a),y(t,ae,r),y(t,ee,r),I(ee,se),I(se,te),I(te,re),I(ee,ne),I(ee,oe),I(oe,ce),y(t,le,r),y(t,ie,r),I(ie,pe),I(pe,fe),I(fe,he),I(ie,de),I(ie,ue),I(ue,ve),y(t,me,r),y(t,we,r),I(we,Ee),I(Ee,be),I(be,ge),I(we,ye),I(we,Ie),I(Ie,Pe),y(t,ke,r),y(t,Ne,r),y(t,Te,r),y(t,$e,r),I($e,Le),y(t,Be,r),cs&&cs.m(t,r),y(t,xe,r),y(t,Ce,r),y(t,Ue,r),y(t,De,r),I(De,Ve),y(t,Re,r),y(t,Se,r),I(Se,He),I(He,Oe),I(Oe,Ae),I(Ae,Fe),I(He,je),I(He,qe),I(Se,Me),I(Se,Xe),I(Xe,Ge),y(t,Je,r),y(t,Qe,r),I(Qe,ze),I(ze,Ke),I(Ke,We),I(Qe,Ye),I(Qe,Ze),I(Ze,_e),y(t,as,r),y(t,es,r),y(t,ss,r),ls&&ls.m(t,r),y(t,ts,r),rs=!0,ns||(os=[P(X,"submit",k(a[2])),P(te,"click",H),P(fe,"click",O),P(be,"click",O),P(Se,"submit",k(a[3])),P(Ke,"click",deleteLogfile)],ns=!0)},p(a,[e]){a[0].length>0?cs?(cs.p(a,e),1&e&&c(cs,1)):(cs=D(a),cs.c(),c(cs,1),cs.m(xe.parentNode,xe)):cs&&(B(),l(cs,1,1,(()=>{cs=null})),N()),a[1].length>0?ls?(ls.p(a,e),2&e&&c(ls,1)):(ls=V(a),ls.c(),c(ls,1),ls.m(ts.parentNode,ts)):ls&&(B(),l(ls,1,1,(()=>{ls=null})),N())},i(a){rs||(c(e.$$.fragment,a),c(cs),c(ls),rs=!0)},o(a){l(e.$$.fragment,a),l(cs),l(ls),rs=!1},d(a){i(e,a),a&&E(s),a&&E(o),a&&E($),a&&E(L),a&&E(S),a&&E(A),a&&E(F),a&&E(j),a&&E(M),a&&E(X),a&&E(Ka),a&&E(Wa),a&&E(Ya),a&&E(Za),a&&E(ae),a&&E(ee),a&&E(le),a&&E(ie),a&&E(me),a&&E(we),a&&E(ke),a&&E(Ne),a&&E(Te),a&&E($e),a&&E(Be),cs&&cs.d(a),a&&E(xe),a&&E(Ce),a&&E(Ue),a&&E(De),a&&E(Re),a&&E(Se),a&&E(Je),a&&E(Qe),a&&E(as),a&&E(es),a&&E(ss),ls&&ls.d(a),a&&E(ts),ns=!1,T(os)}}}async function S({page:a,fetch:e}){const s="/api/db2/logfiles",t=await e(s);return t.ok?{props:{logfiles:await t.json().data}}:{status:"404",error:new Error(`Could not load ${s}.`)}}function H(){}function O(){}function A(a,e,s){let{snapshots:t=[]}=e,{logfiles:r=[]}=e,{checkpoints:n}=e;return a.$$set=a=>{"snapshots"in a&&s(0,t=a.snapshots),"logfiles"in a&&s(1,r=a.logfiles),"checkpoints"in a&&s(4,n=a.checkpoints)},[t,r,async function(){var a=new FormData;let e=!1;if(this.querySelectorAll("input").forEach((function(s){""!=s.name&&("file"==s.name?(a.append(s.name,s.files[0]),e=!0):a.append(s.name,s.value))})),e){var s=new XMLHttpRequest;s.open("POST","/checkpoints"),s.onreadystatechange=function(){if(4!==xhr.readyState||200!==xhr.status)return!1;console.log("response from checkpoint:",[xhr.response])},s.send(a)}else C.danger("please select a file.")},async function(){var a=new FormData;let e=!1,t="";this.querySelectorAll("input").forEach((function(s){""!=s.name&&"file"==s.name&&(console.log(s.files[0]),a.append(s.name,s.files[0]),t=s.files[0].name,e=!0)}));let n="/logfiles/"+t;if(e){var o=new XMLHttpRequest;o.open("POST",n),o.onreadystatechange=function(){if(4!==o.readyState||200!==o.status)return!1;{let a=JSON.parse(o.response);s(1,r=[...r,a.data]),console.log("response from checkpoint:",[o.response])}},o.send(a)}else C.danger("please select a file.")},n,function(a){t=a,s(0,t)},function(a){r=a,s(1,r)}]}export default class extends a{constructor(a){super(),e(this,a,A,R,s,{snapshots:0,logfiles:1,checkpoints:4})}}export{S as load};

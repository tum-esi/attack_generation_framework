import{S as a,i as e,s,j as t,m as r,o as n,a5 as o,v as c,r as l,w as i,k as p,e as f,t as h,l as d,n as u,c as v,a as m,g as w,d as E,b,N as g,f as y,F as I,G as P,O as L,u as N,Q as T,z as k,a3 as $,a4 as B,B as x}from"../../chunks/vendor-5cf7a4b5.js";import{T as D,x as U,n as C,a as V}from"../../chunks/requests-f597ce78.js";import{T as R}from"../../chunks/index-a1695e4a.js";function S(a){let e,s,p;function f(e){a[6](e)}let h={title:"Snapshots",headers:Object.keys(a[0][0])};return void 0!==a[0]&&(h.data=a[0]),e=new R({props:h}),$.push((()=>B(e,"data",f))),{c(){t(e.$$.fragment)},l(a){r(e.$$.fragment,a)},m(a,s){n(e,a,s),p=!0},p(a,t){const r={};1&t&&(r.headers=Object.keys(a[0][0])),!s&&1&t&&(s=!0,r.data=a[0],o((()=>s=!1))),e.$set(r)},i(a){p||(c(e.$$.fragment,a),p=!0)},o(a){l(e.$$.fragment,a),p=!1},d(a){i(e,a)}}}function H(a){let e,s,p;function f(e){a[7](e)}let h={title:"Logfiles",headers:Object.keys(a[1][0])};return void 0!==a[1]&&(h.data=a[1]),e=new R({props:h}),$.push((()=>B(e,"data",f))),{c(){t(e.$$.fragment)},l(a){r(e.$$.fragment,a)},m(a,s){n(e,a,s),p=!0},p(a,t){const r={};2&t&&(r.headers=Object.keys(a[1][0])),!s&&2&t&&(s=!0,r.data=a[1],o((()=>s=!1))),e.$set(r)},i(a){p||(c(e.$$.fragment,a),p=!0)},o(a){l(e.$$.fragment,a),p=!1},d(a){i(e,a)}}}function O(a){let e,s,o,k,$,B,U,C,V,R,O,j,q,M,X,_,z,G,J,Q,K,W,Y,Z,aa,ea,sa,ta,ra,na,oa,ca,la,ia,pa,fa,ha,da,ua,va,ma,wa,Ea,ba,ga,ya,Ia,Pa,La,Na,Ta,ka,$a,Ba,xa,Da,Ua,Ca,Va,Ra,Sa,Ha,Oa,Aa,Fa,ja,qa,Ma,Xa,_a,za,Ga,Ja,Qa,Ka,Wa,Ya,Za,ae,ee,se,te,re,ne,oe,ce,le,ie,pe,fe,he,de,ue,ve,me,we,Ee,be,ge,ye,Ie,Pe,Le,Ne,Te,ke,$e,Be,xe,De,Ue,Ce,Ve,Re,Se,He,Oe,Ae,Fe,je,qe,Me,Xe,_e,ze,Ge,Je,Qe,Ke,We,Ye,Ze,as,es,ss,ts,rs,ns,os;e=new D({});let cs=a[0].length>0&&S(a),ls=a[1].length>0&&H(a);return{c(){t(e.$$.fragment),s=p(),o=f("hr"),k=p(),$=f("div"),B=f("h1"),U=f("b"),C=h("Recovery Handlers"),V=p(),R=f("hr"),O=p(),j=f("h2"),q=h("Upload Checkpoint"),M=p(),X=f("form"),_=f("p"),z=f("label"),G=f("b"),J=h("Image Tag"),Q=p(),K=f("input"),W=p(),Y=f("p"),Z=f("label"),aa=f("b"),ea=h("Image Version"),sa=p(),ta=f("input"),ra=p(),na=f("p"),oa=f("label"),ca=f("b"),la=h("Container Name"),ia=p(),pa=f("input"),fa=p(),ha=f("p"),da=f("label"),ua=f("b"),va=h("Container Ports (8080:8080,443:443)"),ma=p(),wa=f("input"),Ea=p(),ba=f("p"),ga=f("label"),ya=f("b"),Ia=h("Container Networks"),Pa=p(),La=f("input"),Na=p(),Ta=f("p"),ka=f("label"),$a=f("b"),Ba=h("Container Volumes"),xa=p(),Da=f("input"),Ua=p(),Ca=f("p"),Va=f("label"),Ra=f("b"),Sa=h("Container Privileged (yes, no)"),Ha=p(),Oa=f("input"),Aa=p(),Fa=f("p"),ja=f("label"),qa=f("b"),Ma=h("File"),Xa=p(),_a=f("input"),za=p(),Ga=f("p"),Ja=f("input"),Qa=p(),Ka=f("hr"),Wa=p(),Ya=f("h2"),Za=h("Recovery Actions"),ae=p(),ee=f("div"),se=f("div"),te=f("button"),re=h("Snapshot Container ( create image as .tar )"),ne=p(),oe=f("div"),ce=f("input"),le=p(),ie=f("div"),pe=f("div"),fe=f("button"),he=h("Recover Container ( load from .tar )"),de=p(),ue=f("div"),ve=f("input"),me=p(),we=f("div"),Ee=f("div"),be=f("button"),ge=h("Download Snapshot ( as .tar )"),ye=p(),Ie=f("div"),Pe=f("input"),Le=p(),Ne=f("hr"),Te=p(),ke=f("h2"),$e=h("Container Snapshots"),Be=p(),cs&&cs.c(),xe=p(),De=f("hr"),Ue=p(),Ce=f("h2"),Ve=h("Log Files"),Re=p(),Se=f("form"),He=f("p"),Oe=f("label"),Ae=f("b"),Fe=h(".csv File"),je=p(),qe=f("input"),Me=p(),Xe=f("p"),_e=f("input"),ze=p(),Ge=f("div"),Je=f("div"),Qe=f("button"),Ke=h("Delete Logfile"),We=p(),Ye=f("div"),Ze=f("input"),as=p(),es=f("br"),ss=p(),ls&&ls.c(),ts=d(),this.h()},l(a){r(e.$$.fragment,a),s=u(a),o=v(a,"HR",{class:!0}),k=u(a),$=v(a,"DIV",{class:!0});var t=m($);B=v(t,"H1",{class:!0,style:!0});var n=m(B);U=v(n,"B",{});var c=m(U);C=w(c,"Recovery Handlers"),c.forEach(E),n.forEach(E),t.forEach(E),V=u(a),R=v(a,"HR",{class:!0}),O=u(a),j=v(a,"H2",{});var l=m(j);q=w(l,"Upload Checkpoint"),l.forEach(E),M=u(a),X=v(a,"FORM",{class:!0,enctype:!0});var i=m(X);_=v(i,"P",{});var p=m(_);z=v(p,"LABEL",{});var f=m(z);G=v(f,"B",{});var h=m(G);J=w(h,"Image Tag"),h.forEach(E),f.forEach(E),Q=u(p),K=v(p,"INPUT",{class:!0,name:!0,type:!0}),p.forEach(E),W=u(i),Y=v(i,"P",{});var b=m(Y);Z=v(b,"LABEL",{});var g=m(Z);aa=v(g,"B",{});var y=m(aa);ea=w(y,"Image Version"),y.forEach(E),g.forEach(E),sa=u(b),ta=v(b,"INPUT",{class:!0,name:!0,type:!0}),b.forEach(E),ra=u(i),na=v(i,"P",{});var I=m(na);oa=v(I,"LABEL",{});var P=m(oa);ca=v(P,"B",{});var L=m(ca);la=w(L,"Container Name"),L.forEach(E),P.forEach(E),ia=u(I),pa=v(I,"INPUT",{class:!0,name:!0,type:!0}),I.forEach(E),fa=u(i),ha=v(i,"P",{});var N=m(ha);da=v(N,"LABEL",{});var T=m(da);ua=v(T,"B",{});var x=m(ua);va=w(x,"Container Ports (8080:8080,443:443)"),x.forEach(E),T.forEach(E),ma=u(N),wa=v(N,"INPUT",{class:!0,name:!0,type:!0}),N.forEach(E),Ea=u(i),ba=v(i,"P",{});var D=m(ba);ga=v(D,"LABEL",{});var S=m(ga);ya=v(S,"B",{});var H=m(ya);Ia=w(H,"Container Networks"),H.forEach(E),S.forEach(E),Pa=u(D),La=v(D,"INPUT",{class:!0,name:!0,type:!0}),D.forEach(E),Na=u(i),Ta=v(i,"P",{});var A=m(Ta);ka=v(A,"LABEL",{});var F=m(ka);$a=v(F,"B",{});var rs=m($a);Ba=w(rs,"Container Volumes"),rs.forEach(E),F.forEach(E),xa=u(A),Da=v(A,"INPUT",{class:!0,name:!0,type:!0}),A.forEach(E),Ua=u(i),Ca=v(i,"P",{});var ns=m(Ca);Va=v(ns,"LABEL",{});var os=m(Va);Ra=v(os,"B",{});var is=m(Ra);Sa=w(is,"Container Privileged (yes, no)"),is.forEach(E),os.forEach(E),Ha=u(ns),Oa=v(ns,"INPUT",{class:!0,name:!0,type:!0}),ns.forEach(E),Aa=u(i),Fa=v(i,"P",{});var ps=m(Fa);ja=v(ps,"LABEL",{class:!0});var fs=m(ja);qa=v(fs,"B",{});var hs=m(qa);Ma=w(hs,"File"),hs.forEach(E),fs.forEach(E),Xa=u(ps),_a=v(ps,"INPUT",{class:!0,type:!0,name:!0}),ps.forEach(E),za=u(i),Ga=v(i,"P",{});var ds=m(Ga);Ja=v(ds,"INPUT",{class:!0,type:!0,value:!0}),ds.forEach(E),i.forEach(E),Qa=u(a),Ka=v(a,"HR",{class:!0}),Wa=u(a),Ya=v(a,"H2",{});var us=m(Ya);Za=w(us,"Recovery Actions"),us.forEach(E),ae=u(a),ee=v(a,"DIV",{class:!0});var vs=m(ee);se=v(vs,"DIV",{class:!0});var ms=m(se);te=v(ms,"BUTTON",{class:!0});var ws=m(te);re=w(ws,"Snapshot Container ( create image as .tar )"),ws.forEach(E),ms.forEach(E),ne=u(vs),oe=v(vs,"DIV",{class:!0});var Es=m(oe);ce=v(Es,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Es.forEach(E),vs.forEach(E),le=u(a),ie=v(a,"DIV",{class:!0});var bs=m(ie);pe=v(bs,"DIV",{class:!0});var gs=m(pe);fe=v(gs,"BUTTON",{class:!0});var ys=m(fe);he=w(ys,"Recover Container ( load from .tar )"),ys.forEach(E),gs.forEach(E),de=u(bs),ue=v(bs,"DIV",{class:!0});var Is=m(ue);ve=v(Is,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Is.forEach(E),bs.forEach(E),me=u(a),we=v(a,"DIV",{class:!0});var Ps=m(we);Ee=v(Ps,"DIV",{class:!0});var Ls=m(Ee);be=v(Ls,"BUTTON",{class:!0});var Ns=m(be);ge=w(Ns,"Download Snapshot ( as .tar )"),Ns.forEach(E),Ls.forEach(E),ye=u(Ps),Ie=v(Ps,"DIV",{class:!0});var Ts=m(Ie);Pe=v(Ts,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Ts.forEach(E),Ps.forEach(E),Le=u(a),Ne=v(a,"HR",{class:!0}),Te=u(a),ke=v(a,"H2",{});var ks=m(ke);$e=w(ks,"Container Snapshots"),ks.forEach(E),Be=u(a),cs&&cs.l(a),xe=u(a),De=v(a,"HR",{class:!0}),Ue=u(a),Ce=v(a,"H2",{});var $s=m(Ce);Ve=w($s,"Log Files"),$s.forEach(E),Re=u(a),Se=v(a,"FORM",{class:!0,enctype:!0});var Bs=m(Se);He=v(Bs,"P",{});var xs=m(He);Oe=v(xs,"LABEL",{class:!0});var Ds=m(Oe);Ae=v(Ds,"B",{});var Us=m(Ae);Fe=w(Us,".csv File"),Us.forEach(E),Ds.forEach(E),je=u(xs),qe=v(xs,"INPUT",{class:!0,type:!0,name:!0}),xs.forEach(E),Me=u(Bs),Xe=v(Bs,"P",{});var Cs=m(Xe);_e=v(Cs,"INPUT",{class:!0,type:!0,value:!0}),Cs.forEach(E),Bs.forEach(E),ze=u(a),Ge=v(a,"DIV",{class:!0});var Vs=m(Ge);Je=v(Vs,"DIV",{class:!0});var Rs=m(Je);Qe=v(Rs,"BUTTON",{class:!0});var Ss=m(Qe);Ke=w(Ss,"Delete Logfile"),Ss.forEach(E),Rs.forEach(E),We=u(Vs),Ye=v(Vs,"DIV",{class:!0});var Hs=m(Ye);Ze=v(Hs,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),Hs.forEach(E),Vs.forEach(E),as=u(a),es=v(a,"BR",{}),ss=u(a),ls&&ls.l(a),ts=d(),this.h()},h(){b(o,"class","svelte-drd2kv"),b(B,"class","w3-text-yellow"),g(B,"text-shadow","1px 1px 0 #444"),b($,"class","w3-panel w3-blue"),b(R,"class","svelte-drd2kv"),b(K,"class","w3-input w3-border"),b(K,"name","imagetag"),b(K,"type","text"),b(ta,"class","w3-input w3-border"),b(ta,"name","imageversion"),b(ta,"type","text"),b(pa,"class","w3-input w3-border"),b(pa,"name","containername"),b(pa,"type","text"),b(wa,"class","w3-input w3-border"),b(wa,"name","containerports"),b(wa,"type","text"),b(La,"class","w3-input w3-border"),b(La,"name","containernetworks"),b(La,"type","text"),b(Da,"class","w3-input w3-border"),b(Da,"name","containervolumes"),b(Da,"type","text"),b(Oa,"class","w3-input w3-border"),b(Oa,"name","containerprivilege"),b(Oa,"type","text"),b(ja,"class","w3-text-blue"),b(_a,"class","w3-input w3-border"),b(_a,"type","file"),b(_a,"name","file"),b(Ja,"class","w3-col w3-input w3-border w3-margin-bottom"),b(Ja,"type","submit"),Ja.value="upload",b(X,"class","w3-container w3-card-4"),b(X,"enctype","multipart/form-data"),b(Ka,"class","svelte-drd2kv"),b(te,"class","w3-col w3-input w3-border w3-button"),b(se,"class","w3-third"),b(ce,"class","w3-input w3-border"),b(ce,"name","containername"),b(ce,"type","text"),b(ce,"placeholder","Container Name"),b(oe,"class","w3-rest"),b(ee,"class","w3-row w3-section"),b(fe,"class","w3-col w3-input w3-border w3-button"),b(pe,"class","w3-third"),b(ve,"class","w3-input w3-border"),b(ve,"name","containername"),b(ve,"type","text"),b(ve,"placeholder","Container Name"),b(ue,"class","w3-rest"),b(ie,"class","w3-row w3-section"),b(be,"class","w3-col w3-input w3-border w3-button"),b(Ee,"class","w3-third"),b(Pe,"class","w3-input w3-border"),b(Pe,"name","snapshotname"),b(Pe,"type","text"),b(Pe,"placeholder","Snapshot Name"),b(Ie,"class","w3-rest"),b(we,"class","w3-row w3-section"),b(Ne,"class","svelte-drd2kv"),b(De,"class","svelte-drd2kv"),b(Oe,"class","w3-text-blue"),b(qe,"class","w3-input w3-border"),b(qe,"type","file"),b(qe,"name","file"),b(_e,"class","w3-col w3-input w3-border w3-margin-bottom"),b(_e,"type","submit"),_e.value="upload",b(Se,"class","w3-container w3-card-4"),b(Se,"enctype","multipart/form-data"),b(Qe,"class","w3-col w3-input w3-border w3-button"),b(Je,"class","w3-third"),b(Ze,"id","deleteLogfileInput"),b(Ze,"class","w3-input w3-border"),b(Ze,"name","logfileid"),b(Ze,"type","text"),b(Ze,"placeholder","Logfile ID"),b(Ye,"class","w3-rest"),b(Ge,"class","w3-row w3-section")},m(t,r){n(e,t,r),y(t,s,r),y(t,o,r),y(t,k,r),y(t,$,r),I($,B),I(B,U),I(U,C),y(t,V,r),y(t,R,r),y(t,O,r),y(t,j,r),I(j,q),y(t,M,r),y(t,X,r),I(X,_),I(_,z),I(z,G),I(G,J),I(_,Q),I(_,K),I(X,W),I(X,Y),I(Y,Z),I(Z,aa),I(aa,ea),I(Y,sa),I(Y,ta),I(X,ra),I(X,na),I(na,oa),I(oa,ca),I(ca,la),I(na,ia),I(na,pa),I(X,fa),I(X,ha),I(ha,da),I(da,ua),I(ua,va),I(ha,ma),I(ha,wa),I(X,Ea),I(X,ba),I(ba,ga),I(ga,ya),I(ya,Ia),I(ba,Pa),I(ba,La),I(X,Na),I(X,Ta),I(Ta,ka),I(ka,$a),I($a,Ba),I(Ta,xa),I(Ta,Da),I(X,Ua),I(X,Ca),I(Ca,Va),I(Va,Ra),I(Ra,Sa),I(Ca,Ha),I(Ca,Oa),I(X,Aa),I(X,Fa),I(Fa,ja),I(ja,qa),I(qa,Ma),I(Fa,Xa),I(Fa,_a),I(X,za),I(X,Ga),I(Ga,Ja),y(t,Qa,r),y(t,Ka,r),y(t,Wa,r),y(t,Ya,r),I(Ya,Za),y(t,ae,r),y(t,ee,r),I(ee,se),I(se,te),I(te,re),I(ee,ne),I(ee,oe),I(oe,ce),y(t,le,r),y(t,ie,r),I(ie,pe),I(pe,fe),I(fe,he),I(ie,de),I(ie,ue),I(ue,ve),y(t,me,r),y(t,we,r),I(we,Ee),I(Ee,be),I(be,ge),I(we,ye),I(we,Ie),I(Ie,Pe),y(t,Le,r),y(t,Ne,r),y(t,Te,r),y(t,ke,r),I(ke,$e),y(t,Be,r),cs&&cs.m(t,r),y(t,xe,r),y(t,De,r),y(t,Ue,r),y(t,Ce,r),I(Ce,Ve),y(t,Re,r),y(t,Se,r),I(Se,He),I(He,Oe),I(Oe,Ae),I(Ae,Fe),I(He,je),I(He,qe),I(Se,Me),I(Se,Xe),I(Xe,_e),y(t,ze,r),y(t,Ge,r),I(Ge,Je),I(Je,Qe),I(Qe,Ke),I(Ge,We),I(Ge,Ye),I(Ye,Ze),y(t,as,r),y(t,es,r),y(t,ss,r),ls&&ls.m(t,r),y(t,ts,r),rs=!0,ns||(os=[P(X,"submit",L(a[3])),P(te,"click",A),P(fe,"click",F),P(be,"click",F),P(Se,"submit",L(a[4])),P(Qe,"click",a[2])],ns=!0)},p(a,[e]){a[0].length>0?cs?(cs.p(a,e),1&e&&c(cs,1)):(cs=S(a),cs.c(),c(cs,1),cs.m(xe.parentNode,xe)):cs&&(x(),l(cs,1,1,(()=>{cs=null})),N()),a[1].length>0?ls?(ls.p(a,e),2&e&&c(ls,1)):(ls=H(a),ls.c(),c(ls,1),ls.m(ts.parentNode,ts)):ls&&(x(),l(ls,1,1,(()=>{ls=null})),N())},i(a){rs||(c(e.$$.fragment,a),c(cs),c(ls),rs=!0)},o(a){l(e.$$.fragment,a),l(cs),l(ls),rs=!1},d(a){i(e,a),a&&E(s),a&&E(o),a&&E(k),a&&E($),a&&E(V),a&&E(R),a&&E(O),a&&E(j),a&&E(M),a&&E(X),a&&E(Qa),a&&E(Ka),a&&E(Wa),a&&E(Ya),a&&E(ae),a&&E(ee),a&&E(le),a&&E(ie),a&&E(me),a&&E(we),a&&E(Le),a&&E(Ne),a&&E(Te),a&&E(ke),a&&E(Be),cs&&cs.d(a),a&&E(xe),a&&E(De),a&&E(Ue),a&&E(Ce),a&&E(Re),a&&E(Se),a&&E(ze),a&&E(Ge),a&&E(as),a&&E(es),a&&E(ss),ls&&ls.d(a),a&&E(ts),ns=!1,T(os)}}}function A(){}function F(){}function j(a,e,s){let{snapshots:t=[]}=e,{logfiles:r=[]}=e,{checkpoints:n}=e;return k((async()=>{U("/api/db2/logfiles",(function(a){s(1,r=a.data)}))})),a.$$set=a=>{"snapshots"in a&&s(0,t=a.snapshots),"logfiles"in a&&s(1,r=a.logfiles),"checkpoints"in a&&s(5,n=a.checkpoints)},[t,r,function(){let a,e=document.getElementById("deleteLogfileInput"),t=!1;for(let s=0;s<r.length;s++)e==r[s]._id&&(t=!0,a=r[s]);t?V("/logfiles/"+e,"DELETE",a,(function(a){s(1,r=r.filter((a=>a._id!==e))),C.success("Logfile deleted successfully.")})):C.danger("Please specify an LogID.")},async function(){var a=new FormData;let e=!1;if(this.querySelectorAll("input").forEach((function(s){""!=s.name&&("file"==s.name?(a.append(s.name,s.files[0]),e=!0):a.append(s.name,s.value))})),e){var s=new XMLHttpRequest;s.open("POST","/checkpoints"),s.onreadystatechange=function(){if(4!==xhr.readyState||200!==xhr.status)return!1;console.log("response from checkpoint:",[xhr.response])},s.send(a)}else C.danger("please select a file.")},async function(){var a=new FormData;let e=!1,t="";this.querySelectorAll("input").forEach((function(s){""!=s.name&&"file"==s.name&&(console.log(s.files[0]),a.append(s.name,s.files[0]),t=s.files[0].name,e=!0)}));let n="/logfiles/"+t;if(e){var o=new XMLHttpRequest;o.open("POST",n),o.onreadystatechange=function(){if(4!==o.readyState||200!==o.status)return!1;{let a=JSON.parse(o.response);s(1,r=[...r,a.data]),console.log("response from checkpoint:",[o.response])}},o.send(a)}else C.danger("please select a file.")},n,function(a){t=a,s(0,t)},function(a){r=a,s(1,r)}]}export default class extends a{constructor(a){super(),e(this,a,j,O,s,{snapshots:0,logfiles:1,checkpoints:5})}}

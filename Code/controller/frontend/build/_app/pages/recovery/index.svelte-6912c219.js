import{S as a,i as e,s,j as t,m as r,o,a5 as n,v as c,r as l,w as i,k as p,e as h,t as f,l as d,n as u,c as v,a as w,g as m,d as E,b,N as y,f as g,F as I,G as P,O as k,u as T,Q as N,a3 as L,a4 as x,B}from"../../chunks/vendor-5cf7a4b5.js";import{T as C,n as U}from"../../chunks/Toast-8167f713.js";import{T as D}from"../../chunks/index-6469371a.js";function $(a){let e,s,p;function h(e){a[5](e)}let f={title:"Logfiles",headers:Object.keys(a[0][0])};return void 0!==a[0]&&(f.data=a[0]),e=new D({props:f}),L.push((()=>x(e,"data",h))),{c(){t(e.$$.fragment)},l(a){r(e.$$.fragment,a)},m(a,s){o(e,a,s),p=!0},p(a,t){const r={};1&t&&(r.headers=Object.keys(a[0][0])),!s&&1&t&&(s=!0,r.data=a[0],n((()=>s=!1))),e.$set(r)},i(a){p||(c(e.$$.fragment,a),p=!0)},o(a){l(e.$$.fragment,a),p=!1},d(a){i(e,a)}}}function V(a){let e,s,n,L,x,U,D,V,R,A,O,F,j,q,M,X,G,J,Q,z,K,W,Y,Z,_,aa,ea,sa,ta,ra,oa,na,ca,la,ia,pa,ha,fa,da,ua,va,wa,ma,Ea,ba,ya,ga,Ia,Pa,ka,Ta,Na,La,xa,Ba,Ca,Ua,Da,$a,Va,Ra,Sa,Ha,Aa,Oa,Fa,ja,qa,Ma,Xa,Ga,Ja,Qa,za,Ka,Wa,Ya,Za,_a,ae,ee,se,te,re,oe,ne,ce,le,ie,pe,he,fe,de,ue,ve,we,me,Ee,be,ye,ge,Ie,Pe,ke,Te,Ne,Le,xe,Be,Ce,Ue,De,$e,Ve,Re,Se,He,Ae,Oe,Fe,je,qe,Me,Xe,Ge,Je,Qe,ze,Ke,We,Ye,Ze,_e,as,es,ss,ts,rs;e=new C({});let os=a[0].length>0&&$(a);return{c(){t(e.$$.fragment),s=p(),n=h("hr"),L=p(),x=h("div"),U=h("h1"),D=h("b"),V=f("Recovery Handlers"),R=p(),A=h("hr"),O=p(),F=h("h2"),j=f("Upload Checkpoint"),q=p(),M=h("form"),X=h("p"),G=h("label"),J=h("b"),Q=f("Image Tag"),z=p(),K=h("input"),W=p(),Y=h("p"),Z=h("label"),_=h("b"),aa=f("Image Version"),ea=p(),sa=h("input"),ta=p(),ra=h("p"),oa=h("label"),na=h("b"),ca=f("Container Name"),la=p(),ia=h("input"),pa=p(),ha=h("p"),fa=h("label"),da=h("b"),ua=f("Container Ports (8080:8080,443:443)"),va=p(),wa=h("input"),ma=p(),Ea=h("p"),ba=h("label"),ya=h("b"),ga=f("Container Networks"),Ia=p(),Pa=h("input"),ka=p(),Ta=h("p"),Na=h("label"),La=h("b"),xa=f("Container Volumes"),Ba=p(),Ca=h("input"),Ua=p(),Da=h("p"),$a=h("label"),Va=h("b"),Ra=f("Container Privileged (yes, no)"),Sa=p(),Ha=h("input"),Aa=p(),Oa=h("p"),Fa=h("label"),ja=h("b"),qa=f("File"),Ma=p(),Xa=h("input"),Ga=p(),Ja=h("p"),Qa=h("input"),za=p(),Ka=h("hr"),Wa=p(),Ya=h("h2"),Za=f("Recovery Actions"),_a=p(),ae=h("div"),ee=h("div"),se=h("button"),te=f("Snapshot Container ( create image as .tar )"),re=p(),oe=h("div"),ne=h("input"),ce=p(),le=h("div"),ie=h("div"),pe=h("button"),he=f("Recover Container ( load from .tar )"),fe=p(),de=h("div"),ue=h("input"),ve=p(),we=h("div"),me=h("div"),Ee=h("button"),be=f("Download Snapshot ( as .tar )"),ye=p(),ge=h("div"),Ie=h("input"),Pe=p(),ke=h("hr"),Te=p(),Ne=h("h2"),Le=f("Container Snapshots"),xe=p(),Be=h("hr"),Ce=p(),Ue=h("h2"),De=f("Log Files"),$e=p(),Ve=h("form"),Re=h("p"),Se=h("label"),He=h("b"),Ae=f(".csv File"),Oe=p(),Fe=h("input"),je=p(),qe=h("p"),Me=h("input"),Xe=p(),Ge=h("div"),Je=h("div"),Qe=h("button"),ze=f("Delete Logfile"),Ke=p(),We=h("div"),Ye=h("input"),Ze=p(),_e=h("br"),as=p(),os&&os.c(),es=d(),this.h()},l(a){r(e.$$.fragment,a),s=u(a),n=v(a,"HR",{class:!0}),L=u(a),x=v(a,"DIV",{class:!0});var t=w(x);U=v(t,"H1",{class:!0,style:!0});var o=w(U);D=v(o,"B",{});var c=w(D);V=m(c,"Recovery Handlers"),c.forEach(E),o.forEach(E),t.forEach(E),R=u(a),A=v(a,"HR",{class:!0}),O=u(a),F=v(a,"H2",{});var l=w(F);j=m(l,"Upload Checkpoint"),l.forEach(E),q=u(a),M=v(a,"FORM",{class:!0,enctype:!0});var i=w(M);X=v(i,"P",{});var p=w(X);G=v(p,"LABEL",{});var h=w(G);J=v(h,"B",{});var f=w(J);Q=m(f,"Image Tag"),f.forEach(E),h.forEach(E),z=u(p),K=v(p,"INPUT",{class:!0,name:!0,type:!0}),p.forEach(E),W=u(i),Y=v(i,"P",{});var b=w(Y);Z=v(b,"LABEL",{});var y=w(Z);_=v(y,"B",{});var g=w(_);aa=m(g,"Image Version"),g.forEach(E),y.forEach(E),ea=u(b),sa=v(b,"INPUT",{class:!0,name:!0,type:!0}),b.forEach(E),ta=u(i),ra=v(i,"P",{});var I=w(ra);oa=v(I,"LABEL",{});var P=w(oa);na=v(P,"B",{});var k=w(na);ca=m(k,"Container Name"),k.forEach(E),P.forEach(E),la=u(I),ia=v(I,"INPUT",{class:!0,name:!0,type:!0}),I.forEach(E),pa=u(i),ha=v(i,"P",{});var T=w(ha);fa=v(T,"LABEL",{});var N=w(fa);da=v(N,"B",{});var B=w(da);ua=m(B,"Container Ports (8080:8080,443:443)"),B.forEach(E),N.forEach(E),va=u(T),wa=v(T,"INPUT",{class:!0,name:!0,type:!0}),T.forEach(E),ma=u(i),Ea=v(i,"P",{});var C=w(Ea);ba=v(C,"LABEL",{});var $=w(ba);ya=v($,"B",{});var S=w(ya);ga=m(S,"Container Networks"),S.forEach(E),$.forEach(E),Ia=u(C),Pa=v(C,"INPUT",{class:!0,name:!0,type:!0}),C.forEach(E),ka=u(i),Ta=v(i,"P",{});var H=w(Ta);Na=v(H,"LABEL",{});var ss=w(Na);La=v(ss,"B",{});var ts=w(La);xa=m(ts,"Container Volumes"),ts.forEach(E),ss.forEach(E),Ba=u(H),Ca=v(H,"INPUT",{class:!0,name:!0,type:!0}),H.forEach(E),Ua=u(i),Da=v(i,"P",{});var rs=w(Da);$a=v(rs,"LABEL",{});var ns=w($a);Va=v(ns,"B",{});var cs=w(Va);Ra=m(cs,"Container Privileged (yes, no)"),cs.forEach(E),ns.forEach(E),Sa=u(rs),Ha=v(rs,"INPUT",{class:!0,name:!0,type:!0}),rs.forEach(E),Aa=u(i),Oa=v(i,"P",{});var ls=w(Oa);Fa=v(ls,"LABEL",{class:!0});var is=w(Fa);ja=v(is,"B",{});var ps=w(ja);qa=m(ps,"File"),ps.forEach(E),is.forEach(E),Ma=u(ls),Xa=v(ls,"INPUT",{class:!0,type:!0,name:!0}),ls.forEach(E),Ga=u(i),Ja=v(i,"P",{});var hs=w(Ja);Qa=v(hs,"INPUT",{class:!0,type:!0,value:!0}),hs.forEach(E),i.forEach(E),za=u(a),Ka=v(a,"HR",{class:!0}),Wa=u(a),Ya=v(a,"H2",{});var fs=w(Ya);Za=m(fs,"Recovery Actions"),fs.forEach(E),_a=u(a),ae=v(a,"DIV",{class:!0});var ds=w(ae);ee=v(ds,"DIV",{class:!0});var us=w(ee);se=v(us,"BUTTON",{class:!0});var vs=w(se);te=m(vs,"Snapshot Container ( create image as .tar )"),vs.forEach(E),us.forEach(E),re=u(ds),oe=v(ds,"DIV",{class:!0});var ws=w(oe);ne=v(ws,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),ws.forEach(E),ds.forEach(E),ce=u(a),le=v(a,"DIV",{class:!0});var ms=w(le);ie=v(ms,"DIV",{class:!0});var Es=w(ie);pe=v(Es,"BUTTON",{class:!0});var bs=w(pe);he=m(bs,"Recover Container ( load from .tar )"),bs.forEach(E),Es.forEach(E),fe=u(ms),de=v(ms,"DIV",{class:!0});var ys=w(de);ue=v(ys,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),ys.forEach(E),ms.forEach(E),ve=u(a),we=v(a,"DIV",{class:!0});var gs=w(we);me=v(gs,"DIV",{class:!0});var Is=w(me);Ee=v(Is,"BUTTON",{class:!0});var Ps=w(Ee);be=m(Ps,"Download Snapshot ( as .tar )"),Ps.forEach(E),Is.forEach(E),ye=u(gs),ge=v(gs,"DIV",{class:!0});var ks=w(ge);Ie=v(ks,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),ks.forEach(E),gs.forEach(E),Pe=u(a),ke=v(a,"HR",{class:!0}),Te=u(a),Ne=v(a,"H2",{});var Ts=w(Ne);Le=m(Ts,"Container Snapshots"),Ts.forEach(E),xe=u(a),Be=v(a,"HR",{class:!0}),Ce=u(a),Ue=v(a,"H2",{});var Ns=w(Ue);De=m(Ns,"Log Files"),Ns.forEach(E),$e=u(a),Ve=v(a,"FORM",{class:!0,enctype:!0});var Ls=w(Ve);Re=v(Ls,"P",{});var xs=w(Re);Se=v(xs,"LABEL",{class:!0});var Bs=w(Se);He=v(Bs,"B",{});var Cs=w(He);Ae=m(Cs,".csv File"),Cs.forEach(E),Bs.forEach(E),Oe=u(xs),Fe=v(xs,"INPUT",{class:!0,type:!0,name:!0}),xs.forEach(E),je=u(Ls),qe=v(Ls,"P",{});var Us=w(qe);Me=v(Us,"INPUT",{class:!0,type:!0,value:!0}),Us.forEach(E),Ls.forEach(E),Xe=u(a),Ge=v(a,"DIV",{class:!0});var Ds=w(Ge);Je=v(Ds,"DIV",{class:!0});var $s=w(Je);Qe=v($s,"BUTTON",{class:!0});var Vs=w(Qe);ze=m(Vs,"Delete Logfile"),Vs.forEach(E),$s.forEach(E),Ke=u(Ds),We=v(Ds,"DIV",{class:!0});var Rs=w(We);Ye=v(Rs,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),Rs.forEach(E),Ds.forEach(E),Ze=u(a),_e=v(a,"BR",{}),as=u(a),os&&os.l(a),es=d(),this.h()},h(){b(n,"class","svelte-drd2kv"),b(U,"class","w3-text-yellow"),y(U,"text-shadow","1px 1px 0 #444"),b(x,"class","w3-panel w3-blue"),b(A,"class","svelte-drd2kv"),b(K,"class","w3-input w3-border"),b(K,"name","imagetag"),b(K,"type","text"),b(sa,"class","w3-input w3-border"),b(sa,"name","imageversion"),b(sa,"type","text"),b(ia,"class","w3-input w3-border"),b(ia,"name","containername"),b(ia,"type","text"),b(wa,"class","w3-input w3-border"),b(wa,"name","containerports"),b(wa,"type","text"),b(Pa,"class","w3-input w3-border"),b(Pa,"name","containernetworks"),b(Pa,"type","text"),b(Ca,"class","w3-input w3-border"),b(Ca,"name","containervolumes"),b(Ca,"type","text"),b(Ha,"class","w3-input w3-border"),b(Ha,"name","containerprivilege"),b(Ha,"type","text"),b(Fa,"class","w3-text-blue"),b(Xa,"class","w3-input w3-border"),b(Xa,"type","file"),b(Xa,"name","file"),b(Qa,"class","w3-col w3-input w3-border w3-margin-bottom"),b(Qa,"type","submit"),Qa.value="upload",b(M,"class","w3-container w3-card-4"),b(M,"enctype","multipart/form-data"),b(Ka,"class","svelte-drd2kv"),b(se,"class","w3-col w3-input w3-border w3-button"),b(ee,"class","w3-third"),b(ne,"class","w3-input w3-border"),b(ne,"name","containername"),b(ne,"type","text"),b(ne,"placeholder","Container Name"),b(oe,"class","w3-rest"),b(ae,"class","w3-row w3-section"),b(pe,"class","w3-col w3-input w3-border w3-button"),b(ie,"class","w3-third"),b(ue,"class","w3-input w3-border"),b(ue,"name","containername"),b(ue,"type","text"),b(ue,"placeholder","Container Name"),b(de,"class","w3-rest"),b(le,"class","w3-row w3-section"),b(Ee,"class","w3-col w3-input w3-border w3-button"),b(me,"class","w3-third"),b(Ie,"class","w3-input w3-border"),b(Ie,"name","snapshotname"),b(Ie,"type","text"),b(Ie,"placeholder","Snapshot Name"),b(ge,"class","w3-rest"),b(we,"class","w3-row w3-section"),b(ke,"class","svelte-drd2kv"),b(Be,"class","svelte-drd2kv"),b(Se,"class","w3-text-blue"),b(Fe,"class","w3-input w3-border"),b(Fe,"type","file"),b(Fe,"name","file"),b(Me,"class","w3-col w3-input w3-border w3-margin-bottom"),b(Me,"type","submit"),Me.value="upload",b(Ve,"class","w3-container w3-card-4"),b(Ve,"enctype","multipart/form-data"),b(Qe,"class","w3-col w3-input w3-border w3-button"),b(Je,"class","w3-third"),b(Ye,"class","w3-input w3-border"),b(Ye,"name","logfileid"),b(Ye,"type","text"),b(Ye,"placeholder","Logfile ID"),b(We,"class","w3-rest"),b(Ge,"class","w3-row w3-section")},m(t,r){o(e,t,r),g(t,s,r),g(t,n,r),g(t,L,r),g(t,x,r),I(x,U),I(U,D),I(D,V),g(t,R,r),g(t,A,r),g(t,O,r),g(t,F,r),I(F,j),g(t,q,r),g(t,M,r),I(M,X),I(X,G),I(G,J),I(J,Q),I(X,z),I(X,K),I(M,W),I(M,Y),I(Y,Z),I(Z,_),I(_,aa),I(Y,ea),I(Y,sa),I(M,ta),I(M,ra),I(ra,oa),I(oa,na),I(na,ca),I(ra,la),I(ra,ia),I(M,pa),I(M,ha),I(ha,fa),I(fa,da),I(da,ua),I(ha,va),I(ha,wa),I(M,ma),I(M,Ea),I(Ea,ba),I(ba,ya),I(ya,ga),I(Ea,Ia),I(Ea,Pa),I(M,ka),I(M,Ta),I(Ta,Na),I(Na,La),I(La,xa),I(Ta,Ba),I(Ta,Ca),I(M,Ua),I(M,Da),I(Da,$a),I($a,Va),I(Va,Ra),I(Da,Sa),I(Da,Ha),I(M,Aa),I(M,Oa),I(Oa,Fa),I(Fa,ja),I(ja,qa),I(Oa,Ma),I(Oa,Xa),I(M,Ga),I(M,Ja),I(Ja,Qa),g(t,za,r),g(t,Ka,r),g(t,Wa,r),g(t,Ya,r),I(Ya,Za),g(t,_a,r),g(t,ae,r),I(ae,ee),I(ee,se),I(se,te),I(ae,re),I(ae,oe),I(oe,ne),g(t,ce,r),g(t,le,r),I(le,ie),I(ie,pe),I(pe,he),I(le,fe),I(le,de),I(de,ue),g(t,ve,r),g(t,we,r),I(we,me),I(me,Ee),I(Ee,be),I(we,ye),I(we,ge),I(ge,Ie),g(t,Pe,r),g(t,ke,r),g(t,Te,r),g(t,Ne,r),I(Ne,Le),g(t,xe,r),g(t,Be,r),g(t,Ce,r),g(t,Ue,r),I(Ue,De),g(t,$e,r),g(t,Ve,r),I(Ve,Re),I(Re,Se),I(Se,He),I(He,Ae),I(Re,Oe),I(Re,Fe),I(Ve,je),I(Ve,qe),I(qe,Me),g(t,Xe,r),g(t,Ge,r),I(Ge,Je),I(Je,Qe),I(Qe,ze),I(Ge,Ke),I(Ge,We),I(We,Ye),g(t,Ze,r),g(t,_e,r),g(t,as,r),os&&os.m(t,r),g(t,es,r),ss=!0,ts||(rs=[P(M,"submit",k(a[1])),P(se,"click",S),P(pe,"click",H),P(Ee,"click",H),P(Ve,"submit",k(a[2])),P(Qe,"click",deleteLogfile)],ts=!0)},p(a,[e]){a[0].length>0?os?(os.p(a,e),1&e&&c(os,1)):(os=$(a),os.c(),c(os,1),os.m(es.parentNode,es)):os&&(B(),l(os,1,1,(()=>{os=null})),T())},i(a){ss||(c(e.$$.fragment,a),c(os),ss=!0)},o(a){l(e.$$.fragment,a),l(os),ss=!1},d(a){i(e,a),a&&E(s),a&&E(n),a&&E(L),a&&E(x),a&&E(R),a&&E(A),a&&E(O),a&&E(F),a&&E(q),a&&E(M),a&&E(za),a&&E(Ka),a&&E(Wa),a&&E(Ya),a&&E(_a),a&&E(ae),a&&E(ce),a&&E(le),a&&E(ve),a&&E(we),a&&E(Pe),a&&E(ke),a&&E(Te),a&&E(Ne),a&&E(xe),a&&E(Be),a&&E(Ce),a&&E(Ue),a&&E($e),a&&E(Ve),a&&E(Xe),a&&E(Ge),a&&E(Ze),a&&E(_e),a&&E(as),os&&os.d(a),a&&E(es),ts=!1,N(rs)}}}async function R({page:a,fetch:e,session:s,context:t}){const r=await e("/api/db2/snapshots"),o=await e("/checkpoints"),n=await e("/api/db2/logfiles");return res.ok?{props:{snapshots:await r.json().data,checkpoints:await o.json().data,logfiles:await n.json().data}}:{status:res.status,error:new Error(`Could not load ${url}.`)}}function S(){}function H(){}function A(a,e,s){let{snapshots:t}=e,{logfiles:r=[]}=e,{checkpoints:o}=e;return a.$$set=a=>{"snapshots"in a&&s(3,t=a.snapshots),"logfiles"in a&&s(0,r=a.logfiles),"checkpoints"in a&&s(4,o=a.checkpoints)},[r,async function(){var a=new FormData;let e=!1;if(this.querySelectorAll("input").forEach((function(s){""!=s.name&&("file"==s.name?(a.append(s.name,s.files[0]),e=!0):a.append(s.name,s.value))})),e){var s=new XMLHttpRequest;s.open("POST","/checkpoints"),s.onreadystatechange=function(){if(4!==xhr.readyState||200!==xhr.status)return!1;console.log("response from checkpoint:",[xhr.response])},s.send(a)}else U.danger("please select a file.")},async function(){var a=new FormData;let e=!1,t="";this.querySelectorAll("input").forEach((function(s){""!=s.name&&"file"==s.name&&(console.log(s.files[0]),a.append(s.name,s.files[0]),t=s.files[0].name,e=!0)}));let o="/logfiles/"+t;if(e){var n=new XMLHttpRequest;n.open("POST",o),n.onreadystatechange=function(){if(4!==n.readyState||200!==n.status)return!1;{let a=JSON.parse(n.response);s(0,r=[...r,a.data]),console.log("response from checkpoint:",[n.response])}},n.send(a)}else U.danger("please select a file.")},t,o,function(a){r=a,s(0,r)}]}export default class extends a{constructor(a){super(),e(this,a,A,V,s,{snapshots:3,logfiles:0,checkpoints:4})}}export{R as load};

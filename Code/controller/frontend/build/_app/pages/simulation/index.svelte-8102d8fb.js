import{S as t,i as e,s as a,e as s,t as n,c as o,a as l,g as r,d as c,f as i,F as f,h as d,k as u,n as h,b as m,G as p,H as g,a4 as v,a5 as w,l as E,v as b,j as S,m as y,o as $,a6 as k,r as I,w as D,B as V,u as x,M as T,Q as O,z as N,a7 as H,N as j,L as C,R as B}from"../../chunks/vendor-5d015fce.js";import{T as R}from"../../chunks/index-b7ca9129.js";import{T as F,n as L,x as P,a as _,g as M}from"../../chunks/requests-b02e315d.js";import{s as q,a as U,b as A}from"../../chunks/store-50f97f41.js";/* empty css                                                       */function W(t){let e,a,u,h,m,p,g=t[2].toFixed(3)+"";return{c(){e=s("h6"),a=n("Frame: "),u=n(t[3]),h=n(" at time t="),m=n(g),p=n(" seconds.")},l(s){e=o(s,"H6",{});var n=l(e);a=r(n,"Frame: "),u=r(n,t[3]),h=r(n," at time t="),m=r(n,g),p=r(n," seconds."),n.forEach(c)},m(t,s){i(t,e,s),f(e,a),f(e,u),f(e,h),f(e,m),f(e,p)},p(t,e){8&e&&d(u,t[3]),4&e&&g!==(g=t[2].toFixed(3)+"")&&d(m,g)},d(t){t&&c(e)}}}function J(t){let e,a,n,r,d,v,w=t[0]&&W(t);return{c(){e=s("div"),w&&w.c(),a=u(),n=s("img"),this.h()},l(t){e=o(t,"DIV",{ref:!0,class:!0});var s=l(e);w&&w.l(s),a=h(s),n=o(s,"IMG",{src:!0,alt:!0}),s.forEach(c),this.h()},h(){n.src!==(r=t[1])&&m(n,"src",r),m(n,"alt",z),m(e,"ref","display"),m(e,"class","image-display")},m(s,o){i(s,e,o),w&&w.m(e,null),f(e,a),f(e,n),d||(v=p(e,"click",t[4]),d=!0)},p(t,[s]){t[0]?w?w.p(t,s):(w=W(t),w.c(),w.m(e,a)):w&&(w.d(1),w=null),2&s&&n.src!==(r=t[1])&&m(n,"src",r)},i:g,o:g,d(t){t&&c(e),w&&w.d(),d=!1,v()}}}let z="carla viewer";function G(t,e,a){let{sensorName:s=""}=e,{showStats:n=!0}=e,{startImage:o=""}=e,{src:l="data:image/jpeg;base64,"+o}=e,{timestamp:r=0}=e,{frame:c=0}=e,{sensorData:i={}}=e;return t.$$set=t=>{"sensorName"in t&&a(5,s=t.sensorName),"showStats"in t&&a(0,n=t.showStats),"startImage"in t&&a(6,o=t.startImage),"src"in t&&a(1,l=t.src),"timestamp"in t&&a(2,r=t.timestamp),"frame"in t&&a(3,c=t.frame),"sensorData"in t&&a(7,i=t.sensorData)},[n,l,r,c,function(){console.log(c)},s,o,i]}class Q extends t{constructor(t){super(),e(this,t,G,J,a,{sensorName:5,showStats:0,startImage:6,src:1,timestamp:2,frame:3,sensorData:7})}}class K extends t{constructor(t){super(),e(this,t,null,null,a,{})}}function X(t,e,a){const s=t.slice();return s[38]=e[a],s[39]=e,s[40]=a,s}function Y(t){let e,a,s,n;function o(e){t[14](e,t[38])}function l(e){t[15](e,t[38])}let r={};return void 0!==t[38].name&&(r.name=t[38].name),void 0!==t[38].type&&(r.type=t[38].type),e=new K({props:r}),v.push((()=>w(e,"name",o))),v.push((()=>w(e,"type",l))),{c(){S(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,a){$(e,t,a),n=!0},p(n,o){t=n;const l={};!a&&8&o[0]&&(a=!0,l.name=t[38].name,k((()=>a=!1))),!s&&8&o[0]&&(s=!0,l.type=t[38].type,k((()=>s=!1))),e.$set(l)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Z(t){let e,a,s=t[5].includes(t[38]),n=s&&Y(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){8&a[0]&&(s=t[5].includes(t[38])),s?n?(n.p(t,a),8&a[0]&&b(n,1)):(n=Y(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function tt(t){let e,a,g,E,N,H,j,C,B,R,L,P,_,M,q,U,A,W,J,z,G,K,Y,tt,et,at,st,nt,ot,lt,rt,ct,it,ft,dt,ut,ht,mt,pt,gt,vt,wt,Et,bt,St,yt,$t,kt,It,Dt,Vt,xt,Tt,Ot,Nt,Ht,jt,Ct,Bt,Rt,Ft,Lt,Pt,_t,Mt,qt,Ut,At,Wt,Jt,zt,Gt,Qt,Kt,Xt,Yt,Zt,te,ee,ae,se,ne,oe,le,re,ce,ie,fe,de,ue,he,me,pe,ge,ve,we,Ee,be,Se,ye,$e=t[4].throttle.toFixed(3)+"",ke=t[4].brake.toFixed(3)+"",Ie=t[4].steer.toFixed(3)+"";function De(e){t[12](e)}e=new F({});let Ve={sensorName:"autopilot-camera1",showStats:!0};function xe(e){t[13](e)}void 0!==t[1]&&(Ve.src=t[1]),ie=new Q({props:Ve}),v.push((()=>w(ie,"src",De)));let Te={sensorName:"autopilot-camera2",showStats:!0};void 0!==t[2]&&(Te.src=t[2]),ue=new Q({props:Te}),v.push((()=>w(ue,"src",xe)));let Oe=t[3],Ne=[];for(let s=0;s<Oe.length;s+=1)Ne[s]=Z(X(t,Oe,s));const He=t=>I(Ne[t],1,1,(()=>{Ne[t]=null}));return{c(){S(e.$$.fragment),a=u(),g=s("div"),E=s("h5"),N=n(t[0]),H=u(),j=s("div"),C=s("div"),B=s("div"),R=s("div"),L=s("div"),P=s("h4"),_=n("Manual Control"),M=u(),q=s("form"),U=s("input"),A=u(),W=s("h4"),J=n("Vehicle Inputs"),z=u(),G=s("div"),K=s("div"),Y=s("label"),tt=n("Throttle:"),et=u(),at=s("div"),st=s("form"),nt=u(),ot=s("div"),lt=s("div"),rt=n($e),ct=u(),it=s("div"),ft=s("div"),dt=s("label"),ut=n("Brake:"),ht=u(),mt=s("div"),pt=s("form"),gt=u(),vt=s("div"),wt=s("div"),Et=n(ke),bt=u(),St=s("div"),yt=s("div"),$t=s("label"),kt=n("Steer:"),It=u(),Dt=s("div"),Vt=s("form"),xt=u(),Tt=s("div"),Ot=s("div"),Nt=n(Ie),Ht=u(),jt=s("div"),Ct=s("div"),Bt=s("h4"),Rt=n("Position"),Ft=u(),Lt=s("p"),Pt=n(t[7]),_t=u(),Mt=s("div"),qt=s("h4"),Ut=n("Orientation"),At=u(),Wt=s("p"),Jt=n(t[8]),zt=u(),Gt=s("div"),Qt=s("h4"),Kt=n("Speed"),Xt=u(),Yt=s("p"),Zt=n(t[6]),te=u(),ee=s("div"),ae=s("button"),se=n("Reset Vehicle"),ne=u(),oe=s("div"),le=s("h4"),re=n("Dash Cam"),ce=u(),S(ie.$$.fragment),de=u(),S(ue.$$.fragment),me=u(),pe=s("h4"),ge=n("Sensors"),ve=u(),we=s("div"),Ee=s("div");for(let t=0;t<Ne.length;t+=1)Ne[t].c();this.h()},l(s){y(e.$$.fragment,s),a=h(s),g=o(s,"DIV",{class:!0});var n=l(g);E=o(n,"H5",{});var i=l(E);N=r(i,t[0]),i.forEach(c),H=h(n),j=o(n,"DIV",{class:!0});var f=l(j);C=o(f,"DIV",{class:!0});var d=l(C);B=o(d,"DIV",{fluid:!0,class:!0});var u=l(B);R=o(u,"DIV",{});var m=l(R);L=o(m,"DIV",{class:!0});var p=l(L);P=o(p,"H4",{});var v=l(P);_=r(v,"Manual Control"),v.forEach(c),M=h(p),q=o(p,"FORM",{class:!0,id:!0,label:!0,"label-for":!0,"label-cols":!0});var w=l(q);U=o(w,"INPUT",{type:!0}),w.forEach(c),A=h(p),W=o(p,"H4",{});var b=l(W);J=r(b,"Vehicle Inputs"),b.forEach(c),z=h(p),G=o(p,"DIV",{});var S=l(G);K=o(S,"DIV",{cols:!0,class:!0});var $=l(K);Y=o($,"LABEL",{for:!0});var k=l(Y);tt=r(k,"Throttle:"),k.forEach(c),$.forEach(c),et=h(S),at=o(S,"DIV",{cols:!0,class:!0});var I=l(at);st=o(I,"FORM",{id:!0,"v-model":!0,type:!0,min:!0,max:!0,step:!0,number:!0}),l(st).forEach(c),I.forEach(c),nt=h(S),ot=o(S,"DIV",{cols:!0,class:!0});var D=l(ot);lt=o(D,"DIV",{class:!0});var V=l(lt);rt=r(V,$e),V.forEach(c),D.forEach(c),S.forEach(c),ct=h(p),it=o(p,"DIV",{});var x=l(it);ft=o(x,"DIV",{cols:!0,class:!0});var T=l(ft);dt=o(T,"LABEL",{for:!0});var O=l(dt);ut=r(O,"Brake:"),O.forEach(c),T.forEach(c),ht=h(x),mt=o(x,"DIV",{cols:!0,class:!0});var F=l(mt);pt=o(F,"FORM",{id:!0,"v-model":!0,type:!0,min:!0,max:!0,step:!0,number:!0}),l(pt).forEach(c),F.forEach(c),gt=h(x),vt=o(x,"DIV",{cols:!0,class:!0});var Q=l(vt);wt=o(Q,"DIV",{class:!0});var X=l(wt);Et=r(X,ke),X.forEach(c),Q.forEach(c),x.forEach(c),bt=h(p),St=o(p,"DIV",{});var Z=l(St);yt=o(Z,"DIV",{cols:!0,class:!0});var fe=l(yt);$t=o(fe,"LABEL",{for:!0});var he=l($t);kt=r(he,"Steer:"),he.forEach(c),fe.forEach(c),It=h(Z),Dt=o(Z,"DIV",{cols:!0,class:!0});var be=l(Dt);Vt=o(be,"FORM",{id:!0,"v-model":!0,type:!0,min:!0,max:!0,step:!0,number:!0}),l(Vt).forEach(c),be.forEach(c),xt=h(Z),Tt=o(Z,"DIV",{cols:!0,class:!0});var Se=l(Tt);Ot=o(Se,"DIV",{class:!0});var ye=l(Ot);Nt=r(ye,Ie),ye.forEach(c),Se.forEach(c),Z.forEach(c),Ht=h(p),jt=o(p,"DIV",{class:!0});var De=l(jt);Ct=o(De,"DIV",{});var Ve=l(Ct);Bt=o(Ve,"H4",{});var xe=l(Bt);Rt=r(xe,"Position"),xe.forEach(c),Ft=h(Ve),Lt=o(Ve,"P",{class:!0});var Te=l(Lt);Pt=r(Te,t[7]),Te.forEach(c),Ve.forEach(c),_t=h(De),Mt=o(De,"DIV",{});var Oe=l(Mt);qt=o(Oe,"H4",{});var He=l(qt);Ut=r(He,"Orientation"),He.forEach(c),At=h(Oe),Wt=o(Oe,"P",{class:!0});var je=l(Wt);Jt=r(je,t[8]),je.forEach(c),Oe.forEach(c),zt=h(De),Gt=o(De,"DIV",{});var Ce=l(Gt);Qt=o(Ce,"H4",{});var Be=l(Qt);Kt=r(Be,"Speed"),Be.forEach(c),Xt=h(Ce),Yt=o(Ce,"P",{class:!0});var Re=l(Yt);Zt=r(Re,t[6]),Re.forEach(c),Ce.forEach(c),De.forEach(c),te=h(p),ee=o(p,"DIV",{class:!0});var Fe=l(ee);ae=o(Fe,"BUTTON",{class:!0});var Le=l(ae);se=r(Le,"Reset Vehicle"),Le.forEach(c),Fe.forEach(c),p.forEach(c),ne=h(m),oe=o(m,"DIV",{class:!0});var Pe=l(oe);le=o(Pe,"H4",{});var _e=l(le);re=r(_e,"Dash Cam"),_e.forEach(c),ce=h(Pe),y(ie.$$.fragment,Pe),de=h(Pe),y(ue.$$.fragment,Pe),Pe.forEach(c),m.forEach(c),me=h(u),pe=o(u,"H4",{});var Me=l(pe);ge=r(Me,"Sensors"),Me.forEach(c),ve=h(u),we=o(u,"DIV",{class:!0});var qe=l(we);Ee=o(qe,"DIV",{class:!0});var Ue=l(Ee);for(let t=0;t<Ne.length;t+=1)Ne[t].l(Ue);Ue.forEach(c),qe.forEach(c),u.forEach(c),d.forEach(c),f.forEach(c),n.forEach(c),this.h()},h(){m(U,"type","checkbox"),m(q,"class","align-items-center"),m(q,"id","manual-control-group"),m(q,"label","Manual Control:"),m(q,"label-for","manual-control"),m(q,"label-cols","2"),m(Y,"for","range-throttle"),m(K,"cols","2"),m(K,"class","align-self-center"),m(st,"id","range-throttle"),m(st,"v-model","control.throttle"),m(st,"type","range"),m(st,"min","0"),m(st,"max","1"),m(st,"step","0.01"),m(st,"number",""),m(at,"cols","8"),m(at,"class","align-self-center"),m(lt,"class","mt-2"),m(ot,"cols","2"),m(ot,"class","align-self-center"),m(dt,"for","range-brake"),m(ft,"cols","2"),m(ft,"class","align-self-center"),m(pt,"id","range-brake"),m(pt,"v-model","control.brake"),m(pt,"type","range"),m(pt,"min","0"),m(pt,"max","1"),m(pt,"step","0.01"),m(pt,"number",""),m(mt,"cols","8"),m(mt,"class","align-self-center"),m(wt,"class","mt-2"),m(vt,"cols","2"),m(vt,"class","align-self-center"),m($t,"for","range-throttle"),m(yt,"cols","2"),m(yt,"class","align-self-center"),m(Vt,"id","range-steer"),m(Vt,"v-model","control.steer"),m(Vt,"type","range"),m(Vt,"min","-1"),m(Vt,"max","1"),m(Vt,"step","0.01"),m(Vt,"number",""),m(Dt,"cols","8"),m(Dt,"class","align-self-center"),m(Ot,"class","mt-2"),m(Tt,"cols","2"),m(Tt,"class","align-self-center"),m(Lt,"class","svelte-au1azq"),m(Wt,"class","svelte-au1azq"),m(Yt,"class","svelte-au1azq"),m(jt,"class","mt-3"),m(ae,"class","my-1 align-self-center"),m(ee,"class","text-center"),m(L,"class","col-xl-6"),m(oe,"class","col-xl-6"),m(Ee,"class",""),m(we,"class",""),m(B,"fluid",""),m(B,"class","w3-container"),m(C,"class","autopilot"),m(j,"class","w3-responsive"),m(g,"class","w3-container")},m(s,n){$(e,s,n),i(s,a,n),i(s,g,n),f(g,E),f(E,N),f(g,H),f(g,j),f(j,C),f(C,B),f(B,R),f(R,L),f(L,P),f(P,_),f(L,M),f(L,q),f(q,U),f(L,A),f(L,W),f(W,J),f(L,z),f(L,G),f(G,K),f(K,Y),f(Y,tt),f(G,et),f(G,at),f(at,st),f(G,nt),f(G,ot),f(ot,lt),f(lt,rt),f(L,ct),f(L,it),f(it,ft),f(ft,dt),f(dt,ut),f(it,ht),f(it,mt),f(mt,pt),f(it,gt),f(it,vt),f(vt,wt),f(wt,Et),f(L,bt),f(L,St),f(St,yt),f(yt,$t),f($t,kt),f(St,It),f(St,Dt),f(Dt,Vt),f(St,xt),f(St,Tt),f(Tt,Ot),f(Ot,Nt),f(L,Ht),f(L,jt),f(jt,Ct),f(Ct,Bt),f(Bt,Rt),f(Ct,Ft),f(Ct,Lt),f(Lt,Pt),f(jt,_t),f(jt,Mt),f(Mt,qt),f(qt,Ut),f(Mt,At),f(Mt,Wt),f(Wt,Jt),f(jt,zt),f(jt,Gt),f(Gt,Qt),f(Qt,Kt),f(Gt,Xt),f(Gt,Yt),f(Yt,Zt),f(L,te),f(L,ee),f(ee,ae),f(ae,se),f(R,ne),f(R,oe),f(oe,le),f(le,re),f(oe,ce),$(ie,oe,null),f(oe,de),$(ue,oe,null),f(B,me),f(B,pe),f(pe,ge),f(B,ve),f(B,we),f(we,Ee);for(let t=0;t<Ne.length;t+=1)Ne[t].m(Ee,null);be=!0,Se||(ye=[p(U,"change",t[9]),p(ae,"click",t[10])],Se=!0)},p(t,e){(!be||1&e[0])&&d(N,t[0]),(!be||16&e[0])&&$e!==($e=t[4].throttle.toFixed(3)+"")&&d(rt,$e),(!be||16&e[0])&&ke!==(ke=t[4].brake.toFixed(3)+"")&&d(Et,ke),(!be||16&e[0])&&Ie!==(Ie=t[4].steer.toFixed(3)+"")&&d(Nt,Ie);const a={};!fe&&2&e[0]&&(fe=!0,a.src=t[1],k((()=>fe=!1))),ie.$set(a);const s={};if(!he&&4&e[0]&&(he=!0,s.src=t[2],k((()=>he=!1))),ue.$set(s),40&e[0]){let a;for(Oe=t[3],a=0;a<Oe.length;a+=1){const s=X(t,Oe,a);Ne[a]?(Ne[a].p(s,e),b(Ne[a],1)):(Ne[a]=Z(s),Ne[a].c(),b(Ne[a],1),Ne[a].m(Ee,null))}for(V(),a=Oe.length;a<Ne.length;a+=1)He(a);x()}},i(t){if(!be){b(e.$$.fragment,t),b(ie.$$.fragment,t),b(ue.$$.fragment,t);for(let t=0;t<Oe.length;t+=1)b(Ne[t]);be=!0}},o(t){I(e.$$.fragment,t),I(ie.$$.fragment,t),I(ue.$$.fragment,t),Ne=Ne.filter(Boolean);for(let e=0;e<Ne.length;e+=1)I(Ne[e]);be=!1},d(t){D(e,t),t&&c(a),t&&c(g),D(ie),D(ue),T(Ne,t),Se=!1,O(ye)}}}function et(t,e,a){let{title:s}=e,{input_data:n}=e,o="",l="",r=[{name:"autopilot-gnss",type:"gnss"},{name:"autopilot-imu",type:"imu"},{name:"autopilot-tachometer",type:"tachometer"},{name:"autopilot-camera1",type:"camera"},{name:"autopilot-camera2",type:"camera"}],c=!1,i=null,f={throttle:0,brake:0,steer:0},d=[],u={};function h(t){let e=u[t];return e||null}let m=h("autopilot-tachometer");m&&m.speed.toFixed(3);let p=h("autopilot-gnss");p&&(p.latitude,p.longitude,p.altitude.toFixed(2));let g=h("autopilot-imu");function v(){console.log("Manual Control switched on"),window.addEventListener("keydown",w),window.addEventListener("keyup",E),a(4,f.throttle=0,f),a(4,f.brake=1,f),a(4,f.steer=0,f)}function w(t){let e=String.fromCharCode(t.keyCode).toLowerCase();c&&i===e||(c=!0,i=e,"w"===e?a(4,f.throttle=1,f):"a"===e?a(4,f.steer=-1,f):"s"===e?a(4,f.brake=1,f):"d"===e&&a(4,f.steer=1,f),b())}function E(t){c=!1;let e=String.fromCharCode(t.keyCode).toLowerCase();"w"===e?a(4,f.throttle=0,f):"a"===e?a(4,f.steer=0,f):"s"===e?a(4,f.brake=0,f):"d"===e&&a(4,f.steer=0,f),b()}function b(){H({method:"POST",url:"/control",data:f,headers:{"content-type":"application/json"}}).catch((function(t){L.danger("apply control failed")}))}return g&&g.orientation.toFixed(3),N((async()=>{H({method:"POST",url:"/config",headers:{"content-type":"application/json"},data:{newSensors:r}}).then((t=>{console.log("sensor added in backend, now websocket connection"),r.forEach((t=>{!function(t){d.push(t);let e="http://localhost:8000/sensor/"+t.type+"/"+t.name+"/websocket";e=e.replace("http","ws");let s=new WebSocket(e);s.onopen=function(){console.log("WebSocket connection established with "+e)},s.onmessage=function(e){let s=JSON.parse(e.data);u={sensorName:t.name,sensorData:s},"autopilot-camera1"==u.sensorName&&(console.log("data camera1",s),a(1,o="data:image/jpeg;base64,"+s)),"autopilot-camera2"==u.sensorName&&(console.log("data camera2",s),a(2,l="data:image/jpeg;base64,"+s))}}(t),console.log("sensor added!")}));let e={enabled:!0,updateInterval:.1,imageWidth:800,imageHeight:600,fov:90},s="/sensor/camera/autopilot-camera1";console.log("first request to carla backend..."),H({method:"POST",url:s,data:{settings:e},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 1 to carla failed")})),e.position={x:-6,y:0,z:5},e.rotation={roll:0,pitch:-35,yaw:0},s="/sensor/camera/autopilot-camera2",H({method:"POST",url:s,data:{settings:e},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 2 to carla failed")}));s="/sensor/imu/autopilot-imu",H({method:"POST",url:s,data:{settings:{enabled:!0,updateInterval:.1}},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 3 to carla failed")}));s="/sensor/gnss/autopilot-gnss",H({method:"POST",url:s,data:{settings:{enabled:!0,updateInterval:.1}},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 4 to carla failed")}));s="/sensor/tachometer/autopilot-tachometer",H({method:"POST",url:s,data:{settings:{enabled:!0,updateInterval:.1}},headers:{"content-type":"application/json"}}).then((()=>{L.danger("canging to manual control"),v()})),L.success("The required sensors for the autopilot have been successfully created.")}),(t=>{L.danger("failed to call /config sensor")}))})),t.$$set=t=>{"title"in t&&a(0,s=t.title),"input_data"in t&&a(11,n=t.input_data)},[s,o,l,r,f,d,m,p,g,v,function(){a(4,f.throttle=0,f),a(4,f.brake=1,f),a(4,f.steer=0,f),H({method:"POST",url:"/config",headers:{"content-type":"application/json"},data:{simulation:{reset:!0}}}).then((()=>{console.log("Simulation was reset!")}),(t=>{console.log(t)}))},n,function(t){o=t,a(1,o)},function(t){l=t,a(2,l)},function(e,s){t.$$.not_equal(s.name,e)&&(s.name=e,a(3,r))},function(e,s){t.$$.not_equal(s.type,e)&&(s.type=e,a(3,r))}]}class at extends t{constructor(t){super(),e(this,t,et,tt,a,{title:0,input_data:11},[-1,-1])}}function st(t){let e,a,d,v,w,E,b,S,y,$;return{c(){e=s("div"),a=s("span"),d=n("×"),v=u(),w=s("img"),b=u(),S=s("div"),this.h()},l(t){e=o(t,"DIV",{id:!0,class:!0});var s=l(e);a=o(s,"SPAN",{class:!0});var n=l(a);d=r(n,"×"),n.forEach(c),v=h(s),w=o(s,"IMG",{class:!0,id:!0,src:!0}),b=h(s),S=o(s,"DIV",{id:!0,class:!0}),l(S).forEach(c),s.forEach(c),this.h()},h(){m(a,"class","close svelte-rk4oiy"),m(w,"class","modal-content svelte-rk4oiy"),m(w,"id","img01"),w.src!==(E="")&&m(w,"src",""),m(S,"id","caption"),m(S,"class","svelte-rk4oiy"),m(e,"id","myModal"),m(e,"class","modal svelte-rk4oiy")},m(t,s){i(t,e,s),f(e,a),f(a,d),f(e,v),f(e,w),f(e,b),f(e,S),y||($=p(a,"click",nt),y=!0)},p:g,i:g,o:g,d(t){t&&c(e),y=!1,$()}}}function nt(){document.getElementById("myModal").style.display="none"}function ot(t,e){var a=document.getElementById("myModal"),s=document.getElementById("img01"),n=document.getElementById("caption");a.style.display="block",s.src=t,n.innerHTML=e}function lt(t,e,a){return[ot]}class rt extends t{constructor(t){super(),e(this,t,lt,st,a,{changeImage:0})}get changeImage(){return ot}}function ct(t,e,a){const s=t.slice();return s[33]=e[a],s[35]=a,s}function it(t,e,a){const s=t.slice();return s[36]=e[a],s[35]=a,s}function ft(t,e,a){const s=t.slice();return s[36]=e[a],s[35]=a,s}function dt(t,e,a){const s=t.slice();return s[39]=e[a],s[40]=e,s[41]=a,s}function ut(t){let e,a,g,v,w,E,S,y,$,k,D,T,N,H,j,C,B,R,F,L,P,_,M,q,U,A,W,J,z,G,Q,K,X,Y,Z,tt,et="configurations"in t[1]&&ht(t);return{c(){e=s("h4"),a=n("Scenario: "),g=n(t[3]),v=n(" Number of Containers: "),w=n(t[4]),E=n("."),S=u(),y=s("div"),$=s("div"),k=s("button"),D=n("Start Simulation"),T=u(),N=s("div"),H=s("button"),j=n("Stop Simulation"),C=u(),B=s("div"),R=s("button"),F=n("Reset WS Connection"),L=u(),P=s("hr"),_=u(),M=s("section"),q=s("h3"),U=n("Application Logs"),A=u(),W=s("button"),J=n("Clear Logs"),z=u(),et&&et.c(),G=u(),Q=s("br"),K=u(),X=s("hr"),this.h()},l(s){e=o(s,"H4",{});var n=l(e);a=r(n,"Scenario: "),g=r(n,t[3]),v=r(n," Number of Containers: "),w=r(n,t[4]),E=r(n,"."),n.forEach(c),S=h(s),y=o(s,"DIV",{class:!0});var i=l(y);$=o(i,"DIV",{class:!0});var f=l($);k=o(f,"BUTTON",{class:!0});var d=l(k);D=r(d,"Start Simulation"),d.forEach(c),f.forEach(c),T=h(i),N=o(i,"DIV",{class:!0});var u=l(N);H=o(u,"BUTTON",{class:!0});var m=l(H);j=r(m,"Stop Simulation"),m.forEach(c),u.forEach(c),C=h(i),B=o(i,"DIV",{class:!0});var p=l(B);R=o(p,"BUTTON",{class:!0});var b=l(R);F=r(b,"Reset WS Connection"),b.forEach(c),p.forEach(c),i.forEach(c),L=h(s),P=o(s,"HR",{class:!0}),_=h(s),M=o(s,"SECTION",{class:!0});var I=l(M);q=o(I,"H3",{});var V=l(q);U=r(V,"Application Logs"),V.forEach(c),I.forEach(c),A=h(s),W=o(s,"BUTTON",{class:!0});var x=l(W);J=r(x,"Clear Logs"),x.forEach(c),z=h(s),et&&et.l(s),G=h(s),Q=o(s,"BR",{}),K=h(s),X=o(s,"HR",{class:!0}),this.h()},h(){m(k,"class","w3-col w3-input w3-border"),m($,"class","w3-third"),m(H,"class","w3-col w3-input w3-border"),m(N,"class","w3-third"),m(R,"class","w3-col w3-input w3-border"),m(B,"class","w3-third"),m(y,"class","w3-row w3-section"),m(P,"class","svelte-drd2kv"),m(M,"class","page-headline"),m(W,"class","w3-col w3-input w3-border w3-button"),m(X,"class","svelte-drd2kv")},m(s,n){i(s,e,n),f(e,a),f(e,g),f(e,v),f(e,w),f(e,E),i(s,S,n),i(s,y,n),f(y,$),f($,k),f(k,D),f(y,T),f(y,N),f(N,H),f(H,j),f(y,C),f(y,B),f(B,R),f(R,F),i(s,L,n),i(s,P,n),i(s,_,n),i(s,M,n),f(M,q),f(q,U),i(s,A,n),i(s,W,n),f(W,J),i(s,z,n),et&&et.m(s,n),i(s,G,n),i(s,Q,n),i(s,K,n),i(s,X,n),Y=!0,Z||(tt=[p(k,"click",t[16]),p(H,"click",t[17]),p(R,"click",t[18]),p(W,"click",t[8])],Z=!0)},p(t,e){(!Y||8&e[0])&&d(g,t[3]),(!Y||16&e[0])&&d(w,t[4]),"configurations"in t[1]?et?(et.p(t,e),2&e[0]&&b(et,1)):(et=ht(t),et.c(),b(et,1),et.m(G.parentNode,G)):et&&(V(),I(et,1,1,(()=>{et=null})),x())},i(t){Y||(b(et),Y=!0)},o(t){I(et),Y=!1},d(t){t&&c(e),t&&c(S),t&&c(y),t&&c(L),t&&c(P),t&&c(_),t&&c(M),t&&c(A),t&&c(W),t&&c(z),et&&et.d(t),t&&c(G),t&&c(Q),t&&c(K),t&&c(X),Z=!1,O(tt)}}}function ht(t){let e,a,s=t[1].configurations.length>0&&mt(t);return{c(){s&&s.c(),e=E()},l(t){s&&s.l(t),e=E()},m(t,n){s&&s.m(t,n),i(t,e,n),a=!0},p(t,a){t[1].configurations.length>0?s?(s.p(t,a),2&a[0]&&b(s,1)):(s=mt(t),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(V(),I(s,1,1,(()=>{s=null})),x())},i(t){a||(b(s),a=!0)},o(t){I(s),a=!1},d(t){s&&s.d(t),t&&c(e)}}}function mt(t){let e,a,s=t[1].configurations,n=[];for(let l=0;l<s.length;l+=1)n[l]=wt(dt(t,s,l));const o=t=>I(n[t],1,1,(()=>{n[t]=null}));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=E()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=E()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);i(t,e,s),a=!0},p(t,a){if(34&a[0]){let l;for(s=t[1].configurations,l=0;l<s.length;l+=1){const o=dt(t,s,l);n[l]?(n[l].p(o,a),b(n[l],1)):(n[l]=wt(o),n[l].c(),b(n[l],1),n[l].m(e.parentNode,e))}for(V(),l=s.length;l<n.length;l+=1)o(l);x()}},i(t){if(!a){for(let t=0;t<s.length;t+=1)b(n[t]);a=!0}},o(t){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)I(n[e]);a=!1},d(t){T(n,t),t&&c(e)}}}function pt(t){let e,a,s=t[41].toString()in t[5],n=s&&gt(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=t[41].toString()in t[5]),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=gt(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function gt(t){let e,a,s=t[5][t[41].toString()].length>0,n=s&&vt(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=t[5][t[41].toString()].length>0),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=vt(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function vt(t){let e,a,m,p,g,E,V=t[39].container_info.name+"";function x(e){t[19](e,t[41])}let T={title:t[39].container_info.name,headers:Object.keys(t[5][t[41].toString()][0])};return void 0!==t[5][t[41].toString()]&&(T.data=t[5][t[41].toString()]),p=new R({props:T}),v.push((()=>w(p,"data",x))),{c(){e=s("h5"),a=n(V),m=u(),S(p.$$.fragment)},l(t){e=o(t,"H5",{});var s=l(e);a=r(s,V),s.forEach(c),m=h(t),y(p.$$.fragment,t)},m(t,s){i(t,e,s),f(e,a),i(t,m,s),$(p,t,s),E=!0},p(e,s){t=e,(!E||2&s[0])&&V!==(V=t[39].container_info.name+"")&&d(a,V);const n={};2&s[0]&&(n.title=t[39].container_info.name),32&s[0]&&(n.headers=Object.keys(t[5][t[41].toString()][0])),!g&&32&s[0]&&(g=!0,n.data=t[5][t[41].toString()],k((()=>g=!1))),p.$set(n)},i(t){E||(b(p.$$.fragment,t),E=!0)},o(t){I(p.$$.fragment,t),E=!1},d(t){t&&c(e),t&&c(m),D(p,t)}}}function wt(t){let e,a,s=Object.keys(t[5]).length>0,n=s&&pt(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=Object.keys(t[5]).length>0),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=pt(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function Et(t){let e,a,d,g,v,w,E,b,S,y,$,k,I,D,V,x,T,N,H,C,B,R,F,L=t[6].length>0&&bt(t);return{c(){e=s("div"),a=s("div"),d=s("button"),g=n("Start Simulation"),v=u(),w=s("hr"),E=u(),b=s("div"),S=s("h1"),y=s("b"),$=n("Edit Files"),k=u(),L&&L.c(),I=u(),D=s("hr"),V=u(),x=s("div"),T=s("div"),N=s("button"),H=n("Delete Files"),C=u(),B=s("hr"),this.h()},l(t){e=o(t,"DIV",{class:!0});var s=l(e);a=o(s,"DIV",{class:!0});var n=l(a);d=o(n,"BUTTON",{class:!0});var i=l(d);g=r(i,"Start Simulation"),i.forEach(c),n.forEach(c),s.forEach(c),v=h(t),w=o(t,"HR",{class:!0}),E=h(t),b=o(t,"DIV",{class:!0});var f=l(b);S=o(f,"H1",{class:!0,style:!0});var u=l(S);y=o(u,"B",{});var m=l(y);$=r(m,"Edit Files"),m.forEach(c),u.forEach(c),f.forEach(c),k=h(t),L&&L.l(t),I=h(t),D=o(t,"HR",{class:!0}),V=h(t),x=o(t,"DIV",{class:!0});var p=l(x);T=o(p,"DIV",{class:!0});var O=l(T);N=o(O,"BUTTON",{class:!0});var j=l(N);H=r(j,"Delete Files"),j.forEach(c),O.forEach(c),p.forEach(c),C=h(t),B=o(t,"HR",{class:!0}),this.h()},h(){m(d,"class","w3-col w3-input w3-border"),m(a,"class","w3-rest"),m(e,"class","w3-row w3-section"),m(w,"class","svelte-drd2kv"),m(S,"class","w3-text-yellow"),j(S,"text-shadow","1px 1px 0 #444"),m(b,"class","w3-panel w3-blue"),m(D,"class","svelte-drd2kv"),m(N,"class","w3-col w3-input w3-border"),m(T,"class","w3-rest"),m(x,"class","w3-row w3-section"),m(B,"class","svelte-drd2kv")},m(s,n){i(s,e,n),f(e,a),f(a,d),f(d,g),i(s,v,n),i(s,w,n),i(s,E,n),i(s,b,n),f(b,S),f(S,y),f(y,$),i(s,k,n),L&&L.m(s,n),i(s,I,n),i(s,D,n),i(s,V,n),i(s,x,n),f(x,T),f(T,N),f(N,H),i(s,C,n),i(s,B,n),R||(F=[p(d,"click",t[11]),p(N,"click",t[13])],R=!0)},p(t,e){t[6].length>0?L?L.p(t,e):(L=bt(t),L.c(),L.m(I.parentNode,I)):L&&(L.d(1),L=null)},d(t){t&&c(e),t&&c(v),t&&c(w),t&&c(E),t&&c(b),t&&c(k),L&&L.d(t),t&&c(I),t&&c(D),t&&c(V),t&&c(x),t&&c(C),t&&c(B),R=!1,O(F)}}}function bt(t){let e,a,n,r,d,p,g=Object.keys(t[6][0]),v=[];for(let s=0;s<g.length;s+=1)v[s]=St(ft(t,g,s));let w=t[6],E=[];for(let s=0;s<w.length;s+=1)E[s]=It(ct(t,w,s));return{c(){e=s("div"),a=s("div"),n=s("table"),r=s("thead"),d=s("tr");for(let t=0;t<v.length;t+=1)v[t].c();p=u();for(let t=0;t<E.length;t+=1)E[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0});var s=l(e);a=o(s,"DIV",{class:!0});var i=l(a);n=o(i,"TABLE",{class:!0,style:!0});var f=l(n);r=o(f,"THEAD",{});var u=l(r);d=o(u,"TR",{class:!0});var m=l(d);for(let e=0;e<v.length;e+=1)v[e].l(m);m.forEach(c),u.forEach(c),p=h(f);for(let e=0;e<E.length;e+=1)E[e].l(f);f.forEach(c),i.forEach(c),s.forEach(c),this.h()},h(){m(d,"class","w3-dark-grey"),m(n,"class","w3-table-all"),j(n,"width","100%"),m(a,"class","w3-responsive"),m(e,"class","w3-container")},m(t,s){i(t,e,s),f(e,a),f(a,n),f(n,r),f(r,d);for(let e=0;e<v.length;e+=1)v[e].m(d,null);f(n,p);for(let e=0;e<E.length;e+=1)E[e].m(n,null)},p(t,e){if(64&e[0]){let a;for(g=Object.keys(t[6][0]),a=0;a<g.length;a+=1){const s=ft(t,g,a);v[a]?v[a].p(s,e):(v[a]=St(s),v[a].c(),v[a].m(d,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=g.length}if(16448&e[0]){let a;for(w=t[6],a=0;a<w.length;a+=1){const s=ct(t,w,a);E[a]?E[a].p(s,e):(E[a]=It(s),E[a].c(),E[a].m(n,null))}for(;a<E.length;a+=1)E[a].d(1);E.length=w.length}},d(t){t&&c(e),T(v,t),T(E,t)}}}function St(t){let e,a,u=t[36]+"";return{c(){e=s("th"),a=n(u)},l(t){e=o(t,"TH",{});var s=l(e);a=r(s,u),s.forEach(c)},m(t,s){i(t,e,s),f(e,a)},p(t,e){64&e[0]&&u!==(u=t[36]+"")&&d(a,u)},d(t){t&&c(e)}}}function yt(t){let e,a,u=t[33][t[36]]+"";return{c(){e=s("td"),a=n(u)},l(t){e=o(t,"TD",{});var s=l(e);a=r(s,u),s.forEach(c)},m(t,s){i(t,e,s),f(e,a)},p(t,e){64&e[0]&&u!==(u=t[33][t[36]]+"")&&d(a,u)},d(t){t&&c(e)}}}function $t(t){let e,a,u,h,m=t[33][t[36]]+"";return{c(){e=s("td"),a=n(m)},l(t){e=o(t,"TD",{});var s=l(e);a=r(s,m),s.forEach(c)},m(s,n){i(s,e,n),f(e,a),u||(h=p(e,"click",t[14]),u=!0)},p(t,e){64&e[0]&&m!==(m=t[33][t[36]]+"")&&d(a,m)},d(t){t&&c(e),u=!1,h()}}}function kt(t){let e;function a(t,e){return"filename"==t[36]?$t:yt}let s=a(t),n=s(t);return{c(){n.c(),e=E()},l(t){n.l(t),e=E()},m(t,a){n.m(t,a),i(t,e,a)},p(t,o){s===(s=a(t))&&n?n.p(t,o):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},d(t){n.d(t),t&&c(e)}}}function It(t){let e,a,n=Object.keys(t[6][0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=kt(it(t,n,s));return{c(){e=s("tr");for(let t=0;t<r.length;t+=1)r[t].c();a=u()},l(t){e=o(t,"TR",{});var s=l(e);for(let e=0;e<r.length;e+=1)r[e].l(s);a=h(s),s.forEach(c)},m(t,s){i(t,e,s);for(let a=0;a<r.length;a+=1)r[a].m(e,null);f(e,a)},p(t,s){if(16448&s[0]){let o;for(n=Object.keys(t[6][0]),o=0;o<n.length;o+=1){const l=it(t,n,o);r[o]?r[o].p(l,s):(r[o]=kt(l),r[o].c(),r[o].m(e,a))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&c(e),T(r,t)}}}function Dt(t){let e,a,d,g,E,V,x,T,O,N,H,j,C,B;function R(e){t[20](e)}let F={title:"AutoPilot Component"};return void 0!==t[7]&&(F.input_data=t[7]),T=new at({props:F}),v.push((()=>w(T,"input_data",R))),{c(){e=s("div"),a=s("div"),d=s("button"),g=n("Start Simulation"),E=u(),V=s("hr"),x=u(),S(T.$$.fragment),N=u(),H=s("hr"),this.h()},l(t){e=o(t,"DIV",{class:!0});var s=l(e);a=o(s,"DIV",{class:!0});var n=l(a);d=o(n,"BUTTON",{class:!0});var i=l(d);g=r(i,"Start Simulation"),i.forEach(c),n.forEach(c),s.forEach(c),E=h(t),V=o(t,"HR",{class:!0}),x=h(t),y(T.$$.fragment,t),N=h(t),H=o(t,"HR",{class:!0}),this.h()},h(){m(d,"class","w3-col w3-input w3-border"),m(a,"class","w3-rest"),m(e,"class","w3-row w3-section"),m(V,"class","svelte-drd2kv"),m(H,"class","svelte-drd2kv")},m(s,n){i(s,e,n),f(e,a),f(a,d),f(d,g),i(s,E,n),i(s,V,n),i(s,x,n),$(T,s,n),i(s,N,n),i(s,H,n),j=!0,C||(B=p(d,"click",t[12]),C=!0)},p(t,e){const a={};!O&&128&e[0]&&(O=!0,a.input_data=t[7],k((()=>O=!1))),T.$set(a)},i(t){j||(b(T.$$.fragment,t),j=!0)},o(t){I(T.$$.fragment,t),j=!1},d(t){t&&c(e),t&&c(E),t&&c(V),t&&c(x),D(T,t),t&&c(N),t&&c(H),C=!1,B()}}}function Vt(t){let e,a,d,p,g,v,w,E,k,T,O,N,H,B,R,L,P,_,M;a=new F({});p=new rt({props:{}}),t[15](p);let q="Communication"==t[2]&&ut(t),U="Static"==t[2]&&Et(t),A="Driving Simulation"==t[2]&&Dt(t);return{c(){e=u(),S(a.$$.fragment),d=u(),S(p.$$.fragment),g=u(),v=s("hr"),w=u(),E=s("div"),k=s("h1"),T=s("b"),O=n("Simulation"),N=u(),H=s("hr"),B=u(),q&&q.c(),R=u(),U&&U.c(),L=u(),A&&A.c(),P=u(),_=s("hr"),this.h()},l(t){C('[data-svelte="svelte-1smsifb"]',document.head).forEach(c),e=h(t),y(a.$$.fragment,t),d=h(t),y(p.$$.fragment,t),g=h(t),v=o(t,"HR",{class:!0}),w=h(t),E=o(t,"DIV",{class:!0});var s=l(E);k=o(s,"H1",{class:!0,style:!0});var n=l(k);T=o(n,"B",{});var i=l(T);O=r(i,"Simulation"),i.forEach(c),n.forEach(c),s.forEach(c),N=h(t),H=o(t,"HR",{class:!0}),B=h(t),q&&q.l(t),R=h(t),U&&U.l(t),L=h(t),A&&A.l(t),P=h(t),_=o(t,"HR",{class:!0}),this.h()},h(){document.title="Simulation",m(v,"class","svelte-drd2kv"),m(k,"class","w3-text-yellow"),j(k,"text-shadow","1px 1px 0 #444"),m(E,"class","w3-panel w3-blue"),m(H,"class","svelte-drd2kv"),m(_,"class","svelte-drd2kv")},m(t,s){i(t,e,s),$(a,t,s),i(t,d,s),$(p,t,s),i(t,g,s),i(t,v,s),i(t,w,s),i(t,E,s),f(E,k),f(k,T),f(T,O),i(t,N,s),i(t,H,s),i(t,B,s),q&&q.m(t,s),i(t,R,s),U&&U.m(t,s),i(t,L,s),A&&A.m(t,s),i(t,P,s),i(t,_,s),M=!0},p(t,e){p.$set({}),"Communication"==t[2]?q?(q.p(t,e),4&e[0]&&b(q,1)):(q=ut(t),q.c(),b(q,1),q.m(R.parentNode,R)):q&&(V(),I(q,1,1,(()=>{q=null})),x()),"Static"==t[2]?U?U.p(t,e):(U=Et(t),U.c(),U.m(L.parentNode,L)):U&&(U.d(1),U=null),"Driving Simulation"==t[2]?A?(A.p(t,e),4&e[0]&&b(A,1)):(A=Dt(t),A.c(),b(A,1),A.m(P.parentNode,P)):A&&(V(),I(A,1,1,(()=>{A=null})),x())},i(t){M||(b(a.$$.fragment,t),b(p.$$.fragment,t),b(q),b(A),M=!0)},o(t){I(a.$$.fragment,t),I(p.$$.fragment,t),I(q),I(A),M=!1},d(s){s&&c(e),D(a,s),s&&c(d),t[15](null),D(p,s),s&&c(g),s&&c(v),s&&c(w),s&&c(E),s&&c(N),s&&c(H),s&&c(B),q&&q.d(s),s&&c(R),U&&U.d(s),s&&c(L),A&&A.d(s),s&&c(P),s&&c(_)}}}function xt(t,e,a){let s,n=[],o={},l="";const r=q.subscribe((t=>{n=t})),c=U.subscribe((t=>{a(1,o=t)})),i=A.subscribe((t=>{a(2,l=t)}));let f=[],d=[];B((()=>{r(),c(),i();for(let t=0;t<f.length;t++)f[t].close();for(let t=0;t<d.length;t++)d[t].close()}));let u="Please create and select a scenario before starting the simulation.",h=!1,m=0,p=[],g={},w=[],E=[];function b(){for(const[t,e]of Object.entries(g))a(5,g[t]=[],g)}async function S(t){if(!h)return void L.danger("please create and activate a scenario first.");"start"==t&&b(),_("/simulation/comm","POST",{command:t,configs:o},(function(t){t.data&&(L.success("simulation started."),console.log("response of simulation",t.data))}))}function y(){for(var t=0;t<f.length;t++)ws=f[t],ws.close()}N((async()=>{let t="";for(let e=0;e<n.length;e++)n[e].activated&&(a(3,u=n[e].name),h=!0,t="/api/db1/scenario_configurations/ref-"+n[e]._id);!function(t,e){P(t,(function(t){let a=JSON.parse(t.response);a.data&&a.data.length>0&&(U.set(a.data[0]),e())}))}(t,(function(){if("Communication"==o.type){"configurations"in o&&a(4,m=o.configurations.length);for(var t=0;t<m;t++){a(5,g[t.toString()]=[],g);let e="ws://localhost:8000/simulation/comm/ws/"+t.toString(),s=new WebSocket(e);s.onopen=function(){window.console.log("Successfully connected to the echo websocket server...")},s.onmessage=function(t){let e=JSON.parse(t.data);console.log(e,"printing JSON now");let s=e.client_index,n=JSON.parse(e.data);"status"in n?p[s]=n.status:a(5,g[s]=[...g[s],n],g)},f.push(s)}}if("Static"==o.type){console.log("hello static sample");let t=new WebSocket("ws://localhost:8000/simulation/static/ws");t.onopen=function(){window.console.log("static simulation websocket")},t.onmessage=function(t){let e=JSON.parse(t.data);a(6,w=[...w,e])},d.push(t)}"Communication"==o.type&&console.log("hello driving scenario")}))}));return[s,o,l,u,m,g,w,E,b,S,y,function(){_("/simulation/static","POST",{configs:o},(function(t){t.data&&(L.success("simulation started."),console.log("response of simulation",t.data))}))},function(){_("/simulation/static","POST",{configs:o},(function(t){t.data&&(L.success("simulation started."),console.log("response of simulation",t.data))}))},function(){_("/simulation/static","DELETE",{configs:o},(function(t){t.data&&(L.success("Delete successful."),a(6,w=[]),console.log("response of simulation",t.data))}))},function(){let t=this.innerText;M("/simulation/static","POST",{configs:o,filename:t},(function(e){if(e){let a=new Blob([e.response],{type:"octet/stream"}),n=(window.URL||window.webkitURL).createObjectURL(a);s.changeImage(n,t)}}))},function(t){v[t?"unshift":"push"]((()=>{s=t,a(0,s)}))},()=>S("start"),()=>S("stop"),()=>y(),function(e,s){t.$$.not_equal(g[s.toString()],e)&&(g[s.toString()]=e,a(5,g))},function(t){E=t,a(7,E)}]}export default class extends t{constructor(t){super(),e(this,t,xt,Vt,a,{},[-1,-1])}}

import{S as a,i as s,s as o,e as t,t as n,k as e,c,a as r,g as l,n as i,d as u,f,F as v,h,j as d,L as p,m as w,b as g,N as m,o as b,G as E,v as S,r as _,M as O,w as I,Q as T,R as D,z as V,a3 as N}from"../../chunks/vendor-5cf7a4b5.js";import{T as k}from"../../chunks/index-a7b1fd81.js";import{a as C}from"../../chunks/requests-a0662dff.js";import{s as x,a as B}from"../../chunks/store-f8ef346b.js";function P(a,s,o){const t=a.slice();return t[18]=s[o],t[19]=s,t[20]=o,t}function R(a){let s,o,d,p=a[18]+"",w=a[20];const g=()=>a[9](s,w),m=()=>a[9](null,w);return{c(){s=t("li"),o=n(p),d=e()},l(a){s=c(a,"LI",{});var t=r(s);o=l(t,p),d=i(t),t.forEach(u)},m(a,t){f(a,s,t),v(s,o),v(s,d),g()},p(s,t){a=s,4&t&&p!==(p=a[18]+"")&&h(o,p),w!==a[20]&&(m(),w=a[20],g())},d(a){a&&u(s),m()}}}function y(a){let s,o,D,V,N,C,x,B,y,H,L,U,$,j,G,A,q,z,F,M,Q,W,J,K,X,Y,Z,aa,sa,oa,ta,na,ea,ca,ra,la,ia,ua,fa,va,ha,da,pa,wa,ga,ma,ba,Ea,Sa,_a,Oa,Ia,Ta,Da,Va,Na,ka,Ca,xa,Ba,Pa,Ra,ya,Ha,La,Ua,$a,ja,Ga,Aa,qa,za,Fa,Ma,Qa,Wa,Ja,Ka,Xa,Ya,Za,as,ss,os,ts,ns,es,cs,rs,ls,is,us,fs,vs,hs,ds,ps=a[2],ws=[];for(let t=0;t<ps.length;t+=1)ws[t]=R(P(a,ps,t));return os=new k({props:{title:"Subprocesses"}}),{c(){s=e(),o=t("hr"),D=e(),V=t("div"),N=t("h1"),C=t("b"),x=n("Simulation"),B=e(),y=t("hr"),H=e(),L=t("h4"),U=n("Scenario: "),$=n(a[0]),j=n(" Number of Containers: "),G=n(a[1]),A=n("."),q=e(),z=t("div"),F=t("div"),M=t("button"),Q=n("Start Simulation"),W=e(),J=t("div"),K=t("button"),X=n("Stop Simulation"),Y=e(),Z=t("hr"),aa=e(),sa=t("section"),oa=t("h3"),ta=n("Application Logs"),na=e(),ea=t("button"),ca=n("Clear Logs"),ra=e(),la=t("ul");for(let a=0;a<ws.length;a+=1)ws[a].c();ia=e(),ua=t("br"),fa=e(),va=t("section"),ha=t("div"),da=t("div"),pa=e(),wa=t("div"),ga=n("Data Container"),ma=e(),ba=t("div"),Ea=t("div"),Sa=t("button"),_a=n("Start Generation"),Oa=e(),Ia=t("button"),Ta=n("Stop Generation"),Da=e(),Va=t("hr"),Na=e(),ka=t("section"),Ca=t("div"),xa=t("div"),Ba=e(),Pa=t("div"),Ra=n("Attack Container"),ya=e(),Ha=t("div"),La=t("div"),Ua=t("button"),$a=n("Start Subprocess"),ja=e(),Ga=t("button"),Aa=n("Stop Subprocess"),qa=e(),za=t("div"),Fa=t("select"),Ma=t("option"),Qa=n("Select Subprocess"),Wa=t("option"),Ja=n("Option 1"),Ka=t("option"),Xa=n("Option 2"),Ya=t("option"),Za=n("Option 3"),as=e(),ss=t("div"),d(os.$$.fragment),ts=e(),ns=t("hr"),es=e(),cs=t("section"),rs=t("div"),ls=t("div"),is=e(),us=t("div"),fs=n("Receiver Container"),this.h()},l(t){p('[data-svelte="svelte-1smsifb"]',document.head).forEach(u),s=i(t),o=c(t,"HR",{}),D=i(t),V=c(t,"DIV",{class:!0});var n=r(V);N=c(n,"H1",{class:!0,style:!0});var e=r(N);C=c(e,"B",{});var f=r(C);x=l(f,"Simulation"),f.forEach(u),e.forEach(u),n.forEach(u),B=i(t),y=c(t,"HR",{}),H=i(t),L=c(t,"H4",{});var v=r(L);U=l(v,"Scenario: "),$=l(v,a[0]),j=l(v," Number of Containers: "),G=l(v,a[1]),A=l(v,"."),v.forEach(u),q=i(t),z=c(t,"DIV",{class:!0});var h=r(z);F=c(h,"DIV",{class:!0});var d=r(F);M=c(d,"BUTTON",{class:!0});var g=r(M);Q=l(g,"Start Simulation"),g.forEach(u),d.forEach(u),W=i(h),J=c(h,"DIV",{class:!0});var m=r(J);K=c(m,"BUTTON",{class:!0});var b=r(K);X=l(b,"Stop Simulation"),b.forEach(u),m.forEach(u),h.forEach(u),Y=i(t),Z=c(t,"HR",{}),aa=i(t),sa=c(t,"SECTION",{class:!0});var E=r(sa);oa=c(E,"H3",{});var S=r(oa);ta=l(S,"Application Logs"),S.forEach(u),E.forEach(u),na=i(t),ea=c(t,"BUTTON",{class:!0});var _=r(ea);ca=l(_,"Clear Logs"),_.forEach(u),ra=i(t),la=c(t,"UL",{});var O=r(la);for(let a=0;a<ws.length;a+=1)ws[a].l(O);O.forEach(u),ia=i(t),ua=c(t,"BR",{}),fa=i(t),va=c(t,"SECTION",{class:!0});var I=r(va);ha=c(I,"DIV",{class:!0});var T=r(ha);da=c(T,"DIV",{class:!0}),r(da).forEach(u),pa=i(T),wa=c(T,"DIV",{class:!0});var k=r(wa);ga=l(k,"Data Container"),k.forEach(u),T.forEach(u),ma=i(I),ba=c(I,"DIV",{class:!0});var P=r(ba);Ea=c(P,"DIV",{class:!0});var R=r(Ea);Sa=c(R,"BUTTON",{class:!0});var vs=r(Sa);_a=l(vs,"Start Generation"),vs.forEach(u),Oa=i(R),Ia=c(R,"BUTTON",{class:!0});var hs=r(Ia);Ta=l(hs,"Stop Generation"),hs.forEach(u),R.forEach(u),P.forEach(u),I.forEach(u),Da=i(t),Va=c(t,"HR",{}),Na=i(t),ka=c(t,"SECTION",{class:!0});var ds=r(ka);Ca=c(ds,"DIV",{class:!0});var ps=r(Ca);xa=c(ps,"DIV",{class:!0}),r(xa).forEach(u),Ba=i(ps),Pa=c(ps,"DIV",{class:!0});var gs=r(Pa);Ra=l(gs,"Attack Container"),gs.forEach(u),ps.forEach(u),ya=i(ds),Ha=c(ds,"DIV",{class:!0});var ms=r(Ha);La=c(ms,"DIV",{class:!0});var bs=r(La);Ua=c(bs,"BUTTON",{class:!0});var Es=r(Ua);$a=l(Es,"Start Subprocess"),Es.forEach(u),ja=i(bs),Ga=c(bs,"BUTTON",{class:!0});var Ss=r(Ga);Aa=l(Ss,"Stop Subprocess"),Ss.forEach(u),bs.forEach(u),qa=i(ms),za=c(ms,"DIV",{class:!0});var _s=r(za);Fa=c(_s,"SELECT",{class:!0,name:!0});var Os=r(Fa);Ma=c(Os,"OPTION",{value:!0,disabled:!0,selected:!0});var Is=r(Ma);Qa=l(Is,"Select Subprocess"),Is.forEach(u),Wa=c(Os,"OPTION",{value:!0});var Ts=r(Wa);Ja=l(Ts,"Option 1"),Ts.forEach(u),Ka=c(Os,"OPTION",{value:!0});var Ds=r(Ka);Xa=l(Ds,"Option 2"),Ds.forEach(u),Ya=c(Os,"OPTION",{value:!0});var Vs=r(Ya);Za=l(Vs,"Option 3"),Vs.forEach(u),Os.forEach(u),_s.forEach(u),ms.forEach(u),as=i(ds),ss=c(ds,"DIV",{class:!0});var Ns=r(ss);w(os.$$.fragment,Ns),Ns.forEach(u),ds.forEach(u),ts=i(t),ns=c(t,"HR",{}),es=i(t),cs=c(t,"SECTION",{class:!0});var ks=r(cs);rs=c(ks,"DIV",{class:!0});var Cs=r(rs);ls=c(Cs,"DIV",{class:!0}),r(ls).forEach(u),is=i(Cs),us=c(Cs,"DIV",{class:!0});var xs=r(us);fs=l(xs,"Receiver Container"),xs.forEach(u),Cs.forEach(u),ks.forEach(u),this.h()},h(){document.title="Simulation",g(N,"class","w3-text-yellow"),m(N,"text-shadow","1px 1px 0 #444"),g(V,"class","w3-panel w3-blue"),g(M,"class","w3-col w3-input w3-border w3-margin"),g(F,"class","w3-half"),g(K,"class","w3-col w3-input w3-border w3-margin"),g(J,"class","w3-half"),g(z,"class","w3-row w3-section"),g(sa,"class","page-headline"),g(ea,"class","w3-col w3-input w3-border w3-button"),g(da,"class","container__status svelte-nb88nh"),g(wa,"class","container__content svelte-nb88nh"),g(ha,"class","container w3-margin svelte-nb88nh"),g(Sa,"class","w3-button w3-teal"),g(Ia,"class","w3-button w3-red"),g(Ea,"class","w3-bar"),g(ba,"class","w3-container w3-margin"),g(va,"class","w3-container"),g(xa,"class","container__status svelte-nb88nh"),g(Pa,"class","container__content svelte-nb88nh"),g(Ca,"class","container w3-margin svelte-nb88nh"),g(Ua,"class","w3-button w3-teal"),g(Ga,"class","w3-button w3-red"),g(La,"class","w3-half"),Ma.__value="",Ma.value=Ma.__value,Ma.disabled=!0,Ma.selected=!0,Wa.__value="1",Wa.value=Wa.__value,Ka.__value="2",Ka.value=Ka.__value,Ya.__value="3",Ya.value=Ya.__value,g(Fa,"class","w3-select w3-border"),g(Fa,"name","option"),g(za,"class","w3-half"),g(Ha,"class","w3-row-padding w3-margin"),g(ss,"class","w3-container"),g(ka,"class","w3-container"),g(ls,"class","container__status svelte-nb88nh"),g(us,"class","container__content svelte-nb88nh"),g(rs,"class","container svelte-nb88nh"),g(cs,"class","w3-container")},m(t,n){f(t,s,n),f(t,o,n),f(t,D,n),f(t,V,n),v(V,N),v(N,C),v(C,x),f(t,B,n),f(t,y,n),f(t,H,n),f(t,L,n),v(L,U),v(L,$),v(L,j),v(L,G),v(L,A),f(t,q,n),f(t,z,n),v(z,F),v(F,M),v(M,Q),v(z,W),v(z,J),v(J,K),v(K,X),f(t,Y,n),f(t,Z,n),f(t,aa,n),f(t,sa,n),v(sa,oa),v(oa,ta),f(t,na,n),f(t,ea,n),v(ea,ca),f(t,ra,n),f(t,la,n);for(let a=0;a<ws.length;a+=1)ws[a].m(la,null);f(t,ia,n),f(t,ua,n),f(t,fa,n),f(t,va,n),v(va,ha),v(ha,da),v(ha,pa),v(ha,wa),v(wa,ga),v(va,ma),v(va,ba),v(ba,Ea),v(Ea,Sa),v(Sa,_a),v(Ea,Oa),v(Ea,Ia),v(Ia,Ta),f(t,Da,n),f(t,Va,n),f(t,Na,n),f(t,ka,n),v(ka,Ca),v(Ca,xa),v(Ca,Ba),v(Ca,Pa),v(Pa,Ra),v(ka,ya),v(ka,Ha),v(Ha,La),v(La,Ua),v(Ua,$a),v(La,ja),v(La,Ga),v(Ga,Aa),v(Ha,qa),v(Ha,za),v(za,Fa),v(Fa,Ma),v(Ma,Qa),v(Fa,Wa),v(Wa,Ja),v(Fa,Ka),v(Ka,Xa),v(Fa,Ya),v(Ya,Za),v(ka,as),v(ka,ss),b(os,ss,null),f(t,ts,n),f(t,ns,n),f(t,es,n),f(t,cs,n),v(cs,rs),v(rs,ls),v(rs,is),v(rs,us),v(us,fs),vs=!0,hs||(ds=[E(M,"click",a[7]),E(K,"click",a[8]),E(ea,"click",a[4]),E(Sa,"click",a[5]),E(Ia,"click",a[6])],hs=!0)},p(a,[s]){if((!vs||1&s)&&h($,a[0]),(!vs||2&s)&&h(G,a[1]),12&s){let o;for(ps=a[2],o=0;o<ps.length;o+=1){const t=P(a,ps,o);ws[o]?ws[o].p(t,s):(ws[o]=R(t),ws[o].c(),ws[o].m(la,null))}for(;o<ws.length;o+=1)ws[o].d(1);ws.length=ps.length}},i(a){vs||(S(os.$$.fragment,a),vs=!0)},o(a){_(os.$$.fragment,a),vs=!1},d(a){a&&u(s),a&&u(o),a&&u(D),a&&u(V),a&&u(B),a&&u(y),a&&u(H),a&&u(L),a&&u(q),a&&u(z),a&&u(Y),a&&u(Z),a&&u(aa),a&&u(sa),a&&u(na),a&&u(ea),a&&u(ra),a&&u(la),O(ws,a),a&&u(ia),a&&u(ua),a&&u(fa),a&&u(va),a&&u(Da),a&&u(Va),a&&u(Na),a&&u(ka),I(os),a&&u(ts),a&&u(ns),a&&u(es),a&&u(cs),hs=!1,T(ds)}}}function H(a,s,o){let t=[],n={};const e=x.subscribe((a=>{t=a})),c=B.subscribe((a=>{n=a}));D((()=>{e(),c()}));let r="Please create and select a scenario before starting the simulation.",l=0,i=[],u=[],f=[],v=["event1","event2","event3"],h=[];return V((async()=>{for(let s=0;s<t.length;s++)t[s].activated&&o(0,r=t[s].name);"configurations"in n&&o(1,l=n.configurations.length),console.log("scenarios",t),console.log("scenario_configurations",n),i=[];for(var a=0;a<l;a++){let s=n.configurations[a].container_info.name,o=n.configurations[a].container_info.ports.split(",")[0].split("/")[0];console.log("sending to controller websocket: index",a,"name",s,"port",o);let t="ws://localhost:8000/simulation/ws/"+s+"/"+o+"/"+a.toString();console.log("ws url:",t);let e=new WebSocket(t);e.onopen=function(){window.console.log("Successfully connected to the echo websocket server...")},e.onmessage=function(a){window.console.log(a,"received ws message");let s=a.data.index;"status"in a.data&&(u[s]=a.data.status),"data"in a.data&&(f[s]=a.data),console.log(f)},i.push(e)}})),[r,l,v,h,function(){o(2,v=["event1","event2","event3"])},async function(){C("/start-generator","POST",null,(function(a){a.data&&console.log("response",a.data)}))},async function(){C("/stop-generator","POST",null,(function(a){a.data&&console.log("response",a.data)}))},async function(){console.log("startSimulation"),C("/simulation","POST",{command:"start",configs:n},(function(a){a.data&&console.log("response of start simulation",a.data)}))},async function(){console.log("stopSimulation"),C("/simulation","POST",{command:"stop",configs:n},(function(a){a.data&&console.log("response of stop simulation",a.data)}))},function(a,s){N[a?"unshift":"push"]((()=>{h[s]=a,o(3,h)}))}]}export default class extends a{constructor(a){super(),s(this,a,H,y,o,{})}}

import{S as t,i as e,s as a,e as s,t as n,c as o,a as l,g as r,d as c,f as i,F as f,h as u,k as d,n as h,b as m,G as p,H as g,a4 as v,a5 as w,l as E,v as b,j as S,m as y,o as $,a6 as k,r as I,w as D,B as V,u as x,M as T,Q as O,z as N,a7 as H,N as j,L as C,R}from"../../chunks/vendor-5d015fce.js";import{T as B}from"../../chunks/index-b7ca9129.js";import{T as F,n as L,x as P,a as _,g as M}from"../../chunks/requests-b02e315d.js";import{s as q,a as U,b as A}from"../../chunks/store-50f97f41.js";/* empty css                                                       */function W(t){let e,a,d,h,m,p,g=t[2].frame+"",v=t[2].timestamp.toFixed(3)+"";return{c(){e=s("h6"),a=n("Frame: "),d=n(g),h=n(" at time t="),m=n(v),p=n(" seconds.")},l(t){e=o(t,"H6",{});var s=l(e);a=r(s,"Frame: "),d=r(s,g),h=r(s," at time t="),m=r(s,v),p=r(s," seconds."),s.forEach(c)},m(t,s){i(t,e,s),f(e,a),f(e,d),f(e,h),f(e,m),f(e,p)},p(t,e){4&e&&g!==(g=t[2].frame+"")&&u(d,g),4&e&&v!==(v=t[2].timestamp.toFixed(3)+"")&&u(m,v)},d(t){t&&c(e)}}}function J(t){let e,a,n,r,u,v,w=t[0]&&W(t);return{c(){e=s("div"),w&&w.c(),a=d(),n=s("img"),this.h()},l(t){e=o(t,"DIV",{ref:!0,class:!0});var s=l(e);w&&w.l(s),a=h(s),n=o(s,"IMG",{src:!0,alt:!0}),s.forEach(c),this.h()},h(){n.src!==(r=t[1])&&m(n,"src",r),m(n,"alt",z),m(e,"ref","display"),m(e,"class","image-display")},m(t,s){i(t,e,s),w&&w.m(e,null),f(e,a),f(e,n),u||(v=p(e,"click",G),u=!0)},p(t,[s]){t[0]?w?w.p(t,s):(w=W(t),w.c(),w.m(e,a)):w&&(w.d(1),w=null),2&s&&n.src!==(r=t[1])&&m(n,"src",r)},i:g,o:g,d(t){t&&c(e),w&&w.d(),u=!1,v()}}}let z="carla viewer";function G(){console.log(frame)}function Q(t,e,a){let{sensorName:s=""}=e,{showStats:n=!0}=e,{src:o=""}=e,{meta:l={frame:0,timestamp:0}}=e,{sensorData:r={}}=e;return t.$$set=t=>{"sensorName"in t&&a(3,s=t.sensorName),"showStats"in t&&a(0,n=t.showStats),"src"in t&&a(1,o=t.src),"meta"in t&&a(2,l=t.meta),"sensorData"in t&&a(4,r=t.sensorData)},[n,o,l,s,r]}class K extends t{constructor(t){super(),e(this,t,Q,J,a,{sensorName:3,showStats:0,src:1,meta:2,sensorData:4})}}class X extends t{constructor(t){super(),e(this,t,null,null,a,{})}}function Y(t,e,a){const s=t.slice();return s[42]=e[a],s[43]=e,s[44]=a,s}function Z(t){let e,a,s,n;function o(e){t[18](e,t[42])}function l(e){t[19](e,t[42])}let r={};return void 0!==t[42].name&&(r.name=t[42].name),void 0!==t[42].type&&(r.type=t[42].type),e=new X({props:r}),v.push((()=>w(e,"name",o))),v.push((()=>w(e,"type",l))),{c(){S(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,a){$(e,t,a),n=!0},p(n,o){t=n;const l={};!a&&32&o[0]&&(a=!0,l.name=t[42].name,k((()=>a=!1))),!s&&32&o[0]&&(s=!0,l.type=t[42].type,k((()=>s=!1))),e.$set(l)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function tt(t){let e,a,s=t[7].includes(t[42]),n=s&&Z(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=t[7].includes(t[42])),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=Z(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function et(t){let e,a,g,E,N,H,j,C,R,B,L,P,_,M,q,U,A,W,J,z,G,Q,X,Z,et,at,st,nt,ot,lt,rt,ct,it,ft,ut,dt,ht,mt,pt,gt,vt,wt,Et,bt,St,yt,$t,kt,It,Dt,Vt,xt,Tt,Ot,Nt,Ht,jt,Ct,Rt,Bt,Ft,Lt,Pt,_t,Mt,qt,Ut,At,Wt,Jt,zt,Gt,Qt,Kt,Xt,Yt,Zt,te,ee,ae,se,ne,oe,le,re,ce,ie,fe,ue,de,he,me,pe,ge,ve,we,Ee,be,Se,ye,$e,ke,Ie=t[6].throttle.toFixed(3)+"",De=t[6].brake.toFixed(3)+"",Ve=t[6].steer.toFixed(3)+"";function xe(e){t[14](e)}function Te(e){t[15](e)}e=new F({});let Oe={sensorName:"autopilot-camera1",showStats:!0};function Ne(e){t[16](e)}function He(e){t[17](e)}void 0!==t[1]&&(Oe.src=t[1]),void 0!==t[3]&&(Oe.meta=t[3]),ie=new K({props:Oe}),v.push((()=>w(ie,"src",xe))),v.push((()=>w(ie,"meta",Te)));let je={sensorName:"autopilot-camera2",showStats:!0};void 0!==t[2]&&(je.src=t[2]),void 0!==t[4]&&(je.meta=t[4]),he=new K({props:je}),v.push((()=>w(he,"src",Ne))),v.push((()=>w(he,"meta",He)));let Ce=t[5],Re=[];for(let s=0;s<Ce.length;s+=1)Re[s]=tt(Y(t,Ce,s));const Be=t=>I(Re[t],1,1,(()=>{Re[t]=null}));return{c(){S(e.$$.fragment),a=d(),g=s("div"),E=s("h5"),N=n(t[0]),H=d(),j=s("div"),C=s("div"),R=s("div"),B=s("div"),L=s("div"),P=s("h4"),_=n("Manual Control"),M=d(),q=s("form"),U=s("input"),A=d(),W=s("h4"),J=n("Vehicle Inputs"),z=d(),G=s("div"),Q=s("div"),X=s("label"),Z=n("Throttle:"),et=d(),at=s("div"),st=s("form"),nt=d(),ot=s("div"),lt=s("div"),rt=n(Ie),ct=d(),it=s("div"),ft=s("div"),ut=s("label"),dt=n("Brake:"),ht=d(),mt=s("div"),pt=s("form"),gt=d(),vt=s("div"),wt=s("div"),Et=n(De),bt=d(),St=s("div"),yt=s("div"),$t=s("label"),kt=n("Steer:"),It=d(),Dt=s("div"),Vt=s("form"),xt=d(),Tt=s("div"),Ot=s("div"),Nt=n(Ve),Ht=d(),jt=s("div"),Ct=s("div"),Rt=s("h4"),Bt=n("Position"),Ft=d(),Lt=s("p"),Pt=n(t[9]),_t=d(),Mt=s("div"),qt=s("h4"),Ut=n("Orientation"),At=d(),Wt=s("p"),Jt=n(t[10]),zt=d(),Gt=s("div"),Qt=s("h4"),Kt=n("Speed"),Xt=d(),Yt=s("p"),Zt=n(t[8]),te=d(),ee=s("div"),ae=s("button"),se=n("Reset Vehicle"),ne=d(),oe=s("div"),le=s("h4"),re=n("Dash Cam"),ce=d(),S(ie.$$.fragment),de=d(),S(he.$$.fragment),ge=d(),ve=s("h4"),we=n("Sensors"),Ee=d(),be=s("div"),Se=s("div");for(let t=0;t<Re.length;t+=1)Re[t].c();this.h()},l(s){y(e.$$.fragment,s),a=h(s),g=o(s,"DIV",{class:!0});var n=l(g);E=o(n,"H5",{});var i=l(E);N=r(i,t[0]),i.forEach(c),H=h(n),j=o(n,"DIV",{class:!0});var f=l(j);C=o(f,"DIV",{class:!0});var u=l(C);R=o(u,"DIV",{fluid:!0,class:!0});var d=l(R);B=o(d,"DIV",{});var m=l(B);L=o(m,"DIV",{class:!0});var p=l(L);P=o(p,"H4",{});var v=l(P);_=r(v,"Manual Control"),v.forEach(c),M=h(p),q=o(p,"FORM",{class:!0,id:!0,label:!0,"label-for":!0,"label-cols":!0});var w=l(q);U=o(w,"INPUT",{type:!0}),w.forEach(c),A=h(p),W=o(p,"H4",{});var b=l(W);J=r(b,"Vehicle Inputs"),b.forEach(c),z=h(p),G=o(p,"DIV",{});var S=l(G);Q=o(S,"DIV",{cols:!0,class:!0});var $=l(Q);X=o($,"LABEL",{for:!0});var k=l(X);Z=r(k,"Throttle:"),k.forEach(c),$.forEach(c),et=h(S),at=o(S,"DIV",{cols:!0,class:!0});var I=l(at);st=o(I,"FORM",{id:!0,"v-model":!0,type:!0,min:!0,max:!0,step:!0,number:!0}),l(st).forEach(c),I.forEach(c),nt=h(S),ot=o(S,"DIV",{cols:!0,class:!0});var D=l(ot);lt=o(D,"DIV",{class:!0});var V=l(lt);rt=r(V,Ie),V.forEach(c),D.forEach(c),S.forEach(c),ct=h(p),it=o(p,"DIV",{});var x=l(it);ft=o(x,"DIV",{cols:!0,class:!0});var T=l(ft);ut=o(T,"LABEL",{for:!0});var O=l(ut);dt=r(O,"Brake:"),O.forEach(c),T.forEach(c),ht=h(x),mt=o(x,"DIV",{cols:!0,class:!0});var F=l(mt);pt=o(F,"FORM",{id:!0,"v-model":!0,type:!0,min:!0,max:!0,step:!0,number:!0}),l(pt).forEach(c),F.forEach(c),gt=h(x),vt=o(x,"DIV",{cols:!0,class:!0});var K=l(vt);wt=o(K,"DIV",{class:!0});var Y=l(wt);Et=r(Y,De),Y.forEach(c),K.forEach(c),x.forEach(c),bt=h(p),St=o(p,"DIV",{});var tt=l(St);yt=o(tt,"DIV",{cols:!0,class:!0});var fe=l(yt);$t=o(fe,"LABEL",{for:!0});var ue=l($t);kt=r(ue,"Steer:"),ue.forEach(c),fe.forEach(c),It=h(tt),Dt=o(tt,"DIV",{cols:!0,class:!0});var me=l(Dt);Vt=o(me,"FORM",{id:!0,"v-model":!0,type:!0,min:!0,max:!0,step:!0,number:!0}),l(Vt).forEach(c),me.forEach(c),xt=h(tt),Tt=o(tt,"DIV",{cols:!0,class:!0});var pe=l(Tt);Ot=o(pe,"DIV",{class:!0});var ye=l(Ot);Nt=r(ye,Ve),ye.forEach(c),pe.forEach(c),tt.forEach(c),Ht=h(p),jt=o(p,"DIV",{class:!0});var $e=l(jt);Ct=o($e,"DIV",{});var ke=l(Ct);Rt=o(ke,"H4",{});var xe=l(Rt);Bt=r(xe,"Position"),xe.forEach(c),Ft=h(ke),Lt=o(ke,"P",{class:!0});var Te=l(Lt);Pt=r(Te,t[9]),Te.forEach(c),ke.forEach(c),_t=h($e),Mt=o($e,"DIV",{});var Oe=l(Mt);qt=o(Oe,"H4",{});var Ne=l(qt);Ut=r(Ne,"Orientation"),Ne.forEach(c),At=h(Oe),Wt=o(Oe,"P",{class:!0});var He=l(Wt);Jt=r(He,t[10]),He.forEach(c),Oe.forEach(c),zt=h($e),Gt=o($e,"DIV",{});var je=l(Gt);Qt=o(je,"H4",{});var Ce=l(Qt);Kt=r(Ce,"Speed"),Ce.forEach(c),Xt=h(je),Yt=o(je,"P",{class:!0});var Be=l(Yt);Zt=r(Be,t[8]),Be.forEach(c),je.forEach(c),$e.forEach(c),te=h(p),ee=o(p,"DIV",{class:!0});var Fe=l(ee);ae=o(Fe,"BUTTON",{class:!0});var Le=l(ae);se=r(Le,"Reset Vehicle"),Le.forEach(c),Fe.forEach(c),p.forEach(c),ne=h(m),oe=o(m,"DIV",{class:!0});var Pe=l(oe);le=o(Pe,"H4",{});var _e=l(le);re=r(_e,"Dash Cam"),_e.forEach(c),ce=h(Pe),y(ie.$$.fragment,Pe),de=h(Pe),y(he.$$.fragment,Pe),Pe.forEach(c),m.forEach(c),ge=h(d),ve=o(d,"H4",{});var Me=l(ve);we=r(Me,"Sensors"),Me.forEach(c),Ee=h(d),be=o(d,"DIV",{class:!0});var qe=l(be);Se=o(qe,"DIV",{class:!0});var Ue=l(Se);for(let t=0;t<Re.length;t+=1)Re[t].l(Ue);Ue.forEach(c),qe.forEach(c),d.forEach(c),u.forEach(c),f.forEach(c),n.forEach(c),this.h()},h(){m(U,"type","checkbox"),m(q,"class","align-items-center"),m(q,"id","manual-control-group"),m(q,"label","Manual Control:"),m(q,"label-for","manual-control"),m(q,"label-cols","2"),m(X,"for","range-throttle"),m(Q,"cols","2"),m(Q,"class","align-self-center"),m(st,"id","range-throttle"),m(st,"v-model","control.throttle"),m(st,"type","range"),m(st,"min","0"),m(st,"max","1"),m(st,"step","0.01"),m(st,"number",""),m(at,"cols","8"),m(at,"class","align-self-center"),m(lt,"class","mt-2"),m(ot,"cols","2"),m(ot,"class","align-self-center"),m(ut,"for","range-brake"),m(ft,"cols","2"),m(ft,"class","align-self-center"),m(pt,"id","range-brake"),m(pt,"v-model","control.brake"),m(pt,"type","range"),m(pt,"min","0"),m(pt,"max","1"),m(pt,"step","0.01"),m(pt,"number",""),m(mt,"cols","8"),m(mt,"class","align-self-center"),m(wt,"class","mt-2"),m(vt,"cols","2"),m(vt,"class","align-self-center"),m($t,"for","range-throttle"),m(yt,"cols","2"),m(yt,"class","align-self-center"),m(Vt,"id","range-steer"),m(Vt,"v-model","control.steer"),m(Vt,"type","range"),m(Vt,"min","-1"),m(Vt,"max","1"),m(Vt,"step","0.01"),m(Vt,"number",""),m(Dt,"cols","8"),m(Dt,"class","align-self-center"),m(Ot,"class","mt-2"),m(Tt,"cols","2"),m(Tt,"class","align-self-center"),m(Lt,"class","svelte-au1azq"),m(Wt,"class","svelte-au1azq"),m(Yt,"class","svelte-au1azq"),m(jt,"class","mt-3"),m(ae,"class","my-1 align-self-center"),m(ee,"class","text-center"),m(L,"class","col-xl-6"),m(oe,"class","col-xl-6"),m(Se,"class",""),m(be,"class",""),m(R,"fluid",""),m(R,"class","w3-container"),m(C,"class","autopilot"),m(j,"class","w3-responsive"),m(g,"class","w3-container")},m(s,n){$(e,s,n),i(s,a,n),i(s,g,n),f(g,E),f(E,N),f(g,H),f(g,j),f(j,C),f(C,R),f(R,B),f(B,L),f(L,P),f(P,_),f(L,M),f(L,q),f(q,U),f(L,A),f(L,W),f(W,J),f(L,z),f(L,G),f(G,Q),f(Q,X),f(X,Z),f(G,et),f(G,at),f(at,st),f(G,nt),f(G,ot),f(ot,lt),f(lt,rt),f(L,ct),f(L,it),f(it,ft),f(ft,ut),f(ut,dt),f(it,ht),f(it,mt),f(mt,pt),f(it,gt),f(it,vt),f(vt,wt),f(wt,Et),f(L,bt),f(L,St),f(St,yt),f(yt,$t),f($t,kt),f(St,It),f(St,Dt),f(Dt,Vt),f(St,xt),f(St,Tt),f(Tt,Ot),f(Ot,Nt),f(L,Ht),f(L,jt),f(jt,Ct),f(Ct,Rt),f(Rt,Bt),f(Ct,Ft),f(Ct,Lt),f(Lt,Pt),f(jt,_t),f(jt,Mt),f(Mt,qt),f(qt,Ut),f(Mt,At),f(Mt,Wt),f(Wt,Jt),f(jt,zt),f(jt,Gt),f(Gt,Qt),f(Qt,Kt),f(Gt,Xt),f(Gt,Yt),f(Yt,Zt),f(L,te),f(L,ee),f(ee,ae),f(ae,se),f(B,ne),f(B,oe),f(oe,le),f(le,re),f(oe,ce),$(ie,oe,null),f(oe,de),$(he,oe,null),f(R,ge),f(R,ve),f(ve,we),f(R,Ee),f(R,be),f(be,Se);for(let t=0;t<Re.length;t+=1)Re[t].m(Se,null);ye=!0,$e||(ke=[p(U,"change",t[11]),p(ae,"click",t[12])],$e=!0)},p(t,e){(!ye||1&e[0])&&u(N,t[0]),(!ye||64&e[0])&&Ie!==(Ie=t[6].throttle.toFixed(3)+"")&&u(rt,Ie),(!ye||64&e[0])&&De!==(De=t[6].brake.toFixed(3)+"")&&u(Et,De),(!ye||64&e[0])&&Ve!==(Ve=t[6].steer.toFixed(3)+"")&&u(Nt,Ve);const a={};!fe&&2&e[0]&&(fe=!0,a.src=t[1],k((()=>fe=!1))),!ue&&8&e[0]&&(ue=!0,a.meta=t[3],k((()=>ue=!1))),ie.$set(a);const s={};if(!me&&4&e[0]&&(me=!0,s.src=t[2],k((()=>me=!1))),!pe&&16&e[0]&&(pe=!0,s.meta=t[4],k((()=>pe=!1))),he.$set(s),160&e[0]){let a;for(Ce=t[5],a=0;a<Ce.length;a+=1){const s=Y(t,Ce,a);Re[a]?(Re[a].p(s,e),b(Re[a],1)):(Re[a]=tt(s),Re[a].c(),b(Re[a],1),Re[a].m(Se,null))}for(V(),a=Ce.length;a<Re.length;a+=1)Be(a);x()}},i(t){if(!ye){b(e.$$.fragment,t),b(ie.$$.fragment,t),b(he.$$.fragment,t);for(let t=0;t<Ce.length;t+=1)b(Re[t]);ye=!0}},o(t){I(e.$$.fragment,t),I(ie.$$.fragment,t),I(he.$$.fragment,t),Re=Re.filter(Boolean);for(let e=0;e<Re.length;e+=1)I(Re[e]);ye=!1},d(t){D(e,t),t&&c(a),t&&c(g),D(ie),D(he),T(Re,t),$e=!1,O(ke)}}}function at(t,e,a){let{title:s}=e,{input_data:n}=e,o="",l="",r={},c={},i=[{name:"autopilot-gnss",type:"gnss"},{name:"autopilot-imu",type:"imu"},{name:"autopilot-tachometer",type:"tachometer"},{name:"autopilot-camera1",type:"camera"},{name:"autopilot-camera2",type:"camera"}],f=!1,u=null,d={throttle:0,brake:0,steer:0},h=[],m={};function p(t){let e=m[t];return e||null}let g=p("autopilot-tachometer");g&&g.speed.toFixed(3);let v=p("autopilot-gnss");v&&(v.latitude,v.longitude,v.altitude.toFixed(2));let w=p("autopilot-imu");function E(){console.log("Manual Control switched on"),window.addEventListener("keydown",b),window.addEventListener("keyup",S),a(6,d.throttle=0,d),a(6,d.brake=1,d),a(6,d.steer=0,d)}function b(t){let e=String.fromCharCode(t.keyCode).toLowerCase();f&&u===e||(f=!0,u=e,"w"===e?a(6,d.throttle=1,d):"a"===e?a(6,d.steer=-1,d):"s"===e?a(6,d.brake=1,d):"d"===e&&a(6,d.steer=1,d),y())}function S(t){f=!1;let e=String.fromCharCode(t.keyCode).toLowerCase();"w"===e?a(6,d.throttle=0,d):"a"===e?a(6,d.steer=0,d):"s"===e?a(6,d.brake=0,d):"d"===e&&a(6,d.steer=0,d),y()}function y(){H({method:"POST",url:"/control",data:d,headers:{"content-type":"application/json"}}).catch((function(t){L.danger("apply control failed")}))}return w&&w.orientation.toFixed(3),N((async()=>{H({method:"POST",url:"/config",headers:{"content-type":"application/json"},data:{newSensors:i}}).then((t=>{console.log("sensor added in backend, now websocket connection"),i.forEach((t=>{!function(t){h.push(t);let e="http://localhost:8000/sensor/"+t.type+"/"+t.name+"/websocket";e=e.replace("http","ws"),console.log("trying websocket connection at URL:",e);let s=new WebSocket(e);s.onopen=function(){console.log("WebSocket connection established with "+e)},s.onmessage=function(e){let s=JSON.parse(e.data);m={sensorName:t.name,sensorData:s},"autopilot-camera1"==m.sensorName&&(console.log("data camera1",s),a(1,o="data:image/jpeg;base64,"+s.image),a(3,r={timestamp:s.timestamp,frame:s.frame})),"autopilot-camera2"==m.sensorName&&(console.log("data camera2",s),a(2,l="data:image/jpeg;base64,"+s.image),a(4,c={timestamp:s.timestamp,frame:s.frame}))}}(t),console.log("sensor added!")}));let e={enabled:!0,updateInterval:.1,imageWidth:800,imageHeight:600,fov:90},s="/sensor/camera/autopilot-camera1";console.log("first request to carla backend..."),H({method:"POST",url:s,data:{settings:e},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 1 to carla failed")})),e.position={x:-6,y:0,z:5},e.rotation={roll:0,pitch:-35,yaw:0},s="/sensor/camera/autopilot-camera2",H({method:"POST",url:s,data:{settings:e},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 2 to carla failed")}));s="/sensor/imu/autopilot-imu",H({method:"POST",url:s,data:{settings:{enabled:!0,updateInterval:.1}},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 3 to carla failed")}));s="/sensor/gnss/autopilot-gnss",H({method:"POST",url:s,data:{settings:{enabled:!0,updateInterval:.1}},headers:{"content-type":"application/json"}}).catch((function(t){L.danger("axos request 4 to carla failed")}));s="/sensor/tachometer/autopilot-tachometer",H({method:"POST",url:s,data:{settings:{enabled:!0,updateInterval:.1}},headers:{"content-type":"application/json"}}).then((()=>{L.danger("canging to manual control"),E()})),L.success("The required sensors for the autopilot have been successfully created.")}),(t=>{L.danger("failed to call /config sensor")}))})),t.$$set=t=>{"title"in t&&a(0,s=t.title),"input_data"in t&&a(13,n=t.input_data)},[s,o,l,r,c,i,d,h,g,v,w,E,function(){a(6,d.throttle=0,d),a(6,d.brake=1,d),a(6,d.steer=0,d),H({method:"POST",url:"/config",headers:{"content-type":"application/json"},data:{simulation:{reset:!0}}}).then((()=>{console.log("Simulation was reset!")}),(t=>{console.log(t)}))},n,function(t){o=t,a(1,o)},function(t){r=t,a(3,r)},function(t){l=t,a(2,l)},function(t){c=t,a(4,c)},function(e,s){t.$$.not_equal(s.name,e)&&(s.name=e,a(5,i))},function(e,s){t.$$.not_equal(s.type,e)&&(s.type=e,a(5,i))}]}class st extends t{constructor(t){super(),e(this,t,at,et,a,{title:0,input_data:13},[-1,-1])}}function nt(t){let e,a,u,v,w,E,b,S,y,$;return{c(){e=s("div"),a=s("span"),u=n("×"),v=d(),w=s("img"),b=d(),S=s("div"),this.h()},l(t){e=o(t,"DIV",{id:!0,class:!0});var s=l(e);a=o(s,"SPAN",{class:!0});var n=l(a);u=r(n,"×"),n.forEach(c),v=h(s),w=o(s,"IMG",{class:!0,id:!0,src:!0}),b=h(s),S=o(s,"DIV",{id:!0,class:!0}),l(S).forEach(c),s.forEach(c),this.h()},h(){m(a,"class","close svelte-rk4oiy"),m(w,"class","modal-content svelte-rk4oiy"),m(w,"id","img01"),w.src!==(E="")&&m(w,"src",""),m(S,"id","caption"),m(S,"class","svelte-rk4oiy"),m(e,"id","myModal"),m(e,"class","modal svelte-rk4oiy")},m(t,s){i(t,e,s),f(e,a),f(a,u),f(e,v),f(e,w),f(e,b),f(e,S),y||($=p(a,"click",ot),y=!0)},p:g,i:g,o:g,d(t){t&&c(e),y=!1,$()}}}function ot(){document.getElementById("myModal").style.display="none"}function lt(t,e){var a=document.getElementById("myModal"),s=document.getElementById("img01"),n=document.getElementById("caption");a.style.display="block",s.src=t,n.innerHTML=e}function rt(t,e,a){return[lt]}class ct extends t{constructor(t){super(),e(this,t,rt,nt,a,{changeImage:0})}get changeImage(){return lt}}function it(t,e,a){const s=t.slice();return s[33]=e[a],s[35]=a,s}function ft(t,e,a){const s=t.slice();return s[36]=e[a],s[35]=a,s}function ut(t,e,a){const s=t.slice();return s[36]=e[a],s[35]=a,s}function dt(t,e,a){const s=t.slice();return s[39]=e[a],s[40]=e,s[41]=a,s}function ht(t){let e,a,g,v,w,E,S,y,$,k,D,T,N,H,j,C,R,B,F,L,P,_,M,q,U,A,W,J,z,G,Q,K,X,Y,Z,tt,et="configurations"in t[1]&&mt(t);return{c(){e=s("h4"),a=n("Scenario: "),g=n(t[3]),v=n(" Number of Containers: "),w=n(t[4]),E=n("."),S=d(),y=s("div"),$=s("div"),k=s("button"),D=n("Start Simulation"),T=d(),N=s("div"),H=s("button"),j=n("Stop Simulation"),C=d(),R=s("div"),B=s("button"),F=n("Reset WS Connection"),L=d(),P=s("hr"),_=d(),M=s("section"),q=s("h3"),U=n("Application Logs"),A=d(),W=s("button"),J=n("Clear Logs"),z=d(),et&&et.c(),G=d(),Q=s("br"),K=d(),X=s("hr"),this.h()},l(s){e=o(s,"H4",{});var n=l(e);a=r(n,"Scenario: "),g=r(n,t[3]),v=r(n," Number of Containers: "),w=r(n,t[4]),E=r(n,"."),n.forEach(c),S=h(s),y=o(s,"DIV",{class:!0});var i=l(y);$=o(i,"DIV",{class:!0});var f=l($);k=o(f,"BUTTON",{class:!0});var u=l(k);D=r(u,"Start Simulation"),u.forEach(c),f.forEach(c),T=h(i),N=o(i,"DIV",{class:!0});var d=l(N);H=o(d,"BUTTON",{class:!0});var m=l(H);j=r(m,"Stop Simulation"),m.forEach(c),d.forEach(c),C=h(i),R=o(i,"DIV",{class:!0});var p=l(R);B=o(p,"BUTTON",{class:!0});var b=l(B);F=r(b,"Reset WS Connection"),b.forEach(c),p.forEach(c),i.forEach(c),L=h(s),P=o(s,"HR",{class:!0}),_=h(s),M=o(s,"SECTION",{class:!0});var I=l(M);q=o(I,"H3",{});var V=l(q);U=r(V,"Application Logs"),V.forEach(c),I.forEach(c),A=h(s),W=o(s,"BUTTON",{class:!0});var x=l(W);J=r(x,"Clear Logs"),x.forEach(c),z=h(s),et&&et.l(s),G=h(s),Q=o(s,"BR",{}),K=h(s),X=o(s,"HR",{class:!0}),this.h()},h(){m(k,"class","w3-col w3-input w3-border"),m($,"class","w3-third"),m(H,"class","w3-col w3-input w3-border"),m(N,"class","w3-third"),m(B,"class","w3-col w3-input w3-border"),m(R,"class","w3-third"),m(y,"class","w3-row w3-section"),m(P,"class","svelte-drd2kv"),m(M,"class","page-headline"),m(W,"class","w3-col w3-input w3-border w3-button"),m(X,"class","svelte-drd2kv")},m(s,n){i(s,e,n),f(e,a),f(e,g),f(e,v),f(e,w),f(e,E),i(s,S,n),i(s,y,n),f(y,$),f($,k),f(k,D),f(y,T),f(y,N),f(N,H),f(H,j),f(y,C),f(y,R),f(R,B),f(B,F),i(s,L,n),i(s,P,n),i(s,_,n),i(s,M,n),f(M,q),f(q,U),i(s,A,n),i(s,W,n),f(W,J),i(s,z,n),et&&et.m(s,n),i(s,G,n),i(s,Q,n),i(s,K,n),i(s,X,n),Y=!0,Z||(tt=[p(k,"click",t[16]),p(H,"click",t[17]),p(B,"click",t[18]),p(W,"click",t[8])],Z=!0)},p(t,e){(!Y||8&e[0])&&u(g,t[3]),(!Y||16&e[0])&&u(w,t[4]),"configurations"in t[1]?et?(et.p(t,e),2&e[0]&&b(et,1)):(et=mt(t),et.c(),b(et,1),et.m(G.parentNode,G)):et&&(V(),I(et,1,1,(()=>{et=null})),x())},i(t){Y||(b(et),Y=!0)},o(t){I(et),Y=!1},d(t){t&&c(e),t&&c(S),t&&c(y),t&&c(L),t&&c(P),t&&c(_),t&&c(M),t&&c(A),t&&c(W),t&&c(z),et&&et.d(t),t&&c(G),t&&c(Q),t&&c(K),t&&c(X),Z=!1,O(tt)}}}function mt(t){let e,a,s=t[1].configurations.length>0&&pt(t);return{c(){s&&s.c(),e=E()},l(t){s&&s.l(t),e=E()},m(t,n){s&&s.m(t,n),i(t,e,n),a=!0},p(t,a){t[1].configurations.length>0?s?(s.p(t,a),2&a[0]&&b(s,1)):(s=pt(t),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(V(),I(s,1,1,(()=>{s=null})),x())},i(t){a||(b(s),a=!0)},o(t){I(s),a=!1},d(t){s&&s.d(t),t&&c(e)}}}function pt(t){let e,a,s=t[1].configurations,n=[];for(let l=0;l<s.length;l+=1)n[l]=Et(dt(t,s,l));const o=t=>I(n[t],1,1,(()=>{n[t]=null}));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=E()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=E()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);i(t,e,s),a=!0},p(t,a){if(34&a[0]){let l;for(s=t[1].configurations,l=0;l<s.length;l+=1){const o=dt(t,s,l);n[l]?(n[l].p(o,a),b(n[l],1)):(n[l]=Et(o),n[l].c(),b(n[l],1),n[l].m(e.parentNode,e))}for(V(),l=s.length;l<n.length;l+=1)o(l);x()}},i(t){if(!a){for(let t=0;t<s.length;t+=1)b(n[t]);a=!0}},o(t){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)I(n[e]);a=!1},d(t){T(n,t),t&&c(e)}}}function gt(t){let e,a,s=t[41].toString()in t[5],n=s&&vt(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=t[41].toString()in t[5]),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=vt(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function vt(t){let e,a,s=t[5][t[41].toString()].length>0,n=s&&wt(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=t[5][t[41].toString()].length>0),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=wt(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function wt(t){let e,a,m,p,g,E,V=t[39].container_info.name+"";function x(e){t[19](e,t[41])}let T={title:t[39].container_info.name,headers:Object.keys(t[5][t[41].toString()][0])};return void 0!==t[5][t[41].toString()]&&(T.data=t[5][t[41].toString()]),p=new B({props:T}),v.push((()=>w(p,"data",x))),{c(){e=s("h5"),a=n(V),m=d(),S(p.$$.fragment)},l(t){e=o(t,"H5",{});var s=l(e);a=r(s,V),s.forEach(c),m=h(t),y(p.$$.fragment,t)},m(t,s){i(t,e,s),f(e,a),i(t,m,s),$(p,t,s),E=!0},p(e,s){t=e,(!E||2&s[0])&&V!==(V=t[39].container_info.name+"")&&u(a,V);const n={};2&s[0]&&(n.title=t[39].container_info.name),32&s[0]&&(n.headers=Object.keys(t[5][t[41].toString()][0])),!g&&32&s[0]&&(g=!0,n.data=t[5][t[41].toString()],k((()=>g=!1))),p.$set(n)},i(t){E||(b(p.$$.fragment,t),E=!0)},o(t){I(p.$$.fragment,t),E=!1},d(t){t&&c(e),t&&c(m),D(p,t)}}}function Et(t){let e,a,s=Object.keys(t[5]).length>0,n=s&&gt(t);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,s){n&&n.m(t,s),i(t,e,s),a=!0},p(t,a){32&a[0]&&(s=Object.keys(t[5]).length>0),s?n?(n.p(t,a),32&a[0]&&b(n,1)):(n=gt(t),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(V(),I(n,1,1,(()=>{n=null})),x())},i(t){a||(b(n),a=!0)},o(t){I(n),a=!1},d(t){n&&n.d(t),t&&c(e)}}}function bt(t){let e,a,u,g,v,w,E,b,S,y,$,k,I,D,V,x,T,N,H,C,R,B,F,L=t[6].length>0&&St(t);return{c(){e=s("div"),a=s("div"),u=s("button"),g=n("Start Simulation"),v=d(),w=s("hr"),E=d(),b=s("div"),S=s("h1"),y=s("b"),$=n("Edit Files"),k=d(),L&&L.c(),I=d(),D=s("hr"),V=d(),x=s("div"),T=s("div"),N=s("button"),H=n("Delete Files"),C=d(),R=s("hr"),this.h()},l(t){e=o(t,"DIV",{class:!0});var s=l(e);a=o(s,"DIV",{class:!0});var n=l(a);u=o(n,"BUTTON",{class:!0});var i=l(u);g=r(i,"Start Simulation"),i.forEach(c),n.forEach(c),s.forEach(c),v=h(t),w=o(t,"HR",{class:!0}),E=h(t),b=o(t,"DIV",{class:!0});var f=l(b);S=o(f,"H1",{class:!0,style:!0});var d=l(S);y=o(d,"B",{});var m=l(y);$=r(m,"Edit Files"),m.forEach(c),d.forEach(c),f.forEach(c),k=h(t),L&&L.l(t),I=h(t),D=o(t,"HR",{class:!0}),V=h(t),x=o(t,"DIV",{class:!0});var p=l(x);T=o(p,"DIV",{class:!0});var O=l(T);N=o(O,"BUTTON",{class:!0});var j=l(N);H=r(j,"Delete Files"),j.forEach(c),O.forEach(c),p.forEach(c),C=h(t),R=o(t,"HR",{class:!0}),this.h()},h(){m(u,"class","w3-col w3-input w3-border"),m(a,"class","w3-rest"),m(e,"class","w3-row w3-section"),m(w,"class","svelte-drd2kv"),m(S,"class","w3-text-yellow"),j(S,"text-shadow","1px 1px 0 #444"),m(b,"class","w3-panel w3-blue"),m(D,"class","svelte-drd2kv"),m(N,"class","w3-col w3-input w3-border"),m(T,"class","w3-rest"),m(x,"class","w3-row w3-section"),m(R,"class","svelte-drd2kv")},m(s,n){i(s,e,n),f(e,a),f(a,u),f(u,g),i(s,v,n),i(s,w,n),i(s,E,n),i(s,b,n),f(b,S),f(S,y),f(y,$),i(s,k,n),L&&L.m(s,n),i(s,I,n),i(s,D,n),i(s,V,n),i(s,x,n),f(x,T),f(T,N),f(N,H),i(s,C,n),i(s,R,n),B||(F=[p(u,"click",t[11]),p(N,"click",t[13])],B=!0)},p(t,e){t[6].length>0?L?L.p(t,e):(L=St(t),L.c(),L.m(I.parentNode,I)):L&&(L.d(1),L=null)},d(t){t&&c(e),t&&c(v),t&&c(w),t&&c(E),t&&c(b),t&&c(k),L&&L.d(t),t&&c(I),t&&c(D),t&&c(V),t&&c(x),t&&c(C),t&&c(R),B=!1,O(F)}}}function St(t){let e,a,n,r,u,p,g=Object.keys(t[6][0]),v=[];for(let s=0;s<g.length;s+=1)v[s]=yt(ut(t,g,s));let w=t[6],E=[];for(let s=0;s<w.length;s+=1)E[s]=Dt(it(t,w,s));return{c(){e=s("div"),a=s("div"),n=s("table"),r=s("thead"),u=s("tr");for(let t=0;t<v.length;t+=1)v[t].c();p=d();for(let t=0;t<E.length;t+=1)E[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0});var s=l(e);a=o(s,"DIV",{class:!0});var i=l(a);n=o(i,"TABLE",{class:!0,style:!0});var f=l(n);r=o(f,"THEAD",{});var d=l(r);u=o(d,"TR",{class:!0});var m=l(u);for(let e=0;e<v.length;e+=1)v[e].l(m);m.forEach(c),d.forEach(c),p=h(f);for(let e=0;e<E.length;e+=1)E[e].l(f);f.forEach(c),i.forEach(c),s.forEach(c),this.h()},h(){m(u,"class","w3-dark-grey"),m(n,"class","w3-table-all"),j(n,"width","100%"),m(a,"class","w3-responsive"),m(e,"class","w3-container")},m(t,s){i(t,e,s),f(e,a),f(a,n),f(n,r),f(r,u);for(let e=0;e<v.length;e+=1)v[e].m(u,null);f(n,p);for(let e=0;e<E.length;e+=1)E[e].m(n,null)},p(t,e){if(64&e[0]){let a;for(g=Object.keys(t[6][0]),a=0;a<g.length;a+=1){const s=ut(t,g,a);v[a]?v[a].p(s,e):(v[a]=yt(s),v[a].c(),v[a].m(u,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=g.length}if(16448&e[0]){let a;for(w=t[6],a=0;a<w.length;a+=1){const s=it(t,w,a);E[a]?E[a].p(s,e):(E[a]=Dt(s),E[a].c(),E[a].m(n,null))}for(;a<E.length;a+=1)E[a].d(1);E.length=w.length}},d(t){t&&c(e),T(v,t),T(E,t)}}}function yt(t){let e,a,d=t[36]+"";return{c(){e=s("th"),a=n(d)},l(t){e=o(t,"TH",{});var s=l(e);a=r(s,d),s.forEach(c)},m(t,s){i(t,e,s),f(e,a)},p(t,e){64&e[0]&&d!==(d=t[36]+"")&&u(a,d)},d(t){t&&c(e)}}}function $t(t){let e,a,d=t[33][t[36]]+"";return{c(){e=s("td"),a=n(d)},l(t){e=o(t,"TD",{});var s=l(e);a=r(s,d),s.forEach(c)},m(t,s){i(t,e,s),f(e,a)},p(t,e){64&e[0]&&d!==(d=t[33][t[36]]+"")&&u(a,d)},d(t){t&&c(e)}}}function kt(t){let e,a,d,h,m=t[33][t[36]]+"";return{c(){e=s("td"),a=n(m)},l(t){e=o(t,"TD",{});var s=l(e);a=r(s,m),s.forEach(c)},m(s,n){i(s,e,n),f(e,a),d||(h=p(e,"click",t[14]),d=!0)},p(t,e){64&e[0]&&m!==(m=t[33][t[36]]+"")&&u(a,m)},d(t){t&&c(e),d=!1,h()}}}function It(t){let e;function a(t,e){return"filename"==t[36]?kt:$t}let s=a(t),n=s(t);return{c(){n.c(),e=E()},l(t){n.l(t),e=E()},m(t,a){n.m(t,a),i(t,e,a)},p(t,o){s===(s=a(t))&&n?n.p(t,o):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},d(t){n.d(t),t&&c(e)}}}function Dt(t){let e,a,n=Object.keys(t[6][0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=It(ft(t,n,s));return{c(){e=s("tr");for(let t=0;t<r.length;t+=1)r[t].c();a=d()},l(t){e=o(t,"TR",{});var s=l(e);for(let e=0;e<r.length;e+=1)r[e].l(s);a=h(s),s.forEach(c)},m(t,s){i(t,e,s);for(let a=0;a<r.length;a+=1)r[a].m(e,null);f(e,a)},p(t,s){if(16448&s[0]){let o;for(n=Object.keys(t[6][0]),o=0;o<n.length;o+=1){const l=ft(t,n,o);r[o]?r[o].p(l,s):(r[o]=It(l),r[o].c(),r[o].m(e,a))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&c(e),T(r,t)}}}function Vt(t){let e,a,u,g,E,V,x,T,O,N,H,j,C,R;function B(e){t[20](e)}let F={title:"AutoPilot Component"};return void 0!==t[7]&&(F.input_data=t[7]),T=new st({props:F}),v.push((()=>w(T,"input_data",B))),{c(){e=s("div"),a=s("div"),u=s("button"),g=n("Start Simulation"),E=d(),V=s("hr"),x=d(),S(T.$$.fragment),N=d(),H=s("hr"),this.h()},l(t){e=o(t,"DIV",{class:!0});var s=l(e);a=o(s,"DIV",{class:!0});var n=l(a);u=o(n,"BUTTON",{class:!0});var i=l(u);g=r(i,"Start Simulation"),i.forEach(c),n.forEach(c),s.forEach(c),E=h(t),V=o(t,"HR",{class:!0}),x=h(t),y(T.$$.fragment,t),N=h(t),H=o(t,"HR",{class:!0}),this.h()},h(){m(u,"class","w3-col w3-input w3-border"),m(a,"class","w3-rest"),m(e,"class","w3-row w3-section"),m(V,"class","svelte-drd2kv"),m(H,"class","svelte-drd2kv")},m(s,n){i(s,e,n),f(e,a),f(a,u),f(u,g),i(s,E,n),i(s,V,n),i(s,x,n),$(T,s,n),i(s,N,n),i(s,H,n),j=!0,C||(R=p(u,"click",t[12]),C=!0)},p(t,e){const a={};!O&&128&e[0]&&(O=!0,a.input_data=t[7],k((()=>O=!1))),T.$set(a)},i(t){j||(b(T.$$.fragment,t),j=!0)},o(t){I(T.$$.fragment,t),j=!1},d(t){t&&c(e),t&&c(E),t&&c(V),t&&c(x),D(T,t),t&&c(N),t&&c(H),C=!1,R()}}}function xt(t){let e,a,u,p,g,v,w,E,k,T,O,N,H,R,B,L,P,_,M;a=new F({});p=new ct({props:{}}),t[15](p);let q="Communication"==t[2]&&ht(t),U="Static"==t[2]&&bt(t),A="Driving Simulation"==t[2]&&Vt(t);return{c(){e=d(),S(a.$$.fragment),u=d(),S(p.$$.fragment),g=d(),v=s("hr"),w=d(),E=s("div"),k=s("h1"),T=s("b"),O=n("Simulation"),N=d(),H=s("hr"),R=d(),q&&q.c(),B=d(),U&&U.c(),L=d(),A&&A.c(),P=d(),_=s("hr"),this.h()},l(t){C('[data-svelte="svelte-1smsifb"]',document.head).forEach(c),e=h(t),y(a.$$.fragment,t),u=h(t),y(p.$$.fragment,t),g=h(t),v=o(t,"HR",{class:!0}),w=h(t),E=o(t,"DIV",{class:!0});var s=l(E);k=o(s,"H1",{class:!0,style:!0});var n=l(k);T=o(n,"B",{});var i=l(T);O=r(i,"Simulation"),i.forEach(c),n.forEach(c),s.forEach(c),N=h(t),H=o(t,"HR",{class:!0}),R=h(t),q&&q.l(t),B=h(t),U&&U.l(t),L=h(t),A&&A.l(t),P=h(t),_=o(t,"HR",{class:!0}),this.h()},h(){document.title="Simulation",m(v,"class","svelte-drd2kv"),m(k,"class","w3-text-yellow"),j(k,"text-shadow","1px 1px 0 #444"),m(E,"class","w3-panel w3-blue"),m(H,"class","svelte-drd2kv"),m(_,"class","svelte-drd2kv")},m(t,s){i(t,e,s),$(a,t,s),i(t,u,s),$(p,t,s),i(t,g,s),i(t,v,s),i(t,w,s),i(t,E,s),f(E,k),f(k,T),f(T,O),i(t,N,s),i(t,H,s),i(t,R,s),q&&q.m(t,s),i(t,B,s),U&&U.m(t,s),i(t,L,s),A&&A.m(t,s),i(t,P,s),i(t,_,s),M=!0},p(t,e){p.$set({}),"Communication"==t[2]?q?(q.p(t,e),4&e[0]&&b(q,1)):(q=ht(t),q.c(),b(q,1),q.m(B.parentNode,B)):q&&(V(),I(q,1,1,(()=>{q=null})),x()),"Static"==t[2]?U?U.p(t,e):(U=bt(t),U.c(),U.m(L.parentNode,L)):U&&(U.d(1),U=null),"Driving Simulation"==t[2]?A?(A.p(t,e),4&e[0]&&b(A,1)):(A=Vt(t),A.c(),b(A,1),A.m(P.parentNode,P)):A&&(V(),I(A,1,1,(()=>{A=null})),x())},i(t){M||(b(a.$$.fragment,t),b(p.$$.fragment,t),b(q),b(A),M=!0)},o(t){I(a.$$.fragment,t),I(p.$$.fragment,t),I(q),I(A),M=!1},d(s){s&&c(e),D(a,s),s&&c(u),t[15](null),D(p,s),s&&c(g),s&&c(v),s&&c(w),s&&c(E),s&&c(N),s&&c(H),s&&c(R),q&&q.d(s),s&&c(B),U&&U.d(s),s&&c(L),A&&A.d(s),s&&c(P),s&&c(_)}}}function Tt(t,e,a){let s,n=[],o={},l="";const r=q.subscribe((t=>{n=t})),c=U.subscribe((t=>{a(1,o=t)})),i=A.subscribe((t=>{a(2,l=t)}));let f=[],u=[];R((()=>{r(),c(),i();for(let t=0;t<f.length;t++)f[t].close();for(let t=0;t<u.length;t++)u[t].close()}));let d="Please create and select a scenario before starting the simulation.",h=!1,m=0,p=[],g={},w=[],E=[];function b(){for(const[t,e]of Object.entries(g))a(5,g[t]=[],g)}async function S(t){if(!h)return void L.danger("please create and activate a scenario first.");"start"==t&&b(),_("/simulation/comm","POST",{command:t,configs:o},(function(t){t.data&&(L.success("simulation started."),console.log("response of simulation",t.data))}))}function y(){for(var t=0;t<f.length;t++)ws=f[t],ws.close()}N((async()=>{let t="";for(let e=0;e<n.length;e++)n[e].activated&&(a(3,d=n[e].name),h=!0,t="/api/db1/scenario_configurations/ref-"+n[e]._id);!function(t,e){P(t,(function(t){let a=JSON.parse(t.response);a.data&&a.data.length>0&&(U.set(a.data[0]),e())}))}(t,(function(){if("Communication"==o.type){"configurations"in o&&a(4,m=o.configurations.length);for(var t=0;t<m;t++){a(5,g[t.toString()]=[],g);let e="ws://localhost:8000/simulation/comm/ws/"+t.toString(),s=new WebSocket(e);s.onopen=function(){window.console.log("Successfully connected to the echo websocket server...")},s.onmessage=function(t){let e=JSON.parse(t.data);console.log(e,"printing JSON now");let s=e.client_index,n=JSON.parse(e.data);"status"in n?p[s]=n.status:a(5,g[s]=[...g[s],n],g)},f.push(s)}}if("Static"==o.type){console.log("hello static sample");let t=new WebSocket("ws://localhost:8000/simulation/static/ws");t.onopen=function(){window.console.log("static simulation websocket")},t.onmessage=function(t){let e=JSON.parse(t.data);a(6,w=[...w,e])},u.push(t)}"Communication"==o.type&&console.log("hello driving scenario")}))}));return[s,o,l,d,m,g,w,E,b,S,y,function(){_("/simulation/static","POST",{configs:o},(function(t){t.data&&(L.success("simulation started."),console.log("response of simulation",t.data))}))},function(){_("/simulation/static","POST",{configs:o},(function(t){t.data&&(L.success("simulation started."),console.log("response of simulation",t.data))}))},function(){_("/simulation/static","DELETE",{configs:o},(function(t){t.data&&(L.success("Delete successful."),a(6,w=[]),console.log("response of simulation",t.data))}))},function(){let t=this.innerText;M("/simulation/static","POST",{configs:o,filename:t},(function(e){if(e){let a=new Blob([e.response],{type:"octet/stream"}),n=(window.URL||window.webkitURL).createObjectURL(a);s.changeImage(n,t)}}))},function(t){v[t?"unshift":"push"]((()=>{s=t,a(0,s)}))},()=>S("start"),()=>S("stop"),()=>y(),function(e,s){t.$$.not_equal(g[s.toString()],e)&&(g[s.toString()]=e,a(5,g))},function(t){E=t,a(7,E)}]}export default class extends t{constructor(t){super(),e(this,t,Tt,xt,a,{},[-1,-1])}}

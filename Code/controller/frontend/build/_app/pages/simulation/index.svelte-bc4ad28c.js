import{S as a,i as s,s as n,e as o,t,k as e,c,a as r,g as l,n as i,d as u,f,F as v,h,j as d,L as p,m as w,b as m,N as b,o as g,G as E,v as S,r as _,M as O,w as I,Q as T,R as D,z as V,a3 as N}from"../../chunks/vendor-ac6a5f58.js";import{T as k}from"../../chunks/index-117b23cc.js";import{a as C}from"../../chunks/requests-b511a0f1.js";import{s as x,a as B}from"../../chunks/store-dd22c6c1.js";function P(a,s,n){const o=a.slice();return o[18]=s[n],o[19]=s,o[20]=n,o}function R(a){let s,n,d,p=a[18]+"",w=a[20];const m=()=>a[9](s,w),b=()=>a[9](null,w);return{c(){s=o("li"),n=t(p),d=e()},l(a){s=c(a,"LI",{});var o=r(s);n=l(o,p),d=i(o),o.forEach(u)},m(a,o){f(a,s,o),v(s,n),v(s,d),m()},p(s,o){a=s,4&o&&p!==(p=a[18]+"")&&h(n,p),w!==a[20]&&(b(),w=a[20],m())},d(a){a&&u(s),b()}}}function y(a){let s,n,D,V,N,C,x,B,y,H,L,U,$,j,G,A,q,z,F,M,Q,W,J,K,X,Y,Z,aa,sa,na,oa,ta,ea,ca,ra,la,ia,ua,fa,va,ha,da,pa,wa,ma,ba,ga,Ea,Sa,_a,Oa,Ia,Ta,Da,Va,Na,ka,Ca,xa,Ba,Pa,Ra,ya,Ha,La,Ua,$a,ja,Ga,Aa,qa,za,Fa,Ma,Qa,Wa,Ja,Ka,Xa,Ya,Za,as,ss,ns,os,ts,es,cs,rs,ls,is,us,fs,vs,hs,ds,ps=a[2],ws=[];for(let o=0;o<ps.length;o+=1)ws[o]=R(P(a,ps,o));return ns=new k({props:{title:"Subprocesses"}}),{c(){s=e(),n=o("hr"),D=e(),V=o("div"),N=o("h1"),C=o("b"),x=t("Simulation"),B=e(),y=o("hr"),H=e(),L=o("h4"),U=t("Scenario: "),$=t(a[0]),j=t(" Number of Containers: "),G=t(a[1]),A=t("."),q=e(),z=o("div"),F=o("div"),M=o("button"),Q=t("Start Simulation"),W=e(),J=o("div"),K=o("button"),X=t("Stop Simulation"),Y=e(),Z=o("hr"),aa=e(),sa=o("section"),na=o("h3"),oa=t("Application Logs"),ta=e(),ea=o("button"),ca=t("Clear Logs"),ra=e(),la=o("ul");for(let a=0;a<ws.length;a+=1)ws[a].c();ia=e(),ua=o("br"),fa=e(),va=o("section"),ha=o("div"),da=o("div"),pa=e(),wa=o("div"),ma=t("Data Container"),ba=e(),ga=o("div"),Ea=o("div"),Sa=o("button"),_a=t("Start Generation"),Oa=e(),Ia=o("button"),Ta=t("Stop Generation"),Da=e(),Va=o("hr"),Na=e(),ka=o("section"),Ca=o("div"),xa=o("div"),Ba=e(),Pa=o("div"),Ra=t("Attack Container"),ya=e(),Ha=o("div"),La=o("div"),Ua=o("button"),$a=t("Start Subprocess"),ja=e(),Ga=o("button"),Aa=t("Stop Subprocess"),qa=e(),za=o("div"),Fa=o("select"),Ma=o("option"),Qa=t("Select Subprocess"),Wa=o("option"),Ja=t("Option 1"),Ka=o("option"),Xa=t("Option 2"),Ya=o("option"),Za=t("Option 3"),as=e(),ss=o("div"),d(ns.$$.fragment),os=e(),ts=o("hr"),es=e(),cs=o("section"),rs=o("div"),ls=o("div"),is=e(),us=o("div"),fs=t("Receiver Container"),this.h()},l(o){p('[data-svelte="svelte-1smsifb"]',document.head).forEach(u),s=i(o),n=c(o,"HR",{}),D=i(o),V=c(o,"DIV",{class:!0});var t=r(V);N=c(t,"H1",{class:!0,style:!0});var e=r(N);C=c(e,"B",{});var f=r(C);x=l(f,"Simulation"),f.forEach(u),e.forEach(u),t.forEach(u),B=i(o),y=c(o,"HR",{}),H=i(o),L=c(o,"H4",{});var v=r(L);U=l(v,"Scenario: "),$=l(v,a[0]),j=l(v," Number of Containers: "),G=l(v,a[1]),A=l(v,"."),v.forEach(u),q=i(o),z=c(o,"DIV",{class:!0});var h=r(z);F=c(h,"DIV",{class:!0});var d=r(F);M=c(d,"BUTTON",{class:!0});var m=r(M);Q=l(m,"Start Simulation"),m.forEach(u),d.forEach(u),W=i(h),J=c(h,"DIV",{class:!0});var b=r(J);K=c(b,"BUTTON",{class:!0});var g=r(K);X=l(g,"Stop Simulation"),g.forEach(u),b.forEach(u),h.forEach(u),Y=i(o),Z=c(o,"HR",{}),aa=i(o),sa=c(o,"SECTION",{class:!0});var E=r(sa);na=c(E,"H3",{});var S=r(na);oa=l(S,"Application Logs"),S.forEach(u),E.forEach(u),ta=i(o),ea=c(o,"BUTTON",{class:!0});var _=r(ea);ca=l(_,"Clear Logs"),_.forEach(u),ra=i(o),la=c(o,"UL",{});var O=r(la);for(let a=0;a<ws.length;a+=1)ws[a].l(O);O.forEach(u),ia=i(o),ua=c(o,"BR",{}),fa=i(o),va=c(o,"SECTION",{class:!0});var I=r(va);ha=c(I,"DIV",{class:!0});var T=r(ha);da=c(T,"DIV",{class:!0}),r(da).forEach(u),pa=i(T),wa=c(T,"DIV",{class:!0});var k=r(wa);ma=l(k,"Data Container"),k.forEach(u),T.forEach(u),ba=i(I),ga=c(I,"DIV",{class:!0});var P=r(ga);Ea=c(P,"DIV",{class:!0});var R=r(Ea);Sa=c(R,"BUTTON",{class:!0});var vs=r(Sa);_a=l(vs,"Start Generation"),vs.forEach(u),Oa=i(R),Ia=c(R,"BUTTON",{class:!0});var hs=r(Ia);Ta=l(hs,"Stop Generation"),hs.forEach(u),R.forEach(u),P.forEach(u),I.forEach(u),Da=i(o),Va=c(o,"HR",{}),Na=i(o),ka=c(o,"SECTION",{class:!0});var ds=r(ka);Ca=c(ds,"DIV",{class:!0});var ps=r(Ca);xa=c(ps,"DIV",{class:!0}),r(xa).forEach(u),Ba=i(ps),Pa=c(ps,"DIV",{class:!0});var ms=r(Pa);Ra=l(ms,"Attack Container"),ms.forEach(u),ps.forEach(u),ya=i(ds),Ha=c(ds,"DIV",{class:!0});var bs=r(Ha);La=c(bs,"DIV",{class:!0});var gs=r(La);Ua=c(gs,"BUTTON",{class:!0});var Es=r(Ua);$a=l(Es,"Start Subprocess"),Es.forEach(u),ja=i(gs),Ga=c(gs,"BUTTON",{class:!0});var Ss=r(Ga);Aa=l(Ss,"Stop Subprocess"),Ss.forEach(u),gs.forEach(u),qa=i(bs),za=c(bs,"DIV",{class:!0});var _s=r(za);Fa=c(_s,"SELECT",{class:!0,name:!0});var Os=r(Fa);Ma=c(Os,"OPTION",{value:!0,disabled:!0,selected:!0});var Is=r(Ma);Qa=l(Is,"Select Subprocess"),Is.forEach(u),Wa=c(Os,"OPTION",{value:!0});var Ts=r(Wa);Ja=l(Ts,"Option 1"),Ts.forEach(u),Ka=c(Os,"OPTION",{value:!0});var Ds=r(Ka);Xa=l(Ds,"Option 2"),Ds.forEach(u),Ya=c(Os,"OPTION",{value:!0});var Vs=r(Ya);Za=l(Vs,"Option 3"),Vs.forEach(u),Os.forEach(u),_s.forEach(u),bs.forEach(u),as=i(ds),ss=c(ds,"DIV",{class:!0});var Ns=r(ss);w(ns.$$.fragment,Ns),Ns.forEach(u),ds.forEach(u),os=i(o),ts=c(o,"HR",{}),es=i(o),cs=c(o,"SECTION",{class:!0});var ks=r(cs);rs=c(ks,"DIV",{class:!0});var Cs=r(rs);ls=c(Cs,"DIV",{class:!0}),r(ls).forEach(u),is=i(Cs),us=c(Cs,"DIV",{class:!0});var xs=r(us);fs=l(xs,"Receiver Container"),xs.forEach(u),Cs.forEach(u),ks.forEach(u),this.h()},h(){document.title="Simulation",m(N,"class","w3-text-yellow"),b(N,"text-shadow","1px 1px 0 #444"),m(V,"class","w3-panel w3-blue"),m(M,"class","w3-col w3-input w3-border w3-margin"),m(F,"class","w3-half"),m(K,"class","w3-col w3-input w3-border w3-margin"),m(J,"class","w3-half"),m(z,"class","w3-row w3-section"),m(sa,"class","page-headline"),m(ea,"class","w3-col w3-input w3-border w3-button"),m(da,"class","container__status svelte-nb88nh"),m(wa,"class","container__content svelte-nb88nh"),m(ha,"class","container w3-margin svelte-nb88nh"),m(Sa,"class","w3-button w3-teal"),m(Ia,"class","w3-button w3-red"),m(Ea,"class","w3-bar"),m(ga,"class","w3-container w3-margin"),m(va,"class","w3-container"),m(xa,"class","container__status svelte-nb88nh"),m(Pa,"class","container__content svelte-nb88nh"),m(Ca,"class","container w3-margin svelte-nb88nh"),m(Ua,"class","w3-button w3-teal"),m(Ga,"class","w3-button w3-red"),m(La,"class","w3-half"),Ma.__value="",Ma.value=Ma.__value,Ma.disabled=!0,Ma.selected=!0,Wa.__value="1",Wa.value=Wa.__value,Ka.__value="2",Ka.value=Ka.__value,Ya.__value="3",Ya.value=Ya.__value,m(Fa,"class","w3-select w3-border"),m(Fa,"name","option"),m(za,"class","w3-half"),m(Ha,"class","w3-row-padding w3-margin"),m(ss,"class","w3-container"),m(ka,"class","w3-container"),m(ls,"class","container__status svelte-nb88nh"),m(us,"class","container__content svelte-nb88nh"),m(rs,"class","container svelte-nb88nh"),m(cs,"class","w3-container")},m(o,t){f(o,s,t),f(o,n,t),f(o,D,t),f(o,V,t),v(V,N),v(N,C),v(C,x),f(o,B,t),f(o,y,t),f(o,H,t),f(o,L,t),v(L,U),v(L,$),v(L,j),v(L,G),v(L,A),f(o,q,t),f(o,z,t),v(z,F),v(F,M),v(M,Q),v(z,W),v(z,J),v(J,K),v(K,X),f(o,Y,t),f(o,Z,t),f(o,aa,t),f(o,sa,t),v(sa,na),v(na,oa),f(o,ta,t),f(o,ea,t),v(ea,ca),f(o,ra,t),f(o,la,t);for(let a=0;a<ws.length;a+=1)ws[a].m(la,null);f(o,ia,t),f(o,ua,t),f(o,fa,t),f(o,va,t),v(va,ha),v(ha,da),v(ha,pa),v(ha,wa),v(wa,ma),v(va,ba),v(va,ga),v(ga,Ea),v(Ea,Sa),v(Sa,_a),v(Ea,Oa),v(Ea,Ia),v(Ia,Ta),f(o,Da,t),f(o,Va,t),f(o,Na,t),f(o,ka,t),v(ka,Ca),v(Ca,xa),v(Ca,Ba),v(Ca,Pa),v(Pa,Ra),v(ka,ya),v(ka,Ha),v(Ha,La),v(La,Ua),v(Ua,$a),v(La,ja),v(La,Ga),v(Ga,Aa),v(Ha,qa),v(Ha,za),v(za,Fa),v(Fa,Ma),v(Ma,Qa),v(Fa,Wa),v(Wa,Ja),v(Fa,Ka),v(Ka,Xa),v(Fa,Ya),v(Ya,Za),v(ka,as),v(ka,ss),g(ns,ss,null),f(o,os,t),f(o,ts,t),f(o,es,t),f(o,cs,t),v(cs,rs),v(rs,ls),v(rs,is),v(rs,us),v(us,fs),vs=!0,hs||(ds=[E(M,"click",a[7]),E(K,"click",a[8]),E(ea,"click",a[4]),E(Sa,"click",a[5]),E(Ia,"click",a[6])],hs=!0)},p(a,[s]){if((!vs||1&s)&&h($,a[0]),(!vs||2&s)&&h(G,a[1]),12&s){let n;for(ps=a[2],n=0;n<ps.length;n+=1){const o=P(a,ps,n);ws[n]?ws[n].p(o,s):(ws[n]=R(o),ws[n].c(),ws[n].m(la,null))}for(;n<ws.length;n+=1)ws[n].d(1);ws.length=ps.length}},i(a){vs||(S(ns.$$.fragment,a),vs=!0)},o(a){_(ns.$$.fragment,a),vs=!1},d(a){a&&u(s),a&&u(n),a&&u(D),a&&u(V),a&&u(B),a&&u(y),a&&u(H),a&&u(L),a&&u(q),a&&u(z),a&&u(Y),a&&u(Z),a&&u(aa),a&&u(sa),a&&u(ta),a&&u(ea),a&&u(ra),a&&u(la),O(ws,a),a&&u(ia),a&&u(ua),a&&u(fa),a&&u(va),a&&u(Da),a&&u(Va),a&&u(Na),a&&u(ka),I(ns),a&&u(os),a&&u(ts),a&&u(es),a&&u(cs),hs=!1,T(ds)}}}function H(a,s,n){let o=[],t={};const e=x.subscribe((a=>{o=a})),c=B.subscribe((a=>{t=a}));D((()=>{e(),c()}));let r="Please create and select a scenario before starting the simulation.",l=0,i=[],u=[],f=[],v=["event1","event2","event3"],h=[];return V((async()=>{for(let s=0;s<o.length;s++)o[s].activated&&n(0,r=o[s].name);"configurations"in t&&n(1,l=t.configurations.length),console.log("scenarios",o),console.log("scenario_configurations",t),i=[];for(var a=0;a<l;a++){let s=new WebSocket("ws://localhost:8000/simulation/ws");s.onopen=function(){let n=t.configurations[a].container_info.name,o=t.configurations[a].container_info.ports.split(",")[0].split("/")[0];console.log("sending to controller websocket: index",a,"name",n,"port",o),s.send({client_index:a,container_name:n,container_port:o}),window.console.log("Successfully connected to the echo websocket server...")},s.onmessage=function(a){window.console.log(a,"received ws message");let s=a.data.index;"status"in a.data&&(u[s]=a.data.status),"data"in a.data&&(f[s]=a.data),console.log(f)},i.push(s)}})),[r,l,v,h,function(){n(2,v=["event1","event2","event3"])},async function(){C("/start-generator","POST",null,(function(a){a.data&&console.log("response",a.data)}))},async function(){C("/stop-generator","POST",null,(function(a){a.data&&console.log("response",a.data)}))},async function(){console.log("startSimulation"),C("/simulation","POST",{command:"start",configs:t},(function(a){a.data&&console.log("response of start simulation",a.data)}))},async function(){console.log("stopSimulation"),C("/simulation","POST",{command:"stop",configs:t},(function(a){a.data&&console.log("response of stop simulation",a.data)}))},function(a,s){N[a?"unshift":"push"]((()=>{h[s]=a,n(3,h)}))}]}export default class extends a{constructor(a){super(),s(this,a,H,y,n,{})}}

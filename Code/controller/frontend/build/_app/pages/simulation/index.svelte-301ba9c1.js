import{S as t,i as s,s as a,e,t as n,k as o,c as l,a as c,g as r,d as i,n as h,b as f,f as u,F as d,G as m,h as v,v as p,l as g,j as w,m as S,o as E,a6 as b,r as T,w as k,u as N,M as D,Q as x,N as O,H as y,L as I,R as V,z as $,B as H,a4 as B,a5 as R}from"../../chunks/vendor-c052606d.js";import{T as j}from"../../chunks/index-e04611e2.js";import{T as C,x as U,n as F,a as _}from"../../chunks/requests-531e903b.js";import{s as A,a as L,b as J}from"../../chunks/store-ce76cd4a.js";/* empty css                                                       */function P(t,s,a){const e=t.slice();return e[27]=s[a],e[29]=a,e}function W(t,s,a){const e=t.slice();return e[30]=s[a],e[31]=s,e[32]=a,e}function G(t){let s,a,g,w,S,E,b,k,D,O,y,I,V,$,B,R,j,C,U,F,_,A,L,J,P,W,G,z,M,Q,K,X,Y,Z,tt,st,at="configurations"in t[0]&&q(t);return{c(){s=e("h4"),a=n("Scenario: "),g=n(t[2]),w=n(" Number of Containers: "),S=n(t[3]),E=n("."),b=o(),k=e("div"),D=e("div"),O=e("button"),y=n("Start Simulation"),I=o(),V=e("div"),$=e("button"),B=n("Stop Simulation"),R=o(),j=e("div"),C=e("button"),U=n("Reset WS Connection"),F=o(),_=e("hr"),A=o(),L=e("section"),J=e("h3"),P=n("Application Logs"),W=o(),G=e("button"),z=n("Clear Logs"),M=o(),at&&at.c(),Q=o(),K=e("br"),X=o(),Y=e("hr"),this.h()},l(e){s=l(e,"H4",{});var n=c(s);a=r(n,"Scenario: "),g=r(n,t[2]),w=r(n," Number of Containers: "),S=r(n,t[3]),E=r(n,"."),n.forEach(i),b=h(e),k=l(e,"DIV",{class:!0});var o=c(k);D=l(o,"DIV",{class:!0});var f=c(D);O=l(f,"BUTTON",{class:!0});var u=c(O);y=r(u,"Start Simulation"),u.forEach(i),f.forEach(i),I=h(o),V=l(o,"DIV",{class:!0});var d=c(V);$=l(d,"BUTTON",{class:!0});var m=c($);B=r(m,"Stop Simulation"),m.forEach(i),d.forEach(i),R=h(o),j=l(o,"DIV",{class:!0});var v=c(j);C=l(v,"BUTTON",{class:!0});var p=c(C);U=r(p,"Reset WS Connection"),p.forEach(i),v.forEach(i),o.forEach(i),F=h(e),_=l(e,"HR",{class:!0}),A=h(e),L=l(e,"SECTION",{class:!0});var T=c(L);J=l(T,"H3",{});var N=c(J);P=r(N,"Application Logs"),N.forEach(i),T.forEach(i),W=h(e),G=l(e,"BUTTON",{class:!0});var x=c(G);z=r(x,"Clear Logs"),x.forEach(i),M=h(e),at&&at.l(e),Q=h(e),K=l(e,"BR",{}),X=h(e),Y=l(e,"HR",{class:!0}),this.h()},h(){f(O,"class","w3-col w3-input w3-border"),f(D,"class","w3-third"),f($,"class","w3-col w3-input w3-border"),f(V,"class","w3-third"),f(C,"class","w3-col w3-input w3-border"),f(j,"class","w3-third"),f(k,"class","w3-row w3-section"),f(_,"class","svelte-drd2kv"),f(L,"class","page-headline"),f(G,"class","w3-col w3-input w3-border w3-button"),f(Y,"class","svelte-drd2kv")},m(e,n){u(e,s,n),d(s,a),d(s,g),d(s,w),d(s,S),d(s,E),u(e,b,n),u(e,k,n),d(k,D),d(D,O),d(O,y),d(k,I),d(k,V),d(V,$),d($,B),d(k,R),d(k,j),d(j,C),d(C,U),u(e,F,n),u(e,_,n),u(e,A,n),u(e,L,n),d(L,J),d(J,P),u(e,W,n),u(e,G,n),d(G,z),u(e,M,n),at&&at.m(e,n),u(e,Q,n),u(e,K,n),u(e,X,n),u(e,Y,n),Z=!0,tt||(st=[m(O,"click",t[11]),m($,"click",t[12]),m(C,"click",t[13]),m(G,"click",t[6])],tt=!0)},p(t,s){(!Z||4&s[0])&&v(g,t[2]),(!Z||8&s[0])&&v(S,t[3]),"configurations"in t[0]?at?(at.p(t,s),1&s[0]&&p(at,1)):(at=q(t),at.c(),p(at,1),at.m(Q.parentNode,Q)):at&&(H(),T(at,1,1,(()=>{at=null})),N())},i(t){Z||(p(at),Z=!0)},o(t){T(at),Z=!1},d(t){t&&i(s),t&&i(b),t&&i(k),t&&i(F),t&&i(_),t&&i(A),t&&i(L),t&&i(W),t&&i(G),t&&i(M),at&&at.d(t),t&&i(Q),t&&i(K),t&&i(X),t&&i(Y),tt=!1,x(st)}}}function q(t){let s,a,e=t[0].configurations.length>0&&z(t);return{c(){e&&e.c(),s=g()},l(t){e&&e.l(t),s=g()},m(t,n){e&&e.m(t,n),u(t,s,n),a=!0},p(t,a){t[0].configurations.length>0?e?(e.p(t,a),1&a[0]&&p(e,1)):(e=z(t),e.c(),p(e,1),e.m(s.parentNode,s)):e&&(H(),T(e,1,1,(()=>{e=null})),N())},i(t){a||(p(e),a=!0)},o(t){T(e),a=!1},d(t){e&&e.d(t),t&&i(s)}}}function z(t){let s,a,e=t[0].configurations,n=[];for(let l=0;l<e.length;l+=1)n[l]=X(W(t,e,l));const o=t=>T(n[t],1,1,(()=>{n[t]=null}));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();s=g()},l(t){for(let s=0;s<n.length;s+=1)n[s].l(t);s=g()},m(t,e){for(let s=0;s<n.length;s+=1)n[s].m(t,e);u(t,s,e),a=!0},p(t,a){if(17&a[0]){let l;for(e=t[0].configurations,l=0;l<e.length;l+=1){const o=W(t,e,l);n[l]?(n[l].p(o,a),p(n[l],1)):(n[l]=X(o),n[l].c(),p(n[l],1),n[l].m(s.parentNode,s))}for(H(),l=e.length;l<n.length;l+=1)o(l);N()}},i(t){if(!a){for(let t=0;t<e.length;t+=1)p(n[t]);a=!0}},o(t){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)T(n[s]);a=!1},d(t){D(n,t),t&&i(s)}}}function M(t){let s,a,e=t[32].toString()in t[4],n=e&&Q(t);return{c(){n&&n.c(),s=g()},l(t){n&&n.l(t),s=g()},m(t,e){n&&n.m(t,e),u(t,s,e),a=!0},p(t,a){16&a[0]&&(e=t[32].toString()in t[4]),e?n?(n.p(t,a),16&a[0]&&p(n,1)):(n=Q(t),n.c(),p(n,1),n.m(s.parentNode,s)):n&&(H(),T(n,1,1,(()=>{n=null})),N())},i(t){a||(p(n),a=!0)},o(t){T(n),a=!1},d(t){n&&n.d(t),t&&i(s)}}}function Q(t){let s,a,e=t[4][t[32].toString()].length>0,n=e&&K(t);return{c(){n&&n.c(),s=g()},l(t){n&&n.l(t),s=g()},m(t,e){n&&n.m(t,e),u(t,s,e),a=!0},p(t,a){16&a[0]&&(e=t[4][t[32].toString()].length>0),e?n?(n.p(t,a),16&a[0]&&p(n,1)):(n=K(t),n.c(),p(n,1),n.m(s.parentNode,s)):n&&(H(),T(n,1,1,(()=>{n=null})),N())},i(t){a||(p(n),a=!0)},o(t){T(n),a=!1},d(t){n&&n.d(t),t&&i(s)}}}function K(t){let s,a,f,m,g,N,D=t[30].container_info.name+"";function x(s){t[14](s,t[32])}let O={title:t[30].container_info.name,headers:Object.keys(t[4][t[32].toString()][0])};return void 0!==t[4][t[32].toString()]&&(O.data=t[4][t[32].toString()]),m=new j({props:O}),B.push((()=>R(m,"data",x))),{c(){s=e("h5"),a=n(D),f=o(),w(m.$$.fragment)},l(t){s=l(t,"H5",{});var e=c(s);a=r(e,D),e.forEach(i),f=h(t),S(m.$$.fragment,t)},m(t,e){u(t,s,e),d(s,a),u(t,f,e),E(m,t,e),N=!0},p(s,e){t=s,(!N||1&e[0])&&D!==(D=t[30].container_info.name+"")&&v(a,D);const n={};1&e[0]&&(n.title=t[30].container_info.name),16&e[0]&&(n.headers=Object.keys(t[4][t[32].toString()][0])),!g&&16&e[0]&&(g=!0,n.data=t[4][t[32].toString()],b((()=>g=!1))),m.$set(n)},i(t){N||(p(m.$$.fragment,t),N=!0)},o(t){T(m.$$.fragment,t),N=!1},d(t){t&&i(s),t&&i(f),k(m,t)}}}function X(t){let s,a,e=Object.keys(t[4]).length>0,n=e&&M(t);return{c(){n&&n.c(),s=g()},l(t){n&&n.l(t),s=g()},m(t,e){n&&n.m(t,e),u(t,s,e),a=!0},p(t,a){16&a[0]&&(e=Object.keys(t[4]).length>0),e?n?(n.p(t,a),16&a[0]&&p(n,1)):(n=M(t),n.c(),p(n,1),n.m(s.parentNode,s)):n&&(H(),T(n,1,1,(()=>{n=null})),N())},i(t){a||(p(n),a=!0)},o(t){T(n),a=!1},d(t){n&&n.d(t),t&&i(s)}}}function Y(t){let s,a,v,p,g,w,S,E,b,T,k,N,y,I,V,$,H,B,R,j,C,U,F,_,A,L,J,W,G,q,z,M,Q,K,X,Y=t[5].length>0&&function(t){let s,a,m,v,p,g,w,S,E,b,T,k=t[5],N=[];for(let e=0;e<k.length;e+=1)N[e]=Z(P(t,k,e));return{c(){s=e("div"),a=e("div"),m=e("table"),v=e("thead"),p=e("tr"),g=e("th"),w=n("Filename"),S=o(),E=e("th"),b=n("Actions"),T=o();for(let t=0;t<N.length;t+=1)N[t].c();this.h()},l(t){s=l(t,"DIV",{class:!0});var e=c(s);a=l(e,"DIV",{class:!0});var n=c(a);m=l(n,"TABLE",{class:!0,style:!0});var o=c(m);v=l(o,"THEAD",{});var f=c(v);p=l(f,"TR",{class:!0});var u=c(p);g=l(u,"TH",{class:!0});var d=c(g);w=r(d,"Filename"),d.forEach(i),S=h(u),E=l(u,"TH",{class:!0});var k=c(E);b=r(k,"Actions"),k.forEach(i),u.forEach(i),f.forEach(i),T=h(o);for(let s=0;s<N.length;s+=1)N[s].l(o);o.forEach(i),n.forEach(i),e.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(E,"class","w3-right-align"),f(p,"class","w3-dark-grey"),f(m,"class","w3-table-all"),O(m,"width","100%"),f(a,"class","w3-responsive"),f(s,"class","w3-container")},m(t,e){u(t,s,e),d(s,a),d(a,m),d(m,v),d(v,p),d(p,g),d(g,w),d(p,S),d(p,E),d(E,b),d(m,T);for(let s=0;s<N.length;s+=1)N[s].m(m,null)},p(t,s){if(32&s[0]){let a;for(k=t[5],a=0;a<k.length;a+=1){const e=P(t,k,a);N[a]?N[a].p(e,s):(N[a]=Z(e),N[a].c(),N[a].m(m,null))}for(;a<N.length;a+=1)N[a].d(1);N.length=k.length}},d(t){t&&i(s),D(N,t)}}}(t);return{c(){s=e("div"),a=e("div"),v=e("button"),p=n("Start Simulation"),g=o(),w=e("hr"),S=o(),E=e("div"),b=e("h1"),T=e("b"),k=n("Edit Files"),N=o(),Y&&Y.c(),y=o(),I=e("hr"),V=o(),$=e("div"),H=e("div"),B=e("input"),R=o(),j=e("div"),C=e("button"),U=n("Store Files"),F=o(),_=e("div"),A=e("button"),L=n("Export Files"),J=o(),W=e("hr"),G=o(),q=e("div"),z=e("h1"),M=e("b"),Q=n("Generated Datasets"),this.h()},l(t){s=l(t,"DIV",{class:!0});var e=c(s);a=l(e,"DIV",{class:!0});var n=c(a);v=l(n,"BUTTON",{class:!0});var o=c(v);p=r(o,"Start Simulation"),o.forEach(i),n.forEach(i),e.forEach(i),g=h(t),w=l(t,"HR",{class:!0}),S=h(t),E=l(t,"DIV",{class:!0});var f=c(E);b=l(f,"H1",{class:!0,style:!0});var u=c(b);T=l(u,"B",{});var d=c(T);k=r(d,"Edit Files"),d.forEach(i),u.forEach(i),f.forEach(i),N=h(t),Y&&Y.l(t),y=h(t),I=l(t,"HR",{class:!0}),V=h(t),$=l(t,"DIV",{class:!0});var m=c($);H=l(m,"DIV",{class:!0});var D=c(H);B=l(D,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),D.forEach(i),R=h(m),j=l(m,"DIV",{class:!0});var x=c(j);C=l(x,"BUTTON",{class:!0});var O=c(C);U=r(O,"Store Files"),O.forEach(i),x.forEach(i),F=h(m),_=l(m,"DIV",{class:!0});var P=c(_);A=l(P,"BUTTON",{class:!0});var K=c(A);L=r(K,"Export Files"),K.forEach(i),P.forEach(i),m.forEach(i),J=h(t),W=l(t,"HR",{class:!0}),G=h(t),q=l(t,"DIV",{class:!0});var X=c(q);z=l(X,"H1",{class:!0,style:!0});var Z=c(z);M=l(Z,"B",{});var tt=c(M);Q=r(tt,"Generated Datasets"),tt.forEach(i),Z.forEach(i),X.forEach(i),this.h()},h(){f(v,"class","w3-col w3-input w3-border"),f(a,"class","w3-rest"),f(s,"class","w3-row w3-section"),f(w,"class","svelte-drd2kv"),f(b,"class","w3-text-yellow"),O(b,"text-shadow","1px 1px 0 #444"),f(E,"class","w3-panel w3-blue"),f(I,"class","svelte-drd2kv"),f(B,"id","filename"),f(B,"class","w3-input w3-border"),f(B,"name","filename"),f(B,"type","text"),f(B,"placeholder","Filename"),f(H,"class","w3-rest"),f(C,"class","w3-col w3-input w3-border"),f(j,"class","w3-half"),f(A,"class","w3-col w3-input w3-border"),f(_,"class","w3-half"),f($,"class","w3-row w3-section"),f(W,"class","svelte-drd2kv"),f(z,"class","w3-text-yellow"),O(z,"text-shadow","1px 1px 0 #444"),f(q,"class","w3-panel w3-blue")},m(e,n){u(e,s,n),d(s,a),d(a,v),d(v,p),u(e,g,n),u(e,w,n),u(e,S,n),u(e,E,n),d(E,b),d(b,T),d(T,k),u(e,N,n),Y&&Y.m(e,n),u(e,y,n),u(e,I,n),u(e,V,n),u(e,$,n),d($,H),d(H,B),d($,R),d($,j),d(j,C),d(C,U),d($,F),d($,_),d(_,A),d(A,L),u(e,J,n),u(e,W,n),u(e,G,n),u(e,q,n),d(q,z),d(z,M),d(M,Q),K||(X=[m(v,"click",t[9]),m(C,"click",nt),m(A,"click",ot)],K=!0)},p(t,s){t[5].length>0&&Y.p(t,s)},d(t){t&&i(s),t&&i(g),t&&i(w),t&&i(S),t&&i(E),t&&i(N),Y&&Y.d(t),t&&i(y),t&&i(I),t&&i(V),t&&i($),t&&i(J),t&&i(W),t&&i(G),t&&i(q),K=!1,x(X)}}}function Z(t){let s,a,v,p,g,w,S,E,b,T,k,N,D,O,I=t[27]+"";return{c(){s=e("tr"),a=e("td"),v=n(I),p=o(),g=e("td"),w=e("div"),S=e("button"),E=n("View"),b=o(),T=e("button"),k=n("Delete"),N=o(),this.h()},l(t){s=l(t,"TR",{});var e=c(s);a=l(e,"TD",{class:!0});var n=c(a);v=r(n,I),n.forEach(i),p=h(e),g=l(e,"TD",{class:!0});var o=c(g);w=l(o,"DIV",{});var f=c(w);S=l(f,"BUTTON",{index:!0});var u=c(S);E=r(u,"View"),u.forEach(i),b=h(f),T=l(f,"BUTTON",{index:!0});var d=c(T);k=r(d,"Delete"),d.forEach(i),f.forEach(i),o.forEach(i),N=h(e),e.forEach(i),this.h()},h(){f(a,"class","w3-left-align"),f(S,"index",t[29]),f(T,"index",t[29]),f(g,"class","w3-right-align")},m(t,e){u(t,s,e),d(s,a),d(a,v),d(s,p),d(s,g),d(g,w),d(w,S),d(S,E),d(w,b),d(w,T),d(T,k),d(s,N),D||(O=[m(S,"click",at),m(T,"click",et)],D=!0)},p:y,d(t){t&&i(s),D=!1,x(O)}}}function tt(t){let s,a,o,h,v,p;return{c(){s=e("div"),a=e("div"),o=e("button"),h=n("Start Simulation"),this.h()},l(t){s=l(t,"DIV",{class:!0});var e=c(s);a=l(e,"DIV",{class:!0});var n=c(a);o=l(n,"BUTTON",{class:!0});var f=c(o);h=r(f,"Start Simulation"),f.forEach(i),n.forEach(i),e.forEach(i),this.h()},h(){f(o,"class","w3-col w3-input w3-border"),f(a,"class","w3-rest"),f(s,"class","w3-row w3-section")},m(e,n){u(e,s,n),d(s,a),d(a,o),d(o,h),v||(p=m(o,"click",t[10]),v=!0)},p:y,d(t){t&&i(s),v=!1,p()}}}function st(t){let s,a,m,v,g,b,D,x,y,V,$,B,R,j,U,F,_;a=new C({});let A="Communication"==t[1]&&G(t),L="Static"==t[1]&&Y(t),J="Driving Simulation"==t[1]&&tt(t);return{c(){s=o(),w(a.$$.fragment),m=o(),v=e("hr"),g=o(),b=e("div"),D=e("h1"),x=e("b"),y=n("Simulation"),V=o(),$=e("hr"),B=o(),A&&A.c(),R=o(),L&&L.c(),j=o(),J&&J.c(),U=o(),F=e("hr"),this.h()},l(t){I('[data-svelte="svelte-1smsifb"]',document.head).forEach(i),s=h(t),S(a.$$.fragment,t),m=h(t),v=l(t,"HR",{class:!0}),g=h(t),b=l(t,"DIV",{class:!0});var e=c(b);D=l(e,"H1",{class:!0,style:!0});var n=c(D);x=l(n,"B",{});var o=c(x);y=r(o,"Simulation"),o.forEach(i),n.forEach(i),e.forEach(i),V=h(t),$=l(t,"HR",{class:!0}),B=h(t),A&&A.l(t),R=h(t),L&&L.l(t),j=h(t),J&&J.l(t),U=h(t),F=l(t,"HR",{class:!0}),this.h()},h(){document.title="Simulation",f(v,"class","svelte-drd2kv"),f(D,"class","w3-text-yellow"),O(D,"text-shadow","1px 1px 0 #444"),f(b,"class","w3-panel w3-blue"),f($,"class","svelte-drd2kv"),f(F,"class","svelte-drd2kv")},m(t,e){u(t,s,e),E(a,t,e),u(t,m,e),u(t,v,e),u(t,g,e),u(t,b,e),d(b,D),d(D,x),d(x,y),u(t,V,e),u(t,$,e),u(t,B,e),A&&A.m(t,e),u(t,R,e),L&&L.m(t,e),u(t,j,e),J&&J.m(t,e),u(t,U,e),u(t,F,e),_=!0},p(t,s){"Communication"==t[1]?A?(A.p(t,s),2&s[0]&&p(A,1)):(A=G(t),A.c(),p(A,1),A.m(R.parentNode,R)):A&&(H(),T(A,1,1,(()=>{A=null})),N()),"Static"==t[1]?L?L.p(t,s):(L=Y(t),L.c(),L.m(j.parentNode,j)):L&&(L.d(1),L=null),"Driving Simulation"==t[1]?J?J.p(t,s):(J=tt(t),J.c(),J.m(U.parentNode,U)):J&&(J.d(1),J=null)},i(t){_||(p(a.$$.fragment,t),p(A),_=!0)},o(t){T(a.$$.fragment,t),T(A),_=!1},d(t){t&&i(s),k(a,t),t&&i(m),t&&i(v),t&&i(g),t&&i(b),t&&i(V),t&&i($),t&&i(B),A&&A.d(t),t&&i(R),L&&L.d(t),t&&i(j),J&&J.d(t),t&&i(U),t&&i(F)}}}function at(){}function et(){}function nt(){}function ot(){}function lt(t,s,a){let e=[],n={},o="";const l=A.subscribe((t=>{e=t})),c=L.subscribe((t=>{a(0,n=t)})),r=J.subscribe((t=>{a(1,o=t)}));let i,h=[];V((()=>{l(),c(),r();for(let t=0;t<h.length;t++)h[t].close();i.close()}));let f="Please create and select a scenario before starting the simulation.",u=!1,d=0,m=[],v={};function p(){for(const[t,s]of Object.entries(v))a(4,v[t]=[],v)}async function g(t){if(!u)return void F.danger("please create and activate a scenario first.");"start"==t&&p(),_("/simulation/comm","POST",{command:t,configs:n},(function(t){t.data&&(F.success("simulation started."),console.log("response of simulation",t.data))}))}function w(){for(var t=0;t<h.length;t++)ws=h[t],ws.close()}$((async()=>{let t="";for(let s=0;s<e.length;s++)e[s].activated&&(a(2,f=e[s].name),u=!0,t="/api/db1/scenario_configurations/ref-"+e[s]._id);!function(t,s){U(t,(function(t){let a=JSON.parse(t.response);a.data&&a.data.length>0&&(L.set(a.data[0]),s())}))}(t,(function(){if("Communication"==n.type){"configurations"in n&&a(3,d=n.configurations.length);for(var t=0;t<d;t++){a(4,v[t.toString()]=[],v);let s="ws://localhost:8000/simulation/comm/ws/"+t.toString(),e=new WebSocket(s);e.onopen=function(){window.console.log("Successfully connected to the echo websocket server...")},e.onmessage=function(t){let s=JSON.parse(t.data);console.log(s,"printing JSON now");let e=s.client_index,n=JSON.parse(s.data);"status"in n?m[e]=n.status:a(4,v[e]=[...v[e],n],v)},h.push(e)}}if("Static"==n.type){console.log("hello static sample");let t=new WebSocket("ws://localhost:8000/simulation/static/ws");t.onopen=function(){window.console.log("static simulation websocket")},t.onmessage=function(t){let s=JSON.parse(t.data);console.log("static simulation websocket:",s)}}"Communication"==n.type&&console.log("hello driving scenario")}))}));return[n,o,f,d,v,[],p,g,w,function(){_("/simulation/static","POST",{configs:n},(function(t){t.data&&(F.success("simulation started."),console.log("response of simulation",t.data))}))},function(){_("/simulation/static","POST",{configs:n},(function(t){t.data&&(F.success("simulation started."),console.log("response of simulation",t.data))}))},()=>g("start"),()=>g("stop"),()=>w(),function(s,e){t.$$.not_equal(v[e.toString()],s)&&(v[e.toString()]=s,a(4,v))}]}export default class extends t{constructor(t){super(),s(this,t,lt,st,a,{},[-1,-1])}}

import{S as e,i as a,s as l,e as t,t as s,k as o,c as n,a as c,g as r,d as i,n as h,b as d,N as f,f as p,F as u,G as v,h as w,M as g,j as E,L as m,m as b,o as T,v as x,r as y,w as D,Q as C,z as k,T as V}from"../../chunks/vendor-c052606d.js";import{T as F,x as R,n as H}from"../../chunks/requests-213c1aee.js";/* empty css                                                       */const{document:I}=V;function S(e,a,l){const t=e.slice();return t[3]=a[l],t[5]=l,t}function B(e,a,l){const t=e.slice();return t[6]=a[l],t[5]=l,t}function L(e){let a,l,v,w,E,m,b,T,x=e[1],y=[];for(let t=0;t<x.length;t+=1)y[t]=N(B(e,x,t));return{c(){a=t("div"),l=t("div"),v=t("table"),w=t("thead"),E=t("tr"),m=t("th"),b=s("File Path"),T=o();for(let e=0;e<y.length;e+=1)y[e].c();this.h()},l(e){a=n(e,"DIV",{class:!0});var t=c(a);l=n(t,"DIV",{class:!0});var s=c(l);v=n(s,"TABLE",{class:!0,style:!0});var o=c(v);w=n(o,"THEAD",{});var d=c(w);E=n(d,"TR",{class:!0});var f=c(E);m=n(f,"TH",{});var p=c(m);b=r(p,"File Path"),p.forEach(i),f.forEach(i),d.forEach(i),T=h(o);for(let a=0;a<y.length;a+=1)y[a].l(o);o.forEach(i),s.forEach(i),t.forEach(i),this.h()},h(){d(E,"class","w3-dark-grey"),d(v,"class","w3-table-all"),f(v,"width","100%"),d(l,"class","w3-responsive"),d(a,"class","w3-container")},m(e,t){p(e,a,t),u(a,l),u(l,v),u(v,w),u(w,E),u(E,m),u(m,b),u(v,T);for(let a=0;a<y.length;a+=1)y[a].m(v,null)},p(e,a){if(6&a){let l;for(x=e[1],l=0;l<x.length;l+=1){const t=B(e,x,l);y[l]?y[l].p(t,a):(y[l]=N(t),y[l].c(),y[l].m(v,null))}for(;l<y.length;l+=1)y[l].d(1);y.length=x.length}},d(e){e&&i(a),g(y,e)}}}function N(e){let a,l,f,g,E,m,b=e[6]+"";return{c(){a=t("tr"),l=t("td"),f=s(b),g=o(),this.h()},l(e){a=n(e,"TR",{index:!0});var t=c(a);l=n(t,"TD",{});var s=c(l);f=r(s,b),s.forEach(i),g=h(t),t.forEach(i),this.h()},h(){d(a,"index",e[5])},m(t,s){p(t,a,s),u(a,l),u(l,f),u(a,g),E||(m=v(a,"click",e[2]),E=!0)},p(e,a){2&a&&b!==(b=e[6]+"")&&w(f,b)},d(e){e&&i(a),E=!1,m()}}}function U(e){let a,l,v,w,E,m,b,T,x,y,D,C=e[0],k=[];for(let t=0;t<C.length;t+=1)k[t]=O(S(e,C,t));return{c(){a=t("div"),l=t("div"),v=t("table"),w=t("thead"),E=t("tr"),m=t("th"),b=s("Filename"),T=o(),x=t("th"),y=s("Action"),D=o();for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){a=n(e,"DIV",{class:!0});var t=c(a);l=n(t,"DIV",{class:!0});var s=c(l);v=n(s,"TABLE",{class:!0,style:!0});var o=c(v);w=n(o,"THEAD",{});var d=c(w);E=n(d,"TR",{class:!0});var f=c(E);m=n(f,"TH",{});var p=c(m);b=r(p,"Filename"),p.forEach(i),T=h(f),x=n(f,"TH",{});var u=c(x);y=r(u,"Action"),u.forEach(i),f.forEach(i),d.forEach(i),D=h(o);for(let a=0;a<k.length;a+=1)k[a].l(o);o.forEach(i),s.forEach(i),t.forEach(i),this.h()},h(){d(E,"class","w3-dark-grey"),d(v,"class","w3-table-all"),f(v,"width","100%"),d(l,"class","w3-responsive"),d(a,"class","w3-container")},m(e,t){p(e,a,t),u(a,l),u(l,v),u(v,w),u(w,E),u(E,m),u(m,b),u(E,T),u(E,x),u(x,y),u(v,D);for(let a=0;a<k.length;a+=1)k[a].m(v,null)},p(e,a){if(1&a){let l;for(C=e[0],l=0;l<C.length;l+=1){const t=S(e,C,l);k[l]?k[l].p(t,a):(k[l]=O(t),k[l].c(),k[l].m(v,null))}for(;l<k.length;l+=1)k[l].d(1);k.length=C.length}},d(e){e&&i(a),g(k,e)}}}function O(e){let a,l,f,g,E,m,b,T,x,y,D=e[3]+"";return{c(){a=t("tr"),l=t("td"),f=s(D),g=o(),E=t("td"),m=t("button"),b=s("Download"),T=o(),this.h()},l(e){a=n(e,"TR",{});var t=c(a);l=n(t,"TD",{});var s=c(l);f=r(s,D),s.forEach(i),g=h(t),E=n(t,"TD",{});var o=c(E);m=n(o,"BUTTON",{index:!0});var d=c(m);b=r(d,"Download"),d.forEach(i),o.forEach(i),T=h(t),t.forEach(i),this.h()},h(){d(m,"index",e[5])},m(e,t){p(e,a,t),u(a,l),u(l,f),u(a,g),u(a,E),u(E,m),u(m,b),u(a,T),x||(y=v(m,"click",G),x=!0)},p(e,a){1&a&&D!==(D=e[3]+"")&&w(f,D)},d(e){e&&i(a),x=!1,y()}}}function $(e){let a,l,w,g,k,V,R,H,S,B,N,O,$,P,q,J,_,z,M,Q,K,W,X,Y,Z,ee,ae,le,te,se,oe,ne,ce,re,ie,he,de;l=new F({});let fe=e[1].length>0&&L(e),pe=e[0].length>0&&U(e);return{c(){a=o(),E(l.$$.fragment),w=o(),g=t("div"),k=t("h1"),V=t("b"),R=s("Capfiles"),H=o(),fe&&fe.c(),S=o(),B=t("button"),N=s("Download Capture File"),O=o(),$=t("hr"),P=o(),q=t("div"),J=t("h1"),_=t("b"),z=s("Edit Capfile Content"),M=s("\n\non click on capfiles, show another table of capfile content\n\n\n"),Q=t("button"),K=s("Convert to CSV"),W=o(),X=t("hr"),Y=o(),Z=t("div"),ee=t("h1"),ae=t("b"),le=s("CSV Files (stored in GridFS)"),te=o(),pe&&pe.c(),se=o(),oe=t("button"),ne=s("Download CSV"),ce=o(),re=t("hr"),this.h()},l(e){m('[data-svelte="svelte-qmgm2y"]',I.head).forEach(i),a=h(e),b(l.$$.fragment,e),w=h(e),g=n(e,"DIV",{class:!0});var t=c(g);k=n(t,"H1",{class:!0,style:!0});var s=c(k);V=n(s,"B",{});var o=c(V);R=r(o,"Capfiles"),o.forEach(i),s.forEach(i),t.forEach(i),H=h(e),fe&&fe.l(e),S=h(e),B=n(e,"BUTTON",{class:!0});var d=c(B);N=r(d,"Download Capture File"),d.forEach(i),O=h(e),$=n(e,"HR",{class:!0}),P=h(e),q=n(e,"DIV",{class:!0});var f=c(q);J=n(f,"H1",{class:!0,style:!0});var p=c(J);_=n(p,"B",{});var u=c(_);z=r(u,"Edit Capfile Content"),u.forEach(i),p.forEach(i),f.forEach(i),M=r(e,"\n\non click on capfiles, show another table of capfile content\n\n\n"),Q=n(e,"BUTTON",{class:!0});var v=c(Q);K=r(v,"Convert to CSV"),v.forEach(i),W=h(e),X=n(e,"HR",{class:!0}),Y=h(e),Z=n(e,"DIV",{class:!0});var E=c(Z);ee=n(E,"H1",{class:!0,style:!0});var T=c(ee);ae=n(T,"B",{});var x=c(ae);le=r(x,"CSV Files (stored in GridFS)"),x.forEach(i),T.forEach(i),E.forEach(i),te=h(e),pe&&pe.l(e),se=h(e),oe=n(e,"BUTTON",{class:!0});var y=c(oe);ne=r(y,"Download CSV"),y.forEach(i),ce=h(e),re=n(e,"HR",{class:!0}),this.h()},h(){I.title="Database",d(k,"class","w3-text-yellow"),f(k,"text-shadow","1px 1px 0 #444"),d(g,"class","w3-panel w3-blue"),d(B,"class","w3-col w3-input w3-border"),d($,"class","svelte-lxonyp"),d(J,"class","w3-text-yellow"),f(J,"text-shadow","1px 1px 0 #444"),d(q,"class","w3-panel w3-blue"),d(Q,"class","w3-col w3-input w3-border"),d(X,"class","svelte-lxonyp"),d(ee,"class","w3-text-yellow"),f(ee,"text-shadow","1px 1px 0 #444"),d(Z,"class","w3-panel w3-blue"),d(oe,"class","w3-col w3-input w3-border"),d(re,"class","svelte-lxonyp")},m(e,t){p(e,a,t),T(l,e,t),p(e,w,t),p(e,g,t),u(g,k),u(k,V),u(V,R),p(e,H,t),fe&&fe.m(e,t),p(e,S,t),p(e,B,t),u(B,N),p(e,O,t),p(e,$,t),p(e,P,t),p(e,q,t),u(q,J),u(J,_),u(_,z),p(e,M,t),p(e,Q,t),u(Q,K),p(e,W,t),p(e,X,t),p(e,Y,t),p(e,Z,t),u(Z,ee),u(ee,ae),u(ae,le),p(e,te,t),pe&&pe.m(e,t),p(e,se,t),p(e,oe,t),u(oe,ne),p(e,ce,t),p(e,re,t),ie=!0,he||(de=[v(B,"click",j),v(Q,"click",A),v(oe,"click",G)],he=!0)},p(e,[a]){e[1].length>0?fe?fe.p(e,a):(fe=L(e),fe.c(),fe.m(S.parentNode,S)):fe&&(fe.d(1),fe=null),e[0].length>0?pe?pe.p(e,a):(pe=U(e),pe.c(),pe.m(se.parentNode,se)):pe&&(pe.d(1),pe=null)},i(e){ie||(x(l.$$.fragment,e),ie=!0)},o(e){y(l.$$.fragment,e),ie=!1},d(e){e&&i(a),D(l,e),e&&i(w),e&&i(g),e&&i(H),fe&&fe.d(e),e&&i(S),e&&i(B),e&&i(O),e&&i($),e&&i(P),e&&i(q),e&&i(M),e&&i(Q),e&&i(W),e&&i(X),e&&i(Y),e&&i(Z),e&&i(te),pe&&pe.d(e),e&&i(se),e&&i(oe),e&&i(ce),e&&i(re),he=!1,C(de)}}}function j(){}function A(){}function G(){}function P(e,a,l){let t=[],s=[];return k((async()=>{R("/allgridfs",(function(e){let a=JSON.parse(e.response);a.data&&(H.success("Found data."),l(0,t=a.data),console.log(t))})),R("/capfile/all",(function(e){let a=JSON.parse(e.response);a.data&&(H.success("Found data."),l(1,s=a.data),console.log(s))}))})),[t,s,function(){let e=document.getElementById("downloadLogfile").value,a=!1;console.log("download logfile",logfiles);for(let s=0;s<logfiles.length;s++)parseInt(e)==parseInt(logfiles[s]._id)&&(a=!0);if(!a)return void H.danger("Please specify an LogID.");let l="/download/db2/logfiles/"+e;var t=performance.now();R(l,(function(e){!function(e,a){let l=document.createElement("a");document.body.appendChild(l),l.style="display: none";let t=window.URL.createObjectURL(e);l.href=t,l.download=a,l.click(),window.URL.revokeObjectURL(t)}(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]));var a=performance.now();console.log("CSV Logfile download took "+(a-t)+" milliseconds.")}))}]}export default class extends e{constructor(e){super(),a(this,e,P,$,l,{})}}

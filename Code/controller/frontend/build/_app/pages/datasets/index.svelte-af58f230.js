import{S as e,i as a,s as l,e as s,t,k as n,c as o,a as c,g as r,d as i,n as h,b as f,N as d,f as p,F as u,G as w,h as v,M as g,H as m,j as E,L as b,m as x,o as y,v as C,r as T,w as D,Q as k,z as V,T as F}from"../../chunks/vendor-c052606d.js";import{T as R,x as H,n as I}from"../../chunks/requests-213c1aee.js";/* empty css                                                       */const{document:S}=F;function B(e,a,l){const s=e.slice();return s[3]=a[l],s[5]=l,s}function L(e,a,l){const s=e.slice();return s[6]=a[l],s[5]=l,s}function U(e){let a,l,w,v,m,E,b,x,y=e[0],C=[];for(let s=0;s<y.length;s+=1)C[s]=$(L(e,y,s));return{c(){a=s("div"),l=s("div"),w=s("table"),v=s("thead"),m=s("tr"),E=s("th"),b=t("File Path"),x=n();for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){a=o(e,"DIV",{class:!0});var s=c(a);l=o(s,"DIV",{class:!0});var t=c(l);w=o(t,"TABLE",{class:!0,style:!0});var n=c(w);v=o(n,"THEAD",{});var f=c(v);m=o(f,"TR",{class:!0});var d=c(m);E=o(d,"TH",{});var p=c(E);b=r(p,"File Path"),p.forEach(i),d.forEach(i),f.forEach(i),x=h(n);for(let a=0;a<C.length;a+=1)C[a].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){f(m,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(l,"class","w3-responsive"),f(a,"class","w3-container")},m(e,s){p(e,a,s),u(a,l),u(l,w),u(w,v),u(v,m),u(m,E),u(E,b),u(w,x);for(let a=0;a<C.length;a+=1)C[a].m(w,null)},p(e,a){if(3&a){let l;for(y=e[0],l=0;l<y.length;l+=1){const s=L(e,y,l);C[l]?C[l].p(s,a):(C[l]=$(s),C[l].c(),C[l].m(w,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=y.length}},d(e){e&&i(a),g(C,e)}}}function $(e){let a,l,d,g,m,E,b=e[6]+"";return{c(){a=s("tr"),l=s("td"),d=t(b),g=n(),this.h()},l(e){a=o(e,"TR",{index:!0});var s=c(a);l=o(s,"TD",{});var t=c(l);d=r(t,b),t.forEach(i),g=h(s),s.forEach(i),this.h()},h(){f(a,"index",e[5])},m(s,t){p(s,a,t),u(a,l),u(l,d),u(a,g),m||(E=w(a,"click",e[1]),m=!0)},p(e,a){1&a&&b!==(b=e[6]+"")&&v(d,b)},d(e){e&&i(a),m=!1,E()}}}function N(e){let a,l,d,v,g,E,b=e[3]+"";return{c(){a=s("tr"),l=s("td"),d=t(b),v=n(),this.h()},l(e){a=o(e,"TR",{index:!0});var s=c(a);l=o(s,"TD",{});var t=c(l);d=r(t,b),t.forEach(i),v=h(s),s.forEach(i),this.h()},h(){f(a,"index",e[5])},m(e,s){p(e,a,s),u(a,l),u(l,d),u(a,v),g||(E=w(a,"click",G),g=!0)},p:m,d(e){e&&i(a),g=!1,E()}}}function O(e){let a,l,v,m,V,F,H,I,L,$,O,P,q,J,_,z,M,Q,K,W,X,Y,Z,ee,ae,le,se,te,ne,oe,ce,re,ie,he,fe,de,pe;l=new R({});let ue=e[0].length>0&&U(e),we=allgridfs.length>0&&function(e){let a,l,w,v,m,E,b,x,y=allgridfs,C=[];for(let s=0;s<y.length;s+=1)C[s]=N(B(e,y,s));return{c(){a=s("div"),l=s("div"),w=s("table"),v=s("thead"),m=s("tr"),E=s("th"),b=t("Filename"),x=n();for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){a=o(e,"DIV",{class:!0});var s=c(a);l=o(s,"DIV",{class:!0});var t=c(l);w=o(t,"TABLE",{class:!0,style:!0});var n=c(w);v=o(n,"THEAD",{});var f=c(v);m=o(f,"TR",{class:!0});var d=c(m);E=o(d,"TH",{});var p=c(E);b=r(p,"Filename"),p.forEach(i),d.forEach(i),f.forEach(i),x=h(n);for(let a=0;a<C.length;a+=1)C[a].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){f(m,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(l,"class","w3-responsive"),f(a,"class","w3-container")},m(e,s){p(e,a,s),u(a,l),u(l,w),u(w,v),u(v,m),u(m,E),u(E,b),u(w,x);for(let a=0;a<C.length;a+=1)C[a].m(w,null)},p(e,a){if(0&a){let l;for(y=allgridfs,l=0;l<y.length;l+=1){const s=B(e,y,l);C[l]?C[l].p(s,a):(C[l]=N(s),C[l].c(),C[l].m(w,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=y.length}},d(e){e&&i(a),g(C,e)}}}(e);return{c(){a=n(),E(l.$$.fragment),v=n(),m=s("div"),V=s("h1"),F=s("b"),H=t("Capfiles"),I=n(),ue&&ue.c(),L=n(),$=s("button"),O=t("Download Capture File"),P=n(),q=s("hr"),J=n(),_=s("div"),z=s("h1"),M=s("b"),Q=t("Edit Capfile Content"),K=t("\n\non click on capfiles, show another table of capfile content\n\n\n"),W=s("button"),X=t("Convert to CSV"),Y=n(),Z=s("hr"),ee=n(),ae=s("div"),le=s("h1"),se=s("b"),te=t("CSV Files (stored in GridFS)"),ne=n(),we&&we.c(),oe=n(),ce=s("button"),re=t("Download CSV"),ie=n(),he=s("hr"),this.h()},l(e){b('[data-svelte="svelte-qmgm2y"]',S.head).forEach(i),a=h(e),x(l.$$.fragment,e),v=h(e),m=o(e,"DIV",{class:!0});var s=c(m);V=o(s,"H1",{class:!0,style:!0});var t=c(V);F=o(t,"B",{});var n=c(F);H=r(n,"Capfiles"),n.forEach(i),t.forEach(i),s.forEach(i),I=h(e),ue&&ue.l(e),L=h(e),$=o(e,"BUTTON",{class:!0});var f=c($);O=r(f,"Download Capture File"),f.forEach(i),P=h(e),q=o(e,"HR",{class:!0}),J=h(e),_=o(e,"DIV",{class:!0});var d=c(_);z=o(d,"H1",{class:!0,style:!0});var p=c(z);M=o(p,"B",{});var u=c(M);Q=r(u,"Edit Capfile Content"),u.forEach(i),p.forEach(i),d.forEach(i),K=r(e,"\n\non click on capfiles, show another table of capfile content\n\n\n"),W=o(e,"BUTTON",{class:!0});var w=c(W);X=r(w,"Convert to CSV"),w.forEach(i),Y=h(e),Z=o(e,"HR",{class:!0}),ee=h(e),ae=o(e,"DIV",{class:!0});var g=c(ae);le=o(g,"H1",{class:!0,style:!0});var E=c(le);se=o(E,"B",{});var y=c(se);te=r(y,"CSV Files (stored in GridFS)"),y.forEach(i),E.forEach(i),g.forEach(i),ne=h(e),we&&we.l(e),oe=h(e),ce=o(e,"BUTTON",{class:!0});var C=c(ce);re=r(C,"Download CSV"),C.forEach(i),ie=h(e),he=o(e,"HR",{class:!0}),this.h()},h(){S.title="Database",f(V,"class","w3-text-yellow"),d(V,"text-shadow","1px 1px 0 #444"),f(m,"class","w3-panel w3-blue"),f($,"class","w3-col w3-input w3-border"),f(q,"class","svelte-lxonyp"),f(z,"class","w3-text-yellow"),d(z,"text-shadow","1px 1px 0 #444"),f(_,"class","w3-panel w3-blue"),f(W,"class","w3-col w3-input w3-border"),f(Z,"class","svelte-lxonyp"),f(le,"class","w3-text-yellow"),d(le,"text-shadow","1px 1px 0 #444"),f(ae,"class","w3-panel w3-blue"),f(ce,"class","w3-col w3-input w3-border"),f(he,"class","svelte-lxonyp")},m(e,s){p(e,a,s),y(l,e,s),p(e,v,s),p(e,m,s),u(m,V),u(V,F),u(F,H),p(e,I,s),ue&&ue.m(e,s),p(e,L,s),p(e,$,s),u($,O),p(e,P,s),p(e,q,s),p(e,J,s),p(e,_,s),u(_,z),u(z,M),u(M,Q),p(e,K,s),p(e,W,s),u(W,X),p(e,Y,s),p(e,Z,s),p(e,ee,s),p(e,ae,s),u(ae,le),u(le,se),u(se,te),p(e,ne,s),we&&we.m(e,s),p(e,oe,s),p(e,ce,s),u(ce,re),p(e,ie,s),p(e,he,s),fe=!0,de||(pe=[w($,"click",j),w(W,"click",A),w(ce,"click",G)],de=!0)},p(e,[a]){e[0].length>0?ue?ue.p(e,a):(ue=U(e),ue.c(),ue.m(L.parentNode,L)):ue&&(ue.d(1),ue=null),allgridfs.length>0&&we.p(e,a)},i(e){fe||(C(l.$$.fragment,e),fe=!0)},o(e){T(l.$$.fragment,e),fe=!1},d(e){e&&i(a),D(l,e),e&&i(v),e&&i(m),e&&i(I),ue&&ue.d(e),e&&i(L),e&&i($),e&&i(P),e&&i(q),e&&i(J),e&&i(_),e&&i(K),e&&i(W),e&&i(Y),e&&i(Z),e&&i(ee),e&&i(ae),e&&i(ne),we&&we.d(e),e&&i(oe),e&&i(ce),e&&i(ie),e&&i(he),de=!1,k(pe)}}}function j(){}function A(){}function G(){}function P(e,a,l){let s=[],t=[];return V((async()=>{H("/allgridfs",(function(e){let a=JSON.parse(e.response);a.data&&(I.success("Found data."),s=a.data,console.log(s))})),H("/capfile/all",(function(e){let a=JSON.parse(e.response);a.data&&(I.success("Found data."),l(0,t=a.data),console.log(t))}))})),[t,function(){let e=document.getElementById("downloadLogfile").value,a=!1;console.log("download logfile",logfiles);for(let t=0;t<logfiles.length;t++)parseInt(e)==parseInt(logfiles[t]._id)&&(a=!0);if(!a)return void I.danger("Please specify an LogID.");let l="/download/db2/logfiles/"+e;var s=performance.now();H(l,(function(e){!function(e,a){let l=document.createElement("a");document.body.appendChild(l),l.style="display: none";let s=window.URL.createObjectURL(e);l.href=s,l.download=a,l.click(),window.URL.revokeObjectURL(s)}(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]));var a=performance.now();console.log("CSV Logfile download took "+(a-s)+" milliseconds.")}))}]}export default class extends e{constructor(e){super(),a(this,e,P,O,l,{})}}

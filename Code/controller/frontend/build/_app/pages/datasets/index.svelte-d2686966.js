import{S as a,i as e,s,e as t,t as l,k as n,c,a as r,g as o,d as i,n as h,b as f,N as d,f as p,F as w,G as v,h as u,Q as E,M as m,j as g,L as T,m as b,o as D,v as x,r as y,w as C,z as V,T as S}from"../../chunks/vendor-c052606d.js";import{T as F,x as R,g as k,a as I,n as H}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:B}=S;function O(a,e,s){const t=a.slice();return t[7]=e[s],t[9]=s,t}function U(a,e,s){const t=a.slice();return t[10]=e[s],t[9]=s,t}function N(a){let e,s,v,u,E,g,T,b,D,x,y,C=a[1],V=[];for(let t=0;t<C.length;t+=1)V[t]=A(U(a,C,t));return{c(){e=t("div"),s=t("div"),v=t("table"),u=t("thead"),E=t("tr"),g=t("th"),T=l("Filename"),b=n(),D=t("th"),x=l("Actions"),y=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var t=r(e);s=c(t,"DIV",{class:!0});var l=r(s);v=c(l,"TABLE",{class:!0,style:!0});var n=r(v);u=c(n,"THEAD",{});var f=r(u);E=c(f,"TR",{class:!0});var d=r(E);g=c(d,"TH",{class:!0});var p=r(g);T=o(p,"Filename"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var w=r(D);x=o(w,"Actions"),w.forEach(i),d.forEach(i),f.forEach(i),y=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),l.forEach(i),t.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(D,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(v,"class","w3-table-all"),d(v,"width","100%"),f(s,"class","w3-responsive"),f(e,"class","w3-container")},m(a,t){p(a,e,t),w(e,s),w(s,v),w(v,u),w(u,E),w(E,g),w(g,T),w(E,b),w(E,D),w(D,x),w(v,y);for(let e=0;e<V.length;e+=1)V[e].m(v,null)},p(a,e){if(26&e){let s;for(C=a[1],s=0;s<C.length;s+=1){const t=U(a,C,s);V[s]?V[s].p(t,e):(V[s]=A(t),V[s].c(),V[s].m(v,null))}for(;s<V.length;s+=1)V[s].d(1);V.length=C.length}},d(a){a&&i(e),m(V,a)}}}function A(a){let e,s,d,m,g,T,b,D,x,y,C,V,S,F,R=a[10]+"";return{c(){e=t("tr"),s=t("td"),d=l(R),m=n(),g=t("td"),T=t("div"),b=t("button"),D=l("Edit"),x=n(),y=t("button"),C=l("Download"),V=n(),this.h()},l(a){e=c(a,"TR",{});var t=r(e);s=c(t,"TD",{class:!0});var l=r(s);d=o(l,R),l.forEach(i),m=h(t),g=c(t,"TD",{class:!0});var n=r(g);T=c(n,"DIV",{});var f=r(T);b=c(f,"BUTTON",{index:!0});var p=r(b);D=o(p,"Edit"),p.forEach(i),x=h(f),y=c(f,"BUTTON",{index:!0});var w=r(y);C=o(w,"Download"),w.forEach(i),f.forEach(i),n.forEach(i),V=h(t),t.forEach(i),this.h()},h(){f(s,"class","w3-left-align"),f(b,"index",a[9]),f(y,"index",a[9]),f(g,"class","w3-right-align")},m(t,l){p(t,e,l),w(e,s),w(s,d),w(e,m),w(e,g),w(g,T),w(T,b),w(b,D),w(T,x),w(T,y),w(y,C),w(e,V),S||(F=[v(b,"click",a[4]),v(y,"click",a[3])],S=!0)},p(a,e){2&e&&R!==(R=a[10]+"")&&u(d,R)},d(a){a&&i(e),S=!1,E(F)}}}function G(a){let e,s,v,u,E,g,T,b,D,x,y,C=a[0],V=[];for(let t=0;t<C.length;t+=1)V[t]=$(O(a,C,t));return{c(){e=t("div"),s=t("div"),v=t("table"),u=t("thead"),E=t("tr"),g=t("th"),T=l("Filename"),b=n(),D=t("th"),x=l("Actions"),y=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var t=r(e);s=c(t,"DIV",{class:!0});var l=r(s);v=c(l,"TABLE",{class:!0,style:!0});var n=r(v);u=c(n,"THEAD",{});var f=r(u);E=c(f,"TR",{class:!0});var d=r(E);g=c(d,"TH",{class:!0});var p=r(g);T=o(p,"Filename"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var w=r(D);x=o(w,"Actions"),w.forEach(i),d.forEach(i),f.forEach(i),y=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),l.forEach(i),t.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(D,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(v,"class","w3-table-all"),d(v,"width","100%"),f(s,"class","w3-responsive"),f(e,"class","w3-container")},m(a,t){p(a,e,t),w(e,s),w(s,v),w(v,u),w(u,E),w(E,g),w(g,T),w(E,b),w(E,D),w(D,x),w(v,y);for(let e=0;e<V.length;e+=1)V[e].m(v,null)},p(a,e){if(33&e){let s;for(C=a[0],s=0;s<C.length;s+=1){const t=O(a,C,s);V[s]?V[s].p(t,e):(V[s]=$(t),V[s].c(),V[s].m(v,null))}for(;s<V.length;s+=1)V[s].d(1);V.length=C.length}},d(a){a&&i(e),m(V,a)}}}function $(a){let e,s,d,E,m,g,T,b,D,x,y=a[7]+"";return{c(){e=t("tr"),s=t("td"),d=l(y),E=n(),m=t("td"),g=t("button"),T=l("Download"),b=n(),this.h()},l(a){e=c(a,"TR",{});var t=r(e);s=c(t,"TD",{class:!0});var l=r(s);d=o(l,y),l.forEach(i),E=h(t),m=c(t,"TD",{class:!0});var n=r(m);g=c(n,"BUTTON",{index:!0});var f=r(g);T=o(f,"Download"),f.forEach(i),n.forEach(i),b=h(t),t.forEach(i),this.h()},h(){f(s,"class","w3-left-align"),f(g,"index",a[9]),f(m,"class","w3-right-align")},m(t,l){p(t,e,l),w(e,s),w(s,d),w(e,E),w(e,m),w(m,g),w(g,T),w(e,b),D||(x=v(g,"click",a[5]),D=!0)},p(a,e){1&e&&y!==(y=a[7]+"")&&u(d,y)},d(a){a&&i(e),D=!1,x()}}}function L(a){let e,s,u,m,V,S,R,k,I,H,O,U,A,$,L,q,z,M,Q,_,K,W,X,Y,Z,aa,ea,sa,ta,la,na,ca,ra,oa,ia,ha,fa,da,pa,wa,va,ua,Ea,ma,ga,Ta,ba,Da,xa,ya;s=new F({});let Ca=a[1].length>0&&N(a),Va=a[0].length>0&&G(a);return{c(){e=n(),g(s.$$.fragment),u=n(),m=t("div"),V=t("h1"),S=t("b"),R=l("Capfiles"),k=n(),Ca&&Ca.c(),I=n(),H=t("hr"),O=n(),U=t("div"),A=t("h1"),$=t("b"),L=l("Edit Capfile Content"),q=l("\n\non click on capfiles, show another table of capfile content\n\n\n"),z=t("div"),M=t("div"),Q=t("button"),_=l("Apply Filter"),K=n(),W=t("div"),X=t("input"),Y=n(),Z=t("div"),aa=t("div"),ea=t("button"),sa=l("Convert to CSV and Store to GridFs"),ta=n(),la=t("div"),na=t("button"),ca=l("Download Table as CSV"),ra=n(),oa=t("hr"),ia=n(),ha=t("div"),fa=t("h1"),da=t("b"),pa=l("Gridfs Files (CSVs stored in GridFS)"),wa=n(),va=t("button"),ua=l("Reload GrifFS"),Ea=n(),ma=t("hr"),ga=n(),Va&&Va.c(),Ta=n(),ba=t("hr"),this.h()},l(a){T('[data-svelte="svelte-qmgm2y"]',B.head).forEach(i),e=h(a),b(s.$$.fragment,a),u=h(a),m=c(a,"DIV",{class:!0});var t=r(m);V=c(t,"H1",{class:!0,style:!0});var l=r(V);S=c(l,"B",{});var n=r(S);R=o(n,"Capfiles"),n.forEach(i),l.forEach(i),t.forEach(i),k=h(a),Ca&&Ca.l(a),I=h(a),H=c(a,"HR",{class:!0}),O=h(a),U=c(a,"DIV",{class:!0});var f=r(U);A=c(f,"H1",{class:!0,style:!0});var d=r(A);$=c(d,"B",{});var p=r($);L=o(p,"Edit Capfile Content"),p.forEach(i),d.forEach(i),f.forEach(i),q=o(a,"\n\non click on capfiles, show another table of capfile content\n\n\n"),z=c(a,"DIV",{class:!0});var w=r(z);M=c(w,"DIV",{class:!0});var v=r(M);Q=c(v,"BUTTON",{ref:!0,class:!0});var E=r(Q);_=o(E,"Apply Filter"),E.forEach(i),v.forEach(i),K=h(w),W=c(w,"DIV",{class:!0});var g=r(W);X=c(g,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),g.forEach(i),w.forEach(i),Y=h(a),Z=c(a,"DIV",{class:!0});var D=r(Z);aa=c(D,"DIV",{class:!0});var x=r(aa);ea=c(x,"BUTTON",{class:!0});var y=r(ea);sa=o(y,"Convert to CSV and Store to GridFs"),y.forEach(i),x.forEach(i),ta=h(D),la=c(D,"DIV",{class:!0});var C=r(la);na=c(C,"BUTTON",{class:!0});var F=r(na);ca=o(F,"Download Table as CSV"),F.forEach(i),C.forEach(i),D.forEach(i),ra=h(a),oa=c(a,"HR",{class:!0}),ia=h(a),ha=c(a,"DIV",{class:!0});var N=r(ha);fa=c(N,"H1",{class:!0,style:!0});var G=r(fa);da=c(G,"B",{});var j=r(da);pa=o(j,"Gridfs Files (CSVs stored in GridFS)"),j.forEach(i),G.forEach(i),N.forEach(i),wa=h(a),va=c(a,"BUTTON",{class:!0});var P=r(va);ua=o(P,"Reload GrifFS"),P.forEach(i),Ea=h(a),ma=c(a,"HR",{class:!0}),ga=h(a),Va&&Va.l(a),Ta=h(a),ba=c(a,"HR",{class:!0}),this.h()},h(){B.title="Database",f(V,"class","w3-text-yellow"),d(V,"text-shadow","1px 1px 0 #444"),f(m,"class","w3-panel w3-blue"),f(H,"class","svelte-lxonyp"),f(A,"class","w3-text-yellow"),d(A,"text-shadow","1px 1px 0 #444"),f(U,"class","w3-panel w3-blue"),f(Q,"ref","filterTable"),f(Q,"class","w3-col w3-input w3-border"),f(M,"class","w3-third"),f(X,"id","filterTable"),f(X,"class","w3-input w3-border"),f(X,"name","name"),f(X,"type","text"),f(X,"placeholder","Filter String"),f(W,"class","w3-rest"),f(z,"class","w3-row w3-section"),f(ea,"class","w3-col w3-input w3-border"),f(aa,"class","w3-half"),f(na,"class","w3-col w3-input w3-border"),f(la,"class","w3-half"),f(Z,"class","w3-row w3-section"),f(oa,"class","svelte-lxonyp"),f(fa,"class","w3-text-yellow"),d(fa,"text-shadow","1px 1px 0 #444"),f(ha,"class","w3-panel w3-blue"),f(va,"class","w3-col w3-input w3-border"),f(ma,"class","svelte-lxonyp"),f(ba,"class","svelte-lxonyp")},m(t,l){p(t,e,l),D(s,t,l),p(t,u,l),p(t,m,l),w(m,V),w(V,S),w(S,R),p(t,k,l),Ca&&Ca.m(t,l),p(t,I,l),p(t,H,l),p(t,O,l),p(t,U,l),w(U,A),w(A,$),w($,L),p(t,q,l),p(t,z,l),w(z,M),w(M,Q),w(Q,_),w(z,K),w(z,W),w(W,X),p(t,Y,l),p(t,Z,l),w(Z,aa),w(aa,ea),w(ea,sa),w(Z,ta),w(Z,la),w(la,na),w(na,ca),p(t,ra,l),p(t,oa,l),p(t,ia,l),p(t,ha,l),w(ha,fa),w(fa,da),w(da,pa),p(t,wa,l),p(t,va,l),w(va,ua),p(t,Ea,l),p(t,ma,l),p(t,ga,l),Va&&Va.m(t,l),p(t,Ta,l),p(t,ba,l),Da=!0,xa||(ya=[v(Q,"click",J),v(ea,"click",j),v(na,"click",P),v(va,"click",a[2])],xa=!0)},p(a,[e]){a[1].length>0?Ca?Ca.p(a,e):(Ca=N(a),Ca.c(),Ca.m(I.parentNode,I)):Ca&&(Ca.d(1),Ca=null),a[0].length>0?Va?Va.p(a,e):(Va=G(a),Va.c(),Va.m(Ta.parentNode,Ta)):Va&&(Va.d(1),Va=null)},i(a){Da||(x(s.$$.fragment,a),Da=!0)},o(a){y(s.$$.fragment,a),Da=!1},d(a){a&&i(e),C(s,a),a&&i(u),a&&i(m),a&&i(k),Ca&&Ca.d(a),a&&i(I),a&&i(H),a&&i(O),a&&i(U),a&&i(q),a&&i(z),a&&i(Y),a&&i(Z),a&&i(ra),a&&i(oa),a&&i(ia),a&&i(ha),a&&i(wa),a&&i(va),a&&i(Ea),a&&i(ma),a&&i(ga),Va&&Va.d(a),a&&i(Ta),a&&i(ba),xa=!1,E(ya)}}}function j(){}function P(){}function q(a,e){let s=document.createElement("a");document.body.appendChild(s),s.style="display: none";let t=window.URL.createObjectURL(a);s.href=t,s.download=e,s.click(),window.URL.revokeObjectURL(t)}function J(){}function z(a,e,s){let t=[],l=[],n=[];function c(){R("/gridfs/all",(function(a){let e=JSON.parse(a.response);e.data&&(H.success("Found data."),s(0,t=e.data),console.log("gridfsData",t))}))}return V((async()=>{c(),R("/capfile/all",(function(a){let e=JSON.parse(a.response);e.data&&(H.success("Found data."),s(1,l=e.data),console.log("capfileData",l))}))})),[t,l,c,function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;k("/capfile/download","POST",{filepath:a},(function(a){q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;I("/capfile/edit","POST",{filepath:a},(function(a){a.data&&(n=a.data,console.log("editData:",n),H.success("Configuration update successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let a=this.parentElement.parentElement.firstElementChild.innerText;k("/gridfs/download","POST",{filename:a},(function(a){q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends a{constructor(a){super(),e(this,a,z,L,s,{})}}

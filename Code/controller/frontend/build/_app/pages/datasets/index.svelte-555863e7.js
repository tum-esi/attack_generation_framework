import{S as a,i as e,s as t,e as s,t as l,k as n,c,a as r,g as o,d as i,n as h,b as f,N as d,f as p,F as w,G as u,h as v,Q as E,M as m,j as g,L as T,m as b,o as x,v as D,r as y,w as C,z as S,T as V}from"../../chunks/vendor-c052606d.js";import{T as F,x as R,g as k,a as I,n as H}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:B}=V;function O(a,e,t){const s=a.slice();return s[7]=e[t],s[9]=t,s}function U(a,e,t){const s=a.slice();return s[10]=e[t],s[9]=t,s}function N(a){let e,t,u,v,E,g,T,b,x,D,y,C=a[1],S=[];for(let s=0;s<C.length;s+=1)S[s]=A(U(a,C,s));return{c(){e=s("div"),t=s("div"),u=s("table"),v=s("thead"),E=s("tr"),g=s("th"),T=l("Filename"),b=n(),x=s("th"),D=l("Actions"),y=n();for(let a=0;a<S.length;a+=1)S[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var s=r(e);t=c(s,"DIV",{class:!0});var l=r(t);u=c(l,"TABLE",{class:!0,style:!0});var n=r(u);v=c(n,"THEAD",{});var f=r(v);E=c(f,"TR",{class:!0});var d=r(E);g=c(d,"TH",{class:!0});var p=r(g);T=o(p,"Filename"),p.forEach(i),b=h(d),x=c(d,"TH",{class:!0});var w=r(x);D=o(w,"Actions"),w.forEach(i),d.forEach(i),f.forEach(i),y=h(n);for(let e=0;e<S.length;e+=1)S[e].l(n);n.forEach(i),l.forEach(i),s.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(x,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(u,"class","w3-table-all"),d(u,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,s){p(a,e,s),w(e,t),w(t,u),w(u,v),w(v,E),w(E,g),w(g,T),w(E,b),w(E,x),w(x,D),w(u,y);for(let e=0;e<S.length;e+=1)S[e].m(u,null)},p(a,e){if(26&e){let t;for(C=a[1],t=0;t<C.length;t+=1){const s=U(a,C,t);S[t]?S[t].p(s,e):(S[t]=A(s),S[t].c(),S[t].m(u,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=C.length}},d(a){a&&i(e),m(S,a)}}}function A(a){let e,t,d,m,g,T,b,x,D,y,C,S,V,F,R=a[10]+"";return{c(){e=s("tr"),t=s("td"),d=l(R),m=n(),g=s("td"),T=s("div"),b=s("button"),x=l("Edit"),D=n(),y=s("button"),C=l("Download"),S=n(),this.h()},l(a){e=c(a,"TR",{});var s=r(e);t=c(s,"TD",{class:!0});var l=r(t);d=o(l,R),l.forEach(i),m=h(s),g=c(s,"TD",{class:!0});var n=r(g);T=c(n,"DIV",{});var f=r(T);b=c(f,"BUTTON",{index:!0});var p=r(b);x=o(p,"Edit"),p.forEach(i),D=h(f),y=c(f,"BUTTON",{index:!0});var w=r(y);C=o(w,"Download"),w.forEach(i),f.forEach(i),n.forEach(i),S=h(s),s.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(b,"index",a[9]),f(y,"index",a[9]),f(g,"class","w3-right-align")},m(s,l){p(s,e,l),w(e,t),w(t,d),w(e,m),w(e,g),w(g,T),w(T,b),w(b,x),w(T,D),w(T,y),w(y,C),w(e,S),V||(F=[u(b,"click",a[4]),u(y,"click",a[3])],V=!0)},p(a,e){2&e&&R!==(R=a[10]+"")&&v(d,R)},d(a){a&&i(e),V=!1,E(F)}}}function G(a){let e,t,u,v,E,g,T,b,x,D,y,C=a[0],S=[];for(let s=0;s<C.length;s+=1)S[s]=$(O(a,C,s));return{c(){e=s("div"),t=s("div"),u=s("table"),v=s("thead"),E=s("tr"),g=s("th"),T=l("Filename"),b=n(),x=s("th"),D=l("Actions"),y=n();for(let a=0;a<S.length;a+=1)S[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var s=r(e);t=c(s,"DIV",{class:!0});var l=r(t);u=c(l,"TABLE",{class:!0,style:!0});var n=r(u);v=c(n,"THEAD",{});var f=r(v);E=c(f,"TR",{class:!0});var d=r(E);g=c(d,"TH",{class:!0});var p=r(g);T=o(p,"Filename"),p.forEach(i),b=h(d),x=c(d,"TH",{class:!0});var w=r(x);D=o(w,"Actions"),w.forEach(i),d.forEach(i),f.forEach(i),y=h(n);for(let e=0;e<S.length;e+=1)S[e].l(n);n.forEach(i),l.forEach(i),s.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(x,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(u,"class","w3-table-all"),d(u,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,s){p(a,e,s),w(e,t),w(t,u),w(u,v),w(v,E),w(E,g),w(g,T),w(E,b),w(E,x),w(x,D),w(u,y);for(let e=0;e<S.length;e+=1)S[e].m(u,null)},p(a,e){if(33&e){let t;for(C=a[0],t=0;t<C.length;t+=1){const s=O(a,C,t);S[t]?S[t].p(s,e):(S[t]=$(s),S[t].c(),S[t].m(u,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=C.length}},d(a){a&&i(e),m(S,a)}}}function $(a){let e,t,d,E,m,g,T,b,x,D,y=a[7]+"";return{c(){e=s("tr"),t=s("td"),d=l(y),E=n(),m=s("td"),g=s("button"),T=l("Download"),b=n(),this.h()},l(a){e=c(a,"TR",{});var s=r(e);t=c(s,"TD",{class:!0});var l=r(t);d=o(l,y),l.forEach(i),E=h(s),m=c(s,"TD",{class:!0});var n=r(m);g=c(n,"BUTTON",{index:!0});var f=r(g);T=o(f,"Download"),f.forEach(i),n.forEach(i),b=h(s),s.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(g,"index",a[9]),f(m,"class","w3-right-align")},m(s,l){p(s,e,l),w(e,t),w(t,d),w(e,E),w(e,m),w(m,g),w(g,T),w(e,b),x||(D=u(g,"click",a[5]),x=!0)},p(a,e){1&e&&y!==(y=a[7]+"")&&v(d,y)},d(a){a&&i(e),x=!1,D()}}}function L(a){let e,t,v,m,S,V,R,k,I,H,O,U,A,$,L,q,z,M,Q,_,K,W,X,Y,Z,aa,ea,ta,sa,la,na,ca,ra,oa,ia,ha,fa,da,pa,wa,ua,va,Ea,ma,ga,Ta,ba,xa,Da;t=new F({});let ya=a[1].length>0&&N(a),Ca=a[0].length>0&&G(a);return{c(){e=n(),g(t.$$.fragment),v=n(),m=s("div"),S=s("h1"),V=s("b"),R=l("Capfiles"),k=n(),ya&&ya.c(),I=n(),H=s("hr"),O=n(),U=s("div"),A=s("h1"),$=s("b"),L=l("Edit Capfile Content"),q=l("\n\non click on capfiles, show another table of capfile content\n\n\n"),z=s("div"),M=s("div"),Q=s("button"),_=l("Apply Filter"),K=n(),W=s("div"),X=s("input"),Y=n(),Z=s("div"),aa=s("div"),ea=s("button"),ta=l("Convert to CSV and Store to GridFs"),sa=n(),la=s("button"),na=l("Download Table as CSV"),ca=n(),ra=s("hr"),oa=n(),ia=s("div"),ha=s("h1"),fa=s("b"),da=l("Gridfs Files (CSVs stored in GridFS)"),pa=n(),wa=s("button"),ua=l("Reload GrifFS"),va=n(),Ea=s("hr"),ma=n(),Ca&&Ca.c(),ga=n(),Ta=s("hr"),this.h()},l(a){T('[data-svelte="svelte-qmgm2y"]',B.head).forEach(i),e=h(a),b(t.$$.fragment,a),v=h(a),m=c(a,"DIV",{class:!0});var s=r(m);S=c(s,"H1",{class:!0,style:!0});var l=r(S);V=c(l,"B",{});var n=r(V);R=o(n,"Capfiles"),n.forEach(i),l.forEach(i),s.forEach(i),k=h(a),ya&&ya.l(a),I=h(a),H=c(a,"HR",{class:!0}),O=h(a),U=c(a,"DIV",{class:!0});var f=r(U);A=c(f,"H1",{class:!0,style:!0});var d=r(A);$=c(d,"B",{});var p=r($);L=o(p,"Edit Capfile Content"),p.forEach(i),d.forEach(i),f.forEach(i),q=o(a,"\n\non click on capfiles, show another table of capfile content\n\n\n"),z=c(a,"DIV",{class:!0});var w=r(z);M=c(w,"DIV",{class:!0});var u=r(M);Q=c(u,"BUTTON",{ref:!0,class:!0});var E=r(Q);_=o(E,"Apply Filter"),E.forEach(i),u.forEach(i),K=h(w),W=c(w,"DIV",{class:!0});var g=r(W);X=c(g,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),g.forEach(i),w.forEach(i),Y=h(a),Z=c(a,"DIV",{class:!0});var x=r(Z);aa=c(x,"DIV",{class:!0});var D=r(aa);ea=c(D,"BUTTON",{class:!0});var y=r(ea);ta=o(y,"Convert to CSV and Store to GridFs"),y.forEach(i),D.forEach(i),sa=h(x),la=c(x,"BUTTON",{class:!0});var C=r(la);na=o(C,"Download Table as CSV"),C.forEach(i),x.forEach(i),ca=h(a),ra=c(a,"HR",{class:!0}),oa=h(a),ia=c(a,"DIV",{class:!0});var F=r(ia);ha=c(F,"H1",{class:!0,style:!0});var N=r(ha);fa=c(N,"B",{});var G=r(fa);da=o(G,"Gridfs Files (CSVs stored in GridFS)"),G.forEach(i),N.forEach(i),F.forEach(i),pa=h(a),wa=c(a,"BUTTON",{class:!0});var j=r(wa);ua=o(j,"Reload GrifFS"),j.forEach(i),va=h(a),Ea=c(a,"HR",{class:!0}),ma=h(a),Ca&&Ca.l(a),ga=h(a),Ta=c(a,"HR",{class:!0}),this.h()},h(){B.title="Database",f(S,"class","w3-text-yellow"),d(S,"text-shadow","1px 1px 0 #444"),f(m,"class","w3-panel w3-blue"),f(H,"class","svelte-lxonyp"),f(A,"class","w3-text-yellow"),d(A,"text-shadow","1px 1px 0 #444"),f(U,"class","w3-panel w3-blue"),f(Q,"ref","filterTable"),f(Q,"class","w3-col w3-input w3-border"),f(M,"class","w3-third"),f(X,"id","filterTable"),f(X,"class","w3-input w3-border"),f(X,"name","name"),f(X,"type","text"),f(X,"placeholder","Filter String"),f(W,"class","w3-rest"),f(z,"class","w3-row w3-section"),f(ea,"class","w3-input w3-border"),f(aa,"class","w3-half"),f(la,"class","w3-input w3-border"),f(Z,"class","w3-row w3-section"),f(ra,"class","svelte-lxonyp"),f(ha,"class","w3-text-yellow"),d(ha,"text-shadow","1px 1px 0 #444"),f(ia,"class","w3-panel w3-blue"),f(wa,"class","w3-col w3-input w3-border"),f(Ea,"class","svelte-lxonyp"),f(Ta,"class","svelte-lxonyp")},m(s,l){p(s,e,l),x(t,s,l),p(s,v,l),p(s,m,l),w(m,S),w(S,V),w(V,R),p(s,k,l),ya&&ya.m(s,l),p(s,I,l),p(s,H,l),p(s,O,l),p(s,U,l),w(U,A),w(A,$),w($,L),p(s,q,l),p(s,z,l),w(z,M),w(M,Q),w(Q,_),w(z,K),w(z,W),w(W,X),p(s,Y,l),p(s,Z,l),w(Z,aa),w(aa,ea),w(ea,ta),w(Z,sa),w(Z,la),w(la,na),p(s,ca,l),p(s,ra,l),p(s,oa,l),p(s,ia,l),w(ia,ha),w(ha,fa),w(fa,da),p(s,pa,l),p(s,wa,l),w(wa,ua),p(s,va,l),p(s,Ea,l),p(s,ma,l),Ca&&Ca.m(s,l),p(s,ga,l),p(s,Ta,l),ba=!0,xa||(Da=[u(Q,"click",J),u(ea,"click",j),u(la,"click",P),u(wa,"click",a[2])],xa=!0)},p(a,[e]){a[1].length>0?ya?ya.p(a,e):(ya=N(a),ya.c(),ya.m(I.parentNode,I)):ya&&(ya.d(1),ya=null),a[0].length>0?Ca?Ca.p(a,e):(Ca=G(a),Ca.c(),Ca.m(ga.parentNode,ga)):Ca&&(Ca.d(1),Ca=null)},i(a){ba||(D(t.$$.fragment,a),ba=!0)},o(a){y(t.$$.fragment,a),ba=!1},d(a){a&&i(e),C(t,a),a&&i(v),a&&i(m),a&&i(k),ya&&ya.d(a),a&&i(I),a&&i(H),a&&i(O),a&&i(U),a&&i(q),a&&i(z),a&&i(Y),a&&i(Z),a&&i(ca),a&&i(ra),a&&i(oa),a&&i(ia),a&&i(pa),a&&i(wa),a&&i(va),a&&i(Ea),a&&i(ma),Ca&&Ca.d(a),a&&i(ga),a&&i(Ta),xa=!1,E(Da)}}}function j(){}function P(){}function q(a,e){let t=document.createElement("a");document.body.appendChild(t),t.style="display: none";let s=window.URL.createObjectURL(a);t.href=s,t.download=e,t.click(),window.URL.revokeObjectURL(s)}function J(){}function z(a,e,t){let s=[],l=[],n=[];function c(){R("/gridfs/all",(function(a){let e=JSON.parse(a.response);e.data&&(H.success("Found data."),t(0,s=e.data),console.log("gridfsData",s))}))}return S((async()=>{c(),R("/capfile/all",(function(a){let e=JSON.parse(a.response);e.data&&(H.success("Found data."),t(1,l=e.data),console.log("capfileData",l))}))})),[s,l,c,function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;k("/capfile/download","POST",{filepath:a},(function(a){q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;I("/capfile/edit","POST",{filepath:a},(function(a){a.data&&(n=a.data,console.log("editData:",n),H.success("Configuration update successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let a=this.parentElement.parentElement.firstElementChild.innerText;k("/gridfs/download","POST",{filename:a},(function(a){q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends a{constructor(a){super(),e(this,a,z,L,t,{})}}

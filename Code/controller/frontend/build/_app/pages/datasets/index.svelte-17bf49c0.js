import{S as e,i as a,s as t,e as l,t as s,k as n,c,a as r,g as o,d as h,n as d,b as f,N as p,f as v,F as E,G as w,h as g,Q as u,M as m,j as T,L as b,m as y,o as D,v as x,r as C,w as k,z as V,T as B}from"../../chunks/vendor-c052606d.js";import{T as I,x as R,g as S,a as N,n as H}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:F}=B;function O(e,a,t){const l=e.slice();return l[7]=a[t],l[9]=t,l}function U(e,a,t){const l=e.slice();return l[10]=a[t],l[9]=t,l}function A(e,a,t){const l=e.slice();return l[12]=a[t],l[9]=t,l}function L(e){let a,t,i,w,g,u,T,b,y,D,x,C=e[1],k=[];for(let l=0;l<C.length;l+=1)k[l]=G(A(e,C,l));return{c(){a=l("div"),t=l("div"),i=l("table"),w=l("thead"),g=l("tr"),u=l("th"),T=s("Filename"),b=n(),y=l("th"),D=s("Actions"),x=n();for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){a=c(e,"DIV",{class:!0});var l=r(a);t=c(l,"DIV",{class:!0});var s=r(t);i=c(s,"TABLE",{class:!0,style:!0});var n=r(i);w=c(n,"THEAD",{});var f=r(w);g=c(f,"TR",{class:!0});var p=r(g);u=c(p,"TH",{class:!0});var v=r(u);T=o(v,"Filename"),v.forEach(h),b=d(p),y=c(p,"TH",{class:!0});var E=r(y);D=o(E,"Actions"),E.forEach(h),p.forEach(h),f.forEach(h),x=d(n);for(let a=0;a<k.length;a+=1)k[a].l(n);n.forEach(h),s.forEach(h),l.forEach(h),this.h()},h(){f(u,"class","w3-left-align"),f(y,"class","w3-right-align"),f(g,"class","w3-dark-grey"),f(i,"class","w3-table-all"),p(i,"width","100%"),f(t,"class","w3-responsive"),f(a,"class","w3-container")},m(e,l){v(e,a,l),E(a,t),E(t,i),E(i,w),E(w,g),E(g,u),E(u,T),E(g,b),E(g,y),E(y,D),E(i,x);for(let a=0;a<k.length;a+=1)k[a].m(i,null)},p(e,a){if(50&a){let t;for(C=e[1],t=0;t<C.length;t+=1){const l=A(e,C,t);k[t]?k[t].p(l,a):(k[t]=G(l),k[t].c(),k[t].m(i,null))}for(;t<k.length;t+=1)k[t].d(1);k.length=C.length}},d(e){e&&h(a),m(k,e)}}}function G(e){let a,t,i,p,m,T,b,y,D,x,C,k,V,B,I=e[12]+"";return{c(){a=l("tr"),t=l("td"),i=s(I),p=n(),m=l("td"),T=l("div"),b=l("button"),y=s("Edit"),D=n(),x=l("button"),C=s("Download"),k=n(),this.h()},l(e){a=c(e,"TR",{});var l=r(a);t=c(l,"TD",{class:!0});var s=r(t);i=o(s,I),s.forEach(h),p=d(l),m=c(l,"TD",{class:!0});var n=r(m);T=c(n,"DIV",{});var f=r(T);b=c(f,"BUTTON",{index:!0});var v=r(b);y=o(v,"Edit"),v.forEach(h),D=d(f),x=c(f,"BUTTON",{index:!0});var E=r(x);C=o(E,"Download"),E.forEach(h),f.forEach(h),n.forEach(h),k=d(l),l.forEach(h),this.h()},h(){f(t,"class","w3-left-align"),f(b,"index",e[9]),f(x,"index",e[9]),f(m,"class","w3-right-align")},m(l,s){v(l,a,s),E(a,t),E(t,i),E(a,p),E(a,m),E(m,T),E(T,b),E(b,y),E(T,D),E(T,x),E(x,C),E(a,k),V||(B=[w(b,"click",e[5]),w(x,"click",e[4])],V=!0)},p(e,a){2&a&&I!==(I=e[12]+"")&&g(i,I)},d(e){e&&h(a),V=!1,u(B)}}}function $(e){let a,t,i,w,g,u,T,b,y,D,x,C,k=e[2],V=[];for(let l=0;l<k.length;l+=1)V[l]=j(U(e,k,l));return{c(){a=l("div"),t=l("div"),i=l("table"),w=l("thead"),g=l("tr"),u=l("th"),T=s("Content"),b=n(),y=l("th"),D=s("Labels"),x=n(),C=l("tbody");for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){a=c(e,"DIV",{class:!0});var l=r(a);t=c(l,"DIV",{class:!0});var s=r(t);i=c(s,"TABLE",{id:!0,class:!0,style:!0});var n=r(i);w=c(n,"THEAD",{});var f=r(w);g=c(f,"TR",{class:!0});var p=r(g);u=c(p,"TH",{class:!0});var v=r(u);T=o(v,"Content"),v.forEach(h),b=d(p),y=c(p,"TH",{class:!0});var E=r(y);D=o(E,"Labels"),E.forEach(h),p.forEach(h),f.forEach(h),x=d(n),C=c(n,"TBODY",{});var m=r(C);for(let a=0;a<V.length;a+=1)V[a].l(m);m.forEach(h),n.forEach(h),s.forEach(h),l.forEach(h),this.h()},h(){f(u,"class","w3-left-align"),f(y,"class","w3-right-align"),f(g,"class","w3-dark-grey"),f(i,"id","editTable"),f(i,"class","w3-table-all"),p(i,"width","100%"),f(t,"class","w3-responsive"),f(a,"class","w3-container")},m(e,l){v(e,a,l),E(a,t),E(t,i),E(i,w),E(w,g),E(g,u),E(u,T),E(g,b),E(g,y),E(y,D),E(i,x),E(i,C);for(let a=0;a<V.length;a+=1)V[a].m(C,null)},p(e,a){if(4&a){let t;for(k=e[2],t=0;t<k.length;t+=1){const l=U(e,k,t);V[t]?V[t].p(l,a):(V[t]=j(l),V[t].c(),V[t].m(C,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=k.length}},d(e){e&&h(a),m(V,e)}}}function j(e){let a,t,i,p,w,u,m,T,b=JSON.stringify(e[10],null,2)+"";return{c(){a=l("tr"),t=l("td"),i=s(b),p=n(),w=l("td"),u=l("div"),m=l("input"),T=n(),this.h()},l(e){a=c(e,"TR",{});var l=r(a);t=c(l,"TD",{class:!0});var s=r(t);i=o(s,b),s.forEach(h),p=d(l),w=c(l,"TD",{class:!0});var n=r(w);u=c(n,"DIV",{});var f=r(u);m=c(f,"INPUT",{class:!0,type:!0,checked:!0,index:!0}),f.forEach(h),n.forEach(h),T=d(l),l.forEach(h),this.h()},h(){f(t,"class","w3-left-align"),f(m,"class","w3-check"),f(m,"type","checkbox"),m.checked="",f(m,"index",e[9]),f(w,"class","w3-right-align")},m(e,l){v(e,a,l),E(a,t),E(t,i),E(a,p),E(a,w),E(w,u),E(u,m),E(a,T)},p(e,a){4&a&&b!==(b=JSON.stringify(e[10],null,2)+"")&&g(i,b)},d(e){e&&h(a)}}}function P(e){let a,t,i,w,g,u,T,b,y,D,x,C=e[0],k=[];for(let l=0;l<C.length;l+=1)k[l]=J(O(e,C,l));return{c(){a=l("div"),t=l("div"),i=l("table"),w=l("thead"),g=l("tr"),u=l("th"),T=s("Filename"),b=n(),y=l("th"),D=s("Actions"),x=n();for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){a=c(e,"DIV",{class:!0});var l=r(a);t=c(l,"DIV",{class:!0});var s=r(t);i=c(s,"TABLE",{class:!0,style:!0});var n=r(i);w=c(n,"THEAD",{});var f=r(w);g=c(f,"TR",{class:!0});var p=r(g);u=c(p,"TH",{class:!0});var v=r(u);T=o(v,"Filename"),v.forEach(h),b=d(p),y=c(p,"TH",{class:!0});var E=r(y);D=o(E,"Actions"),E.forEach(h),p.forEach(h),f.forEach(h),x=d(n);for(let a=0;a<k.length;a+=1)k[a].l(n);n.forEach(h),s.forEach(h),l.forEach(h),this.h()},h(){f(u,"class","w3-left-align"),f(y,"class","w3-right-align"),f(g,"class","w3-dark-grey"),f(i,"class","w3-table-all"),p(i,"width","100%"),f(t,"class","w3-responsive"),f(a,"class","w3-container")},m(e,l){v(e,a,l),E(a,t),E(t,i),E(i,w),E(w,g),E(g,u),E(u,T),E(g,b),E(g,y),E(y,D),E(i,x);for(let a=0;a<k.length;a+=1)k[a].m(i,null)},p(e,a){if(65&a){let t;for(C=e[0],t=0;t<C.length;t+=1){const l=O(e,C,t);k[t]?k[t].p(l,a):(k[t]=J(l),k[t].c(),k[t].m(i,null))}for(;t<k.length;t+=1)k[t].d(1);k.length=C.length}},d(e){e&&h(a),m(k,e)}}}function J(e){let a,t,i,p,u,m,T,b,y,D,x=e[7]+"";return{c(){a=l("tr"),t=l("td"),i=s(x),p=n(),u=l("td"),m=l("button"),T=s("Download"),b=n(),this.h()},l(e){a=c(e,"TR",{});var l=r(a);t=c(l,"TD",{class:!0});var s=r(t);i=o(s,x),s.forEach(h),p=d(l),u=c(l,"TD",{class:!0});var n=r(u);m=c(n,"BUTTON",{index:!0});var f=r(m);T=o(f,"Download"),f.forEach(h),n.forEach(h),b=d(l),l.forEach(h),this.h()},h(){f(t,"class","w3-left-align"),f(m,"index",e[9]),f(u,"class","w3-right-align")},m(l,s){v(l,a,s),E(a,t),E(t,i),E(a,p),E(a,u),E(u,m),E(m,T),E(a,b),y||(D=w(m,"click",e[6]),y=!0)},p(e,a){1&a&&x!==(x=e[7]+"")&&g(i,x)},d(e){e&&h(a),y=!1,D()}}}function q(e){let a,t,i,g,m,V,B,R,S,N,H,O,U,A,G,j,J,q,Q,_,K,W,X,Z,ee,ae,te,le,se,ne,ce,re,oe,ie,he,de,fe,pe,ve,Ee,we,ge,ue,me,Te,be,ye,De,xe,Ce,ke,Ve,Be,Ie,Re;t=new I({});let Se=e[1].length>0&&L(e),Ne=e[2].length>0&&$(e),He=e[0].length>0&&P(e);return{c(){a=n(),T(t.$$.fragment),i=n(),g=l("div"),m=l("h1"),V=l("b"),B=s("Capfiles"),R=n(),Se&&Se.c(),S=n(),N=l("hr"),H=n(),O=l("div"),U=l("h1"),A=l("b"),G=s("Edit Capfile Content"),j=s('\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),J=l("div"),q=l("div"),Q=l("button"),_=s("Apply Filter"),K=n(),W=l("div"),X=l("input"),Z=n(),ee=l("br"),ae=n(),Ne&&Ne.c(),te=n(),le=l("br"),se=n(),ne=l("div"),ce=l("div"),re=l("button"),oe=s("Convert to CSV and Store to GridFs"),ie=n(),he=l("div"),de=l("button"),fe=s("Download Table as CSV"),pe=n(),ve=l("hr"),Ee=n(),we=l("div"),ge=l("h1"),ue=l("b"),me=s("Gridfs Files (CSVs stored in GridFS)"),Te=n(),be=l("button"),ye=s("Reload GrifFS"),De=n(),xe=l("hr"),Ce=n(),He&&He.c(),ke=n(),Ve=l("hr"),this.h()},l(e){b('[data-svelte="svelte-qmgm2y"]',F.head).forEach(h),a=d(e),y(t.$$.fragment,e),i=d(e),g=c(e,"DIV",{class:!0});var l=r(g);m=c(l,"H1",{class:!0,style:!0});var s=r(m);V=c(s,"B",{});var n=r(V);B=o(n,"Capfiles"),n.forEach(h),s.forEach(h),l.forEach(h),R=d(e),Se&&Se.l(e),S=d(e),N=c(e,"HR",{class:!0}),H=d(e),O=c(e,"DIV",{class:!0});var f=r(O);U=c(f,"H1",{class:!0,style:!0});var p=r(U);A=c(p,"B",{});var v=r(A);G=o(v,"Edit Capfile Content"),v.forEach(h),p.forEach(h),f.forEach(h),j=o(e,'\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),J=c(e,"DIV",{class:!0});var E=r(J);q=c(E,"DIV",{class:!0});var w=r(q);Q=c(w,"BUTTON",{ref:!0,class:!0});var u=r(Q);_=o(u,"Apply Filter"),u.forEach(h),w.forEach(h),K=d(E),W=c(E,"DIV",{class:!0});var T=r(W);X=c(T,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),T.forEach(h),E.forEach(h),Z=d(e),ee=c(e,"BR",{}),ae=d(e),Ne&&Ne.l(e),te=d(e),le=c(e,"BR",{}),se=d(e),ne=c(e,"DIV",{class:!0});var D=r(ne);ce=c(D,"DIV",{class:!0});var x=r(ce);re=c(x,"BUTTON",{class:!0});var C=r(re);oe=o(C,"Convert to CSV and Store to GridFs"),C.forEach(h),x.forEach(h),ie=d(D),he=c(D,"DIV",{class:!0});var k=r(he);de=c(k,"BUTTON",{class:!0});var I=r(de);fe=o(I,"Download Table as CSV"),I.forEach(h),k.forEach(h),D.forEach(h),pe=d(e),ve=c(e,"HR",{class:!0}),Ee=d(e),we=c(e,"DIV",{class:!0});var L=r(we);ge=c(L,"H1",{class:!0,style:!0});var $=r(ge);ue=c($,"B",{});var P=r(ue);me=o(P,"Gridfs Files (CSVs stored in GridFS)"),P.forEach(h),$.forEach(h),L.forEach(h),Te=d(e),be=c(e,"BUTTON",{class:!0});var M=r(be);ye=o(M,"Reload GrifFS"),M.forEach(h),De=d(e),xe=c(e,"HR",{class:!0}),Ce=d(e),He&&He.l(e),ke=d(e),Ve=c(e,"HR",{class:!0}),this.h()},h(){F.title="Database",f(m,"class","w3-text-yellow"),p(m,"text-shadow","1px 1px 0 #444"),f(g,"class","w3-panel w3-blue"),f(N,"class","svelte-lxonyp"),f(U,"class","w3-text-yellow"),p(U,"text-shadow","1px 1px 0 #444"),f(O,"class","w3-panel w3-blue"),f(Q,"ref","filterTable"),f(Q,"class","w3-col w3-input w3-border"),f(q,"class","w3-third"),f(X,"id","filterTable"),f(X,"class","w3-input w3-border"),f(X,"name","name"),f(X,"type","text"),f(X,"placeholder","Filter String"),f(W,"class","w3-rest"),f(J,"class","w3-row w3-section"),f(re,"class","w3-col w3-input w3-border"),f(ce,"class","w3-half"),f(de,"class","w3-col w3-input w3-border"),f(he,"class","w3-half"),f(ne,"class","w3-row w3-section"),f(ve,"class","svelte-lxonyp"),f(ge,"class","w3-text-yellow"),p(ge,"text-shadow","1px 1px 0 #444"),f(we,"class","w3-panel w3-blue"),f(be,"class","w3-col w3-input w3-border"),f(xe,"class","svelte-lxonyp"),f(Ve,"class","svelte-lxonyp")},m(l,s){v(l,a,s),D(t,l,s),v(l,i,s),v(l,g,s),E(g,m),E(m,V),E(V,B),v(l,R,s),Se&&Se.m(l,s),v(l,S,s),v(l,N,s),v(l,H,s),v(l,O,s),E(O,U),E(U,A),E(A,G),v(l,j,s),v(l,J,s),E(J,q),E(q,Q),E(Q,_),E(J,K),E(J,W),E(W,X),v(l,Z,s),v(l,ee,s),v(l,ae,s),Ne&&Ne.m(l,s),v(l,te,s),v(l,le,s),v(l,se,s),v(l,ne,s),E(ne,ce),E(ce,re),E(re,oe),E(ne,ie),E(ne,he),E(he,de),E(de,fe),v(l,pe,s),v(l,ve,s),v(l,Ee,s),v(l,we,s),E(we,ge),E(ge,ue),E(ue,me),v(l,Te,s),v(l,be,s),E(be,ye),v(l,De,s),v(l,xe,s),v(l,Ce,s),He&&He.m(l,s),v(l,ke,s),v(l,Ve,s),Be=!0,Ie||(Re=[w(Q,"click",Y),w(re,"click",M),w(de,"click",z),w(be,"click",e[3])],Ie=!0)},p(e,[a]){e[1].length>0?Se?Se.p(e,a):(Se=L(e),Se.c(),Se.m(S.parentNode,S)):Se&&(Se.d(1),Se=null),e[2].length>0?Ne?Ne.p(e,a):(Ne=$(e),Ne.c(),Ne.m(te.parentNode,te)):Ne&&(Ne.d(1),Ne=null),e[0].length>0?He?He.p(e,a):(He=P(e),He.c(),He.m(ke.parentNode,ke)):He&&(He.d(1),He=null)},i(e){Be||(x(t.$$.fragment,e),Be=!0)},o(e){C(t.$$.fragment,e),Be=!1},d(e){e&&h(a),k(t,e),e&&h(i),e&&h(g),e&&h(R),Se&&Se.d(e),e&&h(S),e&&h(N),e&&h(H),e&&h(O),e&&h(j),e&&h(J),e&&h(Z),e&&h(ee),e&&h(ae),Ne&&Ne.d(e),e&&h(te),e&&h(le),e&&h(se),e&&h(ne),e&&h(pe),e&&h(ve),e&&h(Ee),e&&h(we),e&&h(Te),e&&h(be),e&&h(De),e&&h(xe),e&&h(Ce),He&&He.d(e),e&&h(ke),e&&h(Ve),Ie=!1,u(Re)}}}function M(){}function z(){}function Q(e,a){let t=document.createElement("a");document.body.appendChild(t),t.style="display: none";let l=window.URL.createObjectURL(e);t.href=l,t.download=a,t.click(),window.URL.revokeObjectURL(l)}function Y(){let e=document.getElementById("editTable"),a=this.parentElement.nextElementSibling.firstElementChild.value;console.log(e,this,a);let t=e.children[1].childNodes;for(console.log("list of trs:",t,t.length),i=1;i<t.length;i++){t[i].style.display="none",console.log(t[i].getElementsByTagName("td")),td=t[i].getElementsByTagName("td");for(var l=0;l<td.length;l++)if(cell=t[i].getElementsByTagName("td")[l],cell&&cell.innerHTML.toUpperCase().indexOf(a)>-1){t[i].style.display="";break}}}function _(e,a,t){let l=[],s=[],n=[];function c(){R("/datasets/all",(function(e){let a=JSON.parse(e.response);a.data&&(H.success("Found data."),t(0,l=a.data),console.log("gridfsData",l))}))}return V((async()=>{c(),R("/capfile/all",(function(e){let a=JSON.parse(e.response);a.data&&(H.success("Found data."),t(1,s=a.data),console.log("capfileData",s))}))})),[l,s,n,c,function(){let e=this.parentElement.parentElement.parentElement.firstElementChild.innerText;S("/capfile/download","POST",{filepath:e},(function(e){Q(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let e=this.parentElement.parentElement.parentElement.firstElementChild.innerText;N("/capfile/edit","POST",{filepath:e},(function(e){e.data&&(t(2,n=e.data),console.log("editData:",n),H.success("Loading data successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let e=this.parentElement.parentElement.firstElementChild.innerText;S("/datasets/download","POST",{filename:e},(function(e){Q(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends e{constructor(e){super(),a(this,e,_,q,t,{})}}

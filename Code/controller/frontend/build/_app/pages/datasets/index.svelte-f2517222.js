import{S as e,i as a,s as l,e as t,t as s,k as n,c as o,a as c,g as r,d as i,n as h,b as d,N as f,f as p,F as u,G as w,h as v,M as g,j as m,L as E,m as b,o as x,v as y,r as C,w as T,Q as D,z as k,T as V}from"../../chunks/vendor-c052606d.js";import{T as F,x as R,n as I}from"../../chunks/requests-213c1aee.js";/* empty css                                                       */const{document:S}=V;function H(e,a,l){const t=e.slice();return t[3]=a[l],t[5]=l,t}function B(e,a,l){const t=e.slice();return t[6]=a[l],t[5]=l,t}function L(e){let a,l,w,v,m,E,b,x,y=e[1],C=[];for(let t=0;t<y.length;t+=1)C[t]=N(B(e,y,t));return{c(){a=t("div"),l=t("div"),w=t("table"),v=t("thead"),m=t("tr"),E=t("th"),b=s("File Path"),x=n();for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){a=o(e,"DIV",{class:!0});var t=c(a);l=o(t,"DIV",{class:!0});var s=c(l);w=o(s,"TABLE",{class:!0,style:!0});var n=c(w);v=o(n,"THEAD",{});var d=c(v);m=o(d,"TR",{class:!0});var f=c(m);E=o(f,"TH",{});var p=c(E);b=r(p,"File Path"),p.forEach(i),f.forEach(i),d.forEach(i),x=h(n);for(let a=0;a<C.length;a+=1)C[a].l(n);n.forEach(i),s.forEach(i),t.forEach(i),this.h()},h(){d(m,"class","w3-dark-grey"),d(w,"class","w3-table-all"),f(w,"width","100%"),d(l,"class","w3-responsive"),d(a,"class","w3-container")},m(e,t){p(e,a,t),u(a,l),u(l,w),u(w,v),u(v,m),u(m,E),u(E,b),u(w,x);for(let a=0;a<C.length;a+=1)C[a].m(w,null)},p(e,a){if(6&a){let l;for(y=e[1],l=0;l<y.length;l+=1){const t=B(e,y,l);C[l]?C[l].p(t,a):(C[l]=N(t),C[l].c(),C[l].m(w,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=y.length}},d(e){e&&i(a),g(C,e)}}}function N(e){let a,l,f,g,m,E,b=e[6]+"";return{c(){a=t("tr"),l=t("td"),f=s(b),g=n(),this.h()},l(e){a=o(e,"TR",{index:!0});var t=c(a);l=o(t,"TD",{});var s=c(l);f=r(s,b),s.forEach(i),g=h(t),t.forEach(i),this.h()},h(){d(a,"index",e[5])},m(t,s){p(t,a,s),u(a,l),u(l,f),u(a,g),m||(E=w(a,"click",e[2]),m=!0)},p(e,a){2&a&&b!==(b=e[6]+"")&&v(f,b)},d(e){e&&i(a),m=!1,E()}}}function U(e){let a,l,w,v,m,E,b,x,y=e[0],C=[];for(let t=0;t<y.length;t+=1)C[t]=$(H(e,y,t));return{c(){a=t("div"),l=t("div"),w=t("table"),v=t("thead"),m=t("tr"),E=t("th"),b=s("Filename"),x=n();for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){a=o(e,"DIV",{class:!0});var t=c(a);l=o(t,"DIV",{class:!0});var s=c(l);w=o(s,"TABLE",{class:!0,style:!0});var n=c(w);v=o(n,"THEAD",{});var d=c(v);m=o(d,"TR",{class:!0});var f=c(m);E=o(f,"TH",{});var p=c(E);b=r(p,"Filename"),p.forEach(i),f.forEach(i),d.forEach(i),x=h(n);for(let a=0;a<C.length;a+=1)C[a].l(n);n.forEach(i),s.forEach(i),t.forEach(i),this.h()},h(){d(m,"class","w3-dark-grey"),d(w,"class","w3-table-all"),f(w,"width","100%"),d(l,"class","w3-responsive"),d(a,"class","w3-container")},m(e,t){p(e,a,t),u(a,l),u(l,w),u(w,v),u(v,m),u(m,E),u(E,b),u(w,x);for(let a=0;a<C.length;a+=1)C[a].m(w,null)},p(e,a){if(1&a){let l;for(y=e[0],l=0;l<y.length;l+=1){const t=H(e,y,l);C[l]?C[l].p(t,a):(C[l]=$(t),C[l].c(),C[l].m(w,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=y.length}},d(e){e&&i(a),g(C,e)}}}function $(e){let a,l,f,g,m,E,b=e[3]+"";return{c(){a=t("tr"),l=t("td"),f=s(b),g=n(),this.h()},l(e){a=o(e,"TR",{index:!0});var t=c(a);l=o(t,"TD",{});var s=c(l);f=r(s,b),s.forEach(i),g=h(t),t.forEach(i),this.h()},h(){d(a,"index",e[5])},m(e,t){p(e,a,t),u(a,l),u(l,f),u(a,g),m||(E=w(a,"click",G),m=!0)},p(e,a){1&a&&b!==(b=e[3]+"")&&v(f,b)},d(e){e&&i(a),m=!1,E()}}}function O(e){let a,l,v,g,k,V,R,I,H,B,N,$,O,P,q,J,_,z,M,Q,K,W,X,Y,Z,ee,ae,le,te,se,ne,oe,ce,re,ie,he,de;l=new F({});let fe=e[1].length>0&&L(e),pe=e[0].length>0&&U(e);return{c(){a=n(),m(l.$$.fragment),v=n(),g=t("div"),k=t("h1"),V=t("b"),R=s("Capfiles"),I=n(),fe&&fe.c(),H=n(),B=t("button"),N=s("Download Capture File"),$=n(),O=t("hr"),P=n(),q=t("div"),J=t("h1"),_=t("b"),z=s("Edit Capfile Content"),M=s("\n\non click on capfiles, show another table of capfile content\n\n\n"),Q=t("button"),K=s("Convert to CSV"),W=n(),X=t("hr"),Y=n(),Z=t("div"),ee=t("h1"),ae=t("b"),le=s("CSV Files (stored in GridFS)"),te=n(),pe&&pe.c(),se=n(),ne=t("button"),oe=s("Download CSV"),ce=n(),re=t("hr"),this.h()},l(e){E('[data-svelte="svelte-qmgm2y"]',S.head).forEach(i),a=h(e),b(l.$$.fragment,e),v=h(e),g=o(e,"DIV",{class:!0});var t=c(g);k=o(t,"H1",{class:!0,style:!0});var s=c(k);V=o(s,"B",{});var n=c(V);R=r(n,"Capfiles"),n.forEach(i),s.forEach(i),t.forEach(i),I=h(e),fe&&fe.l(e),H=h(e),B=o(e,"BUTTON",{class:!0});var d=c(B);N=r(d,"Download Capture File"),d.forEach(i),$=h(e),O=o(e,"HR",{class:!0}),P=h(e),q=o(e,"DIV",{class:!0});var f=c(q);J=o(f,"H1",{class:!0,style:!0});var p=c(J);_=o(p,"B",{});var u=c(_);z=r(u,"Edit Capfile Content"),u.forEach(i),p.forEach(i),f.forEach(i),M=r(e,"\n\non click on capfiles, show another table of capfile content\n\n\n"),Q=o(e,"BUTTON",{class:!0});var w=c(Q);K=r(w,"Convert to CSV"),w.forEach(i),W=h(e),X=o(e,"HR",{class:!0}),Y=h(e),Z=o(e,"DIV",{class:!0});var m=c(Z);ee=o(m,"H1",{class:!0,style:!0});var x=c(ee);ae=o(x,"B",{});var y=c(ae);le=r(y,"CSV Files (stored in GridFS)"),y.forEach(i),x.forEach(i),m.forEach(i),te=h(e),pe&&pe.l(e),se=h(e),ne=o(e,"BUTTON",{class:!0});var C=c(ne);oe=r(C,"Download CSV"),C.forEach(i),ce=h(e),re=o(e,"HR",{class:!0}),this.h()},h(){S.title="Database",d(k,"class","w3-text-yellow"),f(k,"text-shadow","1px 1px 0 #444"),d(g,"class","w3-panel w3-blue"),d(B,"class","w3-col w3-input w3-border"),d(O,"class","svelte-lxonyp"),d(J,"class","w3-text-yellow"),f(J,"text-shadow","1px 1px 0 #444"),d(q,"class","w3-panel w3-blue"),d(Q,"class","w3-col w3-input w3-border"),d(X,"class","svelte-lxonyp"),d(ee,"class","w3-text-yellow"),f(ee,"text-shadow","1px 1px 0 #444"),d(Z,"class","w3-panel w3-blue"),d(ne,"class","w3-col w3-input w3-border"),d(re,"class","svelte-lxonyp")},m(e,t){p(e,a,t),x(l,e,t),p(e,v,t),p(e,g,t),u(g,k),u(k,V),u(V,R),p(e,I,t),fe&&fe.m(e,t),p(e,H,t),p(e,B,t),u(B,N),p(e,$,t),p(e,O,t),p(e,P,t),p(e,q,t),u(q,J),u(J,_),u(_,z),p(e,M,t),p(e,Q,t),u(Q,K),p(e,W,t),p(e,X,t),p(e,Y,t),p(e,Z,t),u(Z,ee),u(ee,ae),u(ae,le),p(e,te,t),pe&&pe.m(e,t),p(e,se,t),p(e,ne,t),u(ne,oe),p(e,ce,t),p(e,re,t),ie=!0,he||(de=[w(B,"click",j),w(Q,"click",A),w(ne,"click",G)],he=!0)},p(e,[a]){e[1].length>0?fe?fe.p(e,a):(fe=L(e),fe.c(),fe.m(H.parentNode,H)):fe&&(fe.d(1),fe=null),e[0].length>0?pe?pe.p(e,a):(pe=U(e),pe.c(),pe.m(se.parentNode,se)):pe&&(pe.d(1),pe=null)},i(e){ie||(y(l.$$.fragment,e),ie=!0)},o(e){C(l.$$.fragment,e),ie=!1},d(e){e&&i(a),T(l,e),e&&i(v),e&&i(g),e&&i(I),fe&&fe.d(e),e&&i(H),e&&i(B),e&&i($),e&&i(O),e&&i(P),e&&i(q),e&&i(M),e&&i(Q),e&&i(W),e&&i(X),e&&i(Y),e&&i(Z),e&&i(te),pe&&pe.d(e),e&&i(se),e&&i(ne),e&&i(ce),e&&i(re),he=!1,D(de)}}}function j(){}function A(){}function G(){}function P(e,a,l){let t=[],s=[];return k((async()=>{R("/allgridfs",(function(e){let a=JSON.parse(e.response);a.data&&(I.success("Found data."),l(0,t=a.data),console.log(t))})),R("/capfile/all",(function(e){let a=JSON.parse(e.response);a.data&&(I.success("Found data."),l(1,s=a.data),console.log(s))}))})),[t,s,function(){let e=document.getElementById("downloadLogfile").value,a=!1;console.log("download logfile",logfiles);for(let s=0;s<logfiles.length;s++)parseInt(e)==parseInt(logfiles[s]._id)&&(a=!0);if(!a)return void I.danger("Please specify an LogID.");let l="/download/db2/logfiles/"+e;var t=performance.now();R(l,(function(e){!function(e,a){let l=document.createElement("a");document.body.appendChild(l),l.style="display: none";let t=window.URL.createObjectURL(e);l.href=t,l.download=a,l.click(),window.URL.revokeObjectURL(t)}(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]));var a=performance.now();console.log("CSV Logfile download took "+(a-t)+" milliseconds.")}))}]}export default class extends e{constructor(e){super(),a(this,e,P,O,l,{})}}

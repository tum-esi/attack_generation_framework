import{S as a,i as e,s as t,e as l,t as s,k as n,c,a as r,g as o,d as i,n as h,b as f,N as d,f as p,F as v,G as w,h as E,Q as u,M as g,H as m,j as T,L as b,m as D,o as y,v as x,r as C,w as V,z as k,T as R}from"../../chunks/vendor-c052606d.js";import{T as I,x as H,g as S,a as F,n as B}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:N}=R;function U(a,e,t){const l=a.slice();return l[7]=e[t],l[9]=t,l}function O(a,e,t){const l=a.slice();return l[10]=e[t],l[9]=t,l}function A(a,e,t){const l=a.slice();return l[12]=e[t],l[9]=t,l}function L(a){let e,t,w,E,u,m,T,b,D,y,x,C=a[1],V=[];for(let l=0;l<C.length;l+=1)V[l]=G(A(a,C,l));return{c(){e=l("div"),t=l("div"),w=l("table"),E=l("thead"),u=l("tr"),m=l("th"),T=s("Filename"),b=n(),D=l("th"),y=s("Actions"),x=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);w=c(s,"TABLE",{class:!0,style:!0});var n=r(w);E=c(n,"THEAD",{});var f=r(E);u=c(f,"TR",{class:!0});var d=r(u);m=c(d,"TH",{class:!0});var p=r(m);T=o(p,"Filename"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var v=r(D);y=o(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),x=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(D,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){p(a,e,l),v(e,t),v(t,w),v(w,E),v(E,u),v(u,m),v(m,T),v(u,b),v(u,D),v(D,y),v(w,x);for(let e=0;e<V.length;e+=1)V[e].m(w,null)},p(a,e){if(50&e){let t;for(C=a[1],t=0;t<C.length;t+=1){const l=A(a,C,t);V[t]?V[t].p(l,e):(V[t]=G(l),V[t].c(),V[t].m(w,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=C.length}},d(a){a&&i(e),g(V,a)}}}function G(a){let e,t,d,g,m,T,b,D,y,x,C,V,k,R,I=a[12]+"";return{c(){e=l("tr"),t=l("td"),d=s(I),g=n(),m=l("td"),T=l("div"),b=l("button"),D=s("Edit"),y=n(),x=l("button"),C=s("Download"),V=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);d=o(s,I),s.forEach(i),g=h(l),m=c(l,"TD",{class:!0});var n=r(m);T=c(n,"DIV",{});var f=r(T);b=c(f,"BUTTON",{index:!0});var p=r(b);D=o(p,"Edit"),p.forEach(i),y=h(f),x=c(f,"BUTTON",{index:!0});var v=r(x);C=o(v,"Download"),v.forEach(i),f.forEach(i),n.forEach(i),V=h(l),l.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(b,"index",a[9]),f(x,"index",a[9]),f(m,"class","w3-right-align")},m(l,s){p(l,e,s),v(e,t),v(t,d),v(e,g),v(e,m),v(m,T),v(T,b),v(b,D),v(T,y),v(T,x),v(x,C),v(e,V),k||(R=[w(b,"click",a[5]),w(x,"click",a[4])],k=!0)},p(a,e){2&e&&I!==(I=a[12]+"")&&E(d,I)},d(a){a&&i(e),k=!1,u(R)}}}function $(a){let e,t,w,E,u,m,T,b,D,y,x,C=a[1],V=[];for(let l=0;l<C.length;l+=1)V[l]=j(O(a,C,l));return{c(){e=l("div"),t=l("div"),w=l("table"),E=l("thead"),u=l("tr"),m=l("th"),T=s("Content"),b=n(),D=l("th"),y=s("Labels"),x=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);w=c(s,"TABLE",{class:!0,style:!0});var n=r(w);E=c(n,"THEAD",{});var f=r(E);u=c(f,"TR",{class:!0});var d=r(u);m=c(d,"TH",{class:!0});var p=r(m);T=o(p,"Content"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var v=r(D);y=o(v,"Labels"),v.forEach(i),d.forEach(i),f.forEach(i),x=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(D,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){p(a,e,l),v(e,t),v(t,w),v(w,E),v(E,u),v(u,m),v(m,T),v(u,b),v(u,D),v(D,y),v(w,x);for(let e=0;e<V.length;e+=1)V[e].m(w,null)},p(a,e){if(4098&e){let t;for(C=a[1],t=0;t<C.length;t+=1){const l=O(a,C,t);V[t]?V[t].p(l,e):(V[t]=j(),V[t].c(),V[t].m(w,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=C.length}},d(a){a&&i(e),g(V,a)}}}function j(a){let e,t,d,w,E,u,g,T;return{c(){e=l("tr"),t=l("td"),d=s(filepath),w=n(),E=l("td"),u=l("div"),g=l("input"),T=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);d=o(s,filepath),s.forEach(i),w=h(l),E=c(l,"TD",{class:!0});var n=r(E);u=c(n,"DIV",{});var f=r(u);g=c(f,"INPUT",{class:!0,type:!0,checked:!0,name:!0}),f.forEach(i),n.forEach(i),T=h(l),l.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(g,"class","w3-check"),f(g,"type","checkbox"),g.checked="",f(g,"name",obj.name),f(E,"class","w3-right-align")},m(a,l){p(a,e,l),v(e,t),v(t,d),v(e,w),v(e,E),v(E,u),v(u,g),v(e,T)},p:m,d(a){a&&i(e)}}}function P(a){let e,t,w,E,u,m,T,b,D,y,x,C=a[0],V=[];for(let l=0;l<C.length;l+=1)V[l]=q(U(a,C,l));return{c(){e=l("div"),t=l("div"),w=l("table"),E=l("thead"),u=l("tr"),m=l("th"),T=s("Filename"),b=n(),D=l("th"),y=s("Actions"),x=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);w=c(s,"TABLE",{class:!0,style:!0});var n=r(w);E=c(n,"THEAD",{});var f=r(E);u=c(f,"TR",{class:!0});var d=r(u);m=c(d,"TH",{class:!0});var p=r(m);T=o(p,"Filename"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var v=r(D);y=o(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),x=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(D,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){p(a,e,l),v(e,t),v(t,w),v(w,E),v(E,u),v(u,m),v(m,T),v(u,b),v(u,D),v(D,y),v(w,x);for(let e=0;e<V.length;e+=1)V[e].m(w,null)},p(a,e){if(65&e){let t;for(C=a[0],t=0;t<C.length;t+=1){const l=U(a,C,t);V[t]?V[t].p(l,e):(V[t]=q(l),V[t].c(),V[t].m(w,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=C.length}},d(a){a&&i(e),g(V,a)}}}function q(a){let e,t,d,u,g,m,T,b,D,y,x=a[7]+"";return{c(){e=l("tr"),t=l("td"),d=s(x),u=n(),g=l("td"),m=l("button"),T=s("Download"),b=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);d=o(s,x),s.forEach(i),u=h(l),g=c(l,"TD",{class:!0});var n=r(g);m=c(n,"BUTTON",{index:!0});var f=r(m);T=o(f,"Download"),f.forEach(i),n.forEach(i),b=h(l),l.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(m,"index",a[9]),f(g,"class","w3-right-align")},m(l,s){p(l,e,s),v(e,t),v(t,d),v(e,u),v(e,g),v(g,m),v(m,T),v(e,b),D||(y=w(m,"click",a[6]),D=!0)},p(a,e){1&e&&x!==(x=a[7]+"")&&E(d,x)},d(a){a&&i(e),D=!1,y()}}}function J(a){let e,t,E,g,m,k,R,H,S,F,B,U,O,A,G,j,q,J,Q,K,W,X,Y,Z,aa,ea,ta,la,sa,na,ca,ra,oa,ia,ha,fa,da,pa,va,wa,Ea,ua,ga,ma,Ta,ba,Da,ya,xa,Ca,Va,ka,Ra,Ia,Ha;t=new I({});let Sa=a[1].length>0&&L(a),Fa=a[2].length>0&&$(a),Ba=a[0].length>0&&P(a);return{c(){e=n(),T(t.$$.fragment),E=n(),g=l("div"),m=l("h1"),k=l("b"),R=s("Capfiles"),H=n(),Sa&&Sa.c(),S=n(),F=l("hr"),B=n(),U=l("div"),O=l("h1"),A=l("b"),G=s("Edit Capfile Content"),j=s('\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),q=l("div"),J=l("div"),Q=l("button"),K=s("Apply Filter"),W=n(),X=l("div"),Y=l("input"),Z=n(),aa=l("br"),ea=n(),Fa&&Fa.c(),ta=n(),la=l("br"),sa=n(),na=l("div"),ca=l("div"),ra=l("button"),oa=s("Convert to CSV and Store to GridFs"),ia=n(),ha=l("div"),fa=l("button"),da=s("Download Table as CSV"),pa=n(),va=l("hr"),wa=n(),Ea=l("div"),ua=l("h1"),ga=l("b"),ma=s("Gridfs Files (CSVs stored in GridFS)"),Ta=n(),ba=l("button"),Da=s("Reload GrifFS"),ya=n(),xa=l("hr"),Ca=n(),Ba&&Ba.c(),Va=n(),ka=l("hr"),this.h()},l(a){b('[data-svelte="svelte-qmgm2y"]',N.head).forEach(i),e=h(a),D(t.$$.fragment,a),E=h(a),g=c(a,"DIV",{class:!0});var l=r(g);m=c(l,"H1",{class:!0,style:!0});var s=r(m);k=c(s,"B",{});var n=r(k);R=o(n,"Capfiles"),n.forEach(i),s.forEach(i),l.forEach(i),H=h(a),Sa&&Sa.l(a),S=h(a),F=c(a,"HR",{class:!0}),B=h(a),U=c(a,"DIV",{class:!0});var f=r(U);O=c(f,"H1",{class:!0,style:!0});var d=r(O);A=c(d,"B",{});var p=r(A);G=o(p,"Edit Capfile Content"),p.forEach(i),d.forEach(i),f.forEach(i),j=o(a,'\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),q=c(a,"DIV",{class:!0});var v=r(q);J=c(v,"DIV",{class:!0});var w=r(J);Q=c(w,"BUTTON",{ref:!0,class:!0});var u=r(Q);K=o(u,"Apply Filter"),u.forEach(i),w.forEach(i),W=h(v),X=c(v,"DIV",{class:!0});var T=r(X);Y=c(T,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),T.forEach(i),v.forEach(i),Z=h(a),aa=c(a,"BR",{}),ea=h(a),Fa&&Fa.l(a),ta=h(a),la=c(a,"BR",{}),sa=h(a),na=c(a,"DIV",{class:!0});var y=r(na);ca=c(y,"DIV",{class:!0});var x=r(ca);ra=c(x,"BUTTON",{class:!0});var C=r(ra);oa=o(C,"Convert to CSV and Store to GridFs"),C.forEach(i),x.forEach(i),ia=h(y),ha=c(y,"DIV",{class:!0});var V=r(ha);fa=c(V,"BUTTON",{class:!0});var I=r(fa);da=o(I,"Download Table as CSV"),I.forEach(i),V.forEach(i),y.forEach(i),pa=h(a),va=c(a,"HR",{class:!0}),wa=h(a),Ea=c(a,"DIV",{class:!0});var L=r(Ea);ua=c(L,"H1",{class:!0,style:!0});var $=r(ua);ga=c($,"B",{});var P=r(ga);ma=o(P,"Gridfs Files (CSVs stored in GridFS)"),P.forEach(i),$.forEach(i),L.forEach(i),Ta=h(a),ba=c(a,"BUTTON",{class:!0});var z=r(ba);Da=o(z,"Reload GrifFS"),z.forEach(i),ya=h(a),xa=c(a,"HR",{class:!0}),Ca=h(a),Ba&&Ba.l(a),Va=h(a),ka=c(a,"HR",{class:!0}),this.h()},h(){N.title="Database",f(m,"class","w3-text-yellow"),d(m,"text-shadow","1px 1px 0 #444"),f(g,"class","w3-panel w3-blue"),f(F,"class","svelte-lxonyp"),f(O,"class","w3-text-yellow"),d(O,"text-shadow","1px 1px 0 #444"),f(U,"class","w3-panel w3-blue"),f(Q,"ref","filterTable"),f(Q,"class","w3-col w3-input w3-border"),f(J,"class","w3-third"),f(Y,"id","filterTable"),f(Y,"class","w3-input w3-border"),f(Y,"name","name"),f(Y,"type","text"),f(Y,"placeholder","Filter String"),f(X,"class","w3-rest"),f(q,"class","w3-row w3-section"),f(ra,"class","w3-col w3-input w3-border"),f(ca,"class","w3-half"),f(fa,"class","w3-col w3-input w3-border"),f(ha,"class","w3-half"),f(na,"class","w3-row w3-section"),f(va,"class","svelte-lxonyp"),f(ua,"class","w3-text-yellow"),d(ua,"text-shadow","1px 1px 0 #444"),f(Ea,"class","w3-panel w3-blue"),f(ba,"class","w3-col w3-input w3-border"),f(xa,"class","svelte-lxonyp"),f(ka,"class","svelte-lxonyp")},m(l,s){p(l,e,s),y(t,l,s),p(l,E,s),p(l,g,s),v(g,m),v(m,k),v(k,R),p(l,H,s),Sa&&Sa.m(l,s),p(l,S,s),p(l,F,s),p(l,B,s),p(l,U,s),v(U,O),v(O,A),v(A,G),p(l,j,s),p(l,q,s),v(q,J),v(J,Q),v(Q,K),v(q,W),v(q,X),v(X,Y),p(l,Z,s),p(l,aa,s),p(l,ea,s),Fa&&Fa.m(l,s),p(l,ta,s),p(l,la,s),p(l,sa,s),p(l,na,s),v(na,ca),v(ca,ra),v(ra,oa),v(na,ia),v(na,ha),v(ha,fa),v(fa,da),p(l,pa,s),p(l,va,s),p(l,wa,s),p(l,Ea,s),v(Ea,ua),v(ua,ga),v(ga,ma),p(l,Ta,s),p(l,ba,s),v(ba,Da),p(l,ya,s),p(l,xa,s),p(l,Ca,s),Ba&&Ba.m(l,s),p(l,Va,s),p(l,ka,s),Ra=!0,Ia||(Ha=[w(Q,"click",_),w(ra,"click",z),w(fa,"click",M),w(ba,"click",a[3])],Ia=!0)},p(a,[e]){a[1].length>0?Sa?Sa.p(a,e):(Sa=L(a),Sa.c(),Sa.m(S.parentNode,S)):Sa&&(Sa.d(1),Sa=null),a[2].length>0?Fa?Fa.p(a,e):(Fa=$(a),Fa.c(),Fa.m(ta.parentNode,ta)):Fa&&(Fa.d(1),Fa=null),a[0].length>0?Ba?Ba.p(a,e):(Ba=P(a),Ba.c(),Ba.m(Va.parentNode,Va)):Ba&&(Ba.d(1),Ba=null)},i(a){Ra||(x(t.$$.fragment,a),Ra=!0)},o(a){C(t.$$.fragment,a),Ra=!1},d(a){a&&i(e),V(t,a),a&&i(E),a&&i(g),a&&i(H),Sa&&Sa.d(a),a&&i(S),a&&i(F),a&&i(B),a&&i(U),a&&i(j),a&&i(q),a&&i(Z),a&&i(aa),a&&i(ea),Fa&&Fa.d(a),a&&i(ta),a&&i(la),a&&i(sa),a&&i(na),a&&i(pa),a&&i(va),a&&i(wa),a&&i(Ea),a&&i(Ta),a&&i(ba),a&&i(ya),a&&i(xa),a&&i(Ca),Ba&&Ba.d(a),a&&i(Va),a&&i(ka),Ia=!1,u(Ha)}}}function z(){}function M(){}function Q(a,e){let t=document.createElement("a");document.body.appendChild(t),t.style="display: none";let l=window.URL.createObjectURL(a);t.href=l,t.download=e,t.click(),window.URL.revokeObjectURL(l)}function _(){}function K(a,e,t){let l=[],s=[],n=[];function c(){H("/gridfs/all",(function(a){let e=JSON.parse(a.response);e.data&&(B.success("Found data."),t(0,l=e.data),console.log("gridfsData",l))}))}return k((async()=>{c(),H("/capfile/all",(function(a){let e=JSON.parse(a.response);e.data&&(B.success("Found data."),t(1,s=e.data),console.log("capfileData",s))}))})),[l,s,n,c,function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;S("/capfile/download","POST",{filepath:a},(function(a){Q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;F("/capfile/edit","POST",{filepath:a},(function(a){a.data&&(t(2,n=a.data),console.log("editData:",n),B.success("Configuration update successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let a=this.parentElement.parentElement.firstElementChild.innerText;S("/gridfs/download","POST",{filename:a},(function(a){Q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends a{constructor(a){super(),e(this,a,K,J,t,{})}}

import{S as a,i as e,s as t,e as l,t as s,k as n,c,a as r,g as o,d as i,n as h,b as f,N as d,f as p,F as v,G as w,h as u,Q as E,M as g,v as m,j as T,m as b,o as D,r as x,w as y,u as C,L as V,z as k,T as R,B as I,a7 as B}from"../../chunks/vendor-ec26e987.js";import{T as S,x as F,g as H,a as $,n as N}from"../../chunks/requests-82ec7c4e.js";/* empty css                                                       */const{document:U}=R;function O(a,e,t){const l=a.slice();return l[7]=e[t],l[9]=t,l}function A(a,e,t){const l=a.slice();return l[10]=e[t],l[9]=t,l}function L(a,e,t){const l=a.slice();return l[12]=e[t],l[9]=t,l}function G(a){let e,t,w,u,E,m,T,b,D,x,y,C=a[1],V=[];for(let l=0;l<C.length;l+=1)V[l]=j(L(a,C,l));return{c(){e=l("div"),t=l("div"),w=l("table"),u=l("thead"),E=l("tr"),m=l("th"),T=s("Filename"),b=n(),D=l("th"),x=s("Actions"),y=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);w=c(s,"TABLE",{class:!0,style:!0});var n=r(w);u=c(n,"THEAD",{});var f=r(u);E=c(f,"TR",{class:!0});var d=r(E);m=c(d,"TH",{class:!0});var p=r(m);T=o(p,"Filename"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var v=r(D);x=o(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),y=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(D,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){p(a,e,l),v(e,t),v(t,w),v(w,u),v(u,E),v(E,m),v(m,T),v(E,b),v(E,D),v(D,x),v(w,y);for(let e=0;e<V.length;e+=1)V[e].m(w,null)},p(a,e){if(50&e){let t;for(C=a[1],t=0;t<C.length;t+=1){const l=L(a,C,t);V[t]?V[t].p(l,e):(V[t]=j(l),V[t].c(),V[t].m(w,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=C.length}},d(a){a&&i(e),g(V,a)}}}function j(a){let e,t,d,g,m,T,b,D,x,y,C,V,k,R,I=a[12]+"";return{c(){e=l("tr"),t=l("td"),d=s(I),g=n(),m=l("td"),T=l("div"),b=l("button"),D=s("Edit"),x=n(),y=l("button"),C=s("Download"),V=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);d=o(s,I),s.forEach(i),g=h(l),m=c(l,"TD",{class:!0});var n=r(m);T=c(n,"DIV",{});var f=r(T);b=c(f,"BUTTON",{index:!0});var p=r(b);D=o(p,"Edit"),p.forEach(i),x=h(f),y=c(f,"BUTTON",{index:!0});var v=r(y);C=o(v,"Download"),v.forEach(i),f.forEach(i),n.forEach(i),V=h(l),l.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(b,"index",a[9]),f(y,"index",a[9]),f(m,"class","w3-right-align")},m(l,s){p(l,e,s),v(e,t),v(t,d),v(e,g),v(e,m),v(m,T),v(T,b),v(b,D),v(T,x),v(T,y),v(y,C),v(e,V),k||(R=[w(b,"click",a[5]),w(y,"click",a[4])],k=!0)},p(a,e){2&e&&I!==(I=a[12]+"")&&u(d,I)},d(a){a&&i(e),k=!1,E(R)}}}function P(a){let e,t,w,u,E,T,b,D,y,V,k,R,B=a[2],S=[];for(let l=0;l<B.length;l+=1)S[l]=J(A(a,B,l));const F=a=>x(S[a],1,1,(()=>{S[a]=null}));return{c(){e=l("div"),t=l("div"),w=l("table"),u=l("thead"),E=l("tr"),T=l("th"),b=s("Content"),D=n(),y=l("th"),V=s("Labels"),k=n();for(let a=0;a<S.length;a+=1)S[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);w=c(s,"TABLE",{class:!0,style:!0});var n=r(w);u=c(n,"THEAD",{});var f=r(u);E=c(f,"TR",{class:!0});var d=r(E);T=c(d,"TH",{class:!0});var p=r(T);b=o(p,"Content"),p.forEach(i),D=h(d),y=c(d,"TH",{class:!0});var v=r(y);V=o(v,"Labels"),v.forEach(i),d.forEach(i),f.forEach(i),k=h(n);for(let e=0;e<S.length;e+=1)S[e].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){f(T,"class","w3-left-align"),f(y,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){p(a,e,l),v(e,t),v(t,w),v(w,u),v(u,E),v(E,T),v(T,b),v(E,D),v(E,y),v(y,V),v(w,k);for(let e=0;e<S.length;e+=1)S[e].m(w,null);R=!0},p(a,e){if(4&e){let t;for(B=a[2],t=0;t<B.length;t+=1){const l=A(a,B,t);S[t]?(S[t].p(l,e),m(S[t],1)):(S[t]=J(l),S[t].c(),m(S[t],1),S[t].m(w,null))}for(I(),t=B.length;t<S.length;t+=1)F(t);C()}},i(a){if(!R){for(let a=0;a<B.length;a+=1)m(S[a]);R=!0}},o(a){S=S.filter(Boolean);for(let e=0;e<S.length;e+=1)x(S[e]);R=!1},d(a){a&&i(e),g(S,a)}}}function J(a){let e,t,s,o,d,w,u,E,g;return s=new B({props:{editJson:a[10]}}),{c(){e=l("tr"),t=l("td"),T(s.$$.fragment),o=n(),d=l("td"),w=l("div"),u=l("input"),E=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var n=r(t);b(s.$$.fragment,n),n.forEach(i),o=h(l),d=c(l,"TD",{class:!0});var f=r(d);w=c(f,"DIV",{});var p=r(w);u=c(p,"INPUT",{class:!0,type:!0,checked:!0,index:!0}),p.forEach(i),f.forEach(i),E=h(l),l.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(u,"class","w3-check"),f(u,"type","checkbox"),u.checked="",f(u,"index",a[9]),f(d,"class","w3-right-align")},m(a,l){p(a,e,l),v(e,t),D(s,t,null),v(e,o),v(e,d),v(d,w),v(w,u),v(e,E),g=!0},p(a,e){const t={};4&e&&(t.editJson=a[10]),s.$set(t)},i(a){g||(m(s.$$.fragment,a),g=!0)},o(a){x(s.$$.fragment,a),g=!1},d(a){a&&i(e),y(s)}}}function q(a){let e,t,w,u,E,m,T,b,D,x,y,C=a[0],V=[];for(let l=0;l<C.length;l+=1)V[l]=z(O(a,C,l));return{c(){e=l("div"),t=l("div"),w=l("table"),u=l("thead"),E=l("tr"),m=l("th"),T=s("Filename"),b=n(),D=l("th"),x=s("Actions"),y=n();for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);w=c(s,"TABLE",{class:!0,style:!0});var n=r(w);u=c(n,"THEAD",{});var f=r(u);E=c(f,"TR",{class:!0});var d=r(E);m=c(d,"TH",{class:!0});var p=r(m);T=o(p,"Filename"),p.forEach(i),b=h(d),D=c(d,"TH",{class:!0});var v=r(D);x=o(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),y=h(n);for(let e=0;e<V.length;e+=1)V[e].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(D,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(w,"class","w3-table-all"),d(w,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){p(a,e,l),v(e,t),v(t,w),v(w,u),v(u,E),v(E,m),v(m,T),v(E,b),v(E,D),v(D,x),v(w,y);for(let e=0;e<V.length;e+=1)V[e].m(w,null)},p(a,e){if(65&e){let t;for(C=a[0],t=0;t<C.length;t+=1){const l=O(a,C,t);V[t]?V[t].p(l,e):(V[t]=z(l),V[t].c(),V[t].m(w,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=C.length}},d(a){a&&i(e),g(V,a)}}}function z(a){let e,t,d,E,g,m,T,b,D,x,y=a[7]+"";return{c(){e=l("tr"),t=l("td"),d=s(y),E=n(),g=l("td"),m=l("button"),T=s("Download"),b=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);d=o(s,y),s.forEach(i),E=h(l),g=c(l,"TD",{class:!0});var n=r(g);m=c(n,"BUTTON",{index:!0});var f=r(m);T=o(f,"Download"),f.forEach(i),n.forEach(i),b=h(l),l.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(m,"index",a[9]),f(g,"class","w3-right-align")},m(l,s){p(l,e,s),v(e,t),v(t,d),v(e,E),v(e,g),v(g,m),v(m,T),v(e,b),D||(x=w(m,"click",a[6]),D=!0)},p(a,e){1&e&&y!==(y=a[7]+"")&&u(d,y)},d(a){a&&i(e),D=!1,x()}}}function M(a){let e,t,u,g,k,R,B,F,H,$,N,O,A,L,j,J,z,M,K,X,Y,Z,aa,ea,ta,la,sa,na,ca,ra,oa,ia,ha,fa,da,pa,va,wa,ua,Ea,ga,ma,Ta,ba,Da,xa,ya,Ca,Va,ka,Ra,Ia,Ba,Sa,Fa;t=new S({});let Ha=a[1].length>0&&G(a),$a=a[2].length>0&&P(a),Na=a[0].length>0&&q(a);return{c(){e=n(),T(t.$$.fragment),u=n(),g=l("div"),k=l("h1"),R=l("b"),B=s("Capfiles"),F=n(),Ha&&Ha.c(),H=n(),$=l("hr"),N=n(),O=l("div"),A=l("h1"),L=l("b"),j=s("Edit Capfile Content"),J=s('\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),z=l("div"),M=l("div"),K=l("button"),X=s("Apply Filter"),Y=n(),Z=l("div"),aa=l("input"),ea=n(),ta=l("br"),la=n(),$a&&$a.c(),sa=n(),na=l("br"),ca=n(),ra=l("div"),oa=l("div"),ia=l("button"),ha=s("Convert to CSV and Store to GridFs"),fa=n(),da=l("div"),pa=l("button"),va=s("Download Table as CSV"),wa=n(),ua=l("hr"),Ea=n(),ga=l("div"),ma=l("h1"),Ta=l("b"),ba=s("Gridfs Files (CSVs stored in GridFS)"),Da=n(),xa=l("button"),ya=s("Reload GrifFS"),Ca=n(),Va=l("hr"),ka=n(),Na&&Na.c(),Ra=n(),Ia=l("hr"),this.h()},l(a){V('[data-svelte="svelte-qmgm2y"]',U.head).forEach(i),e=h(a),b(t.$$.fragment,a),u=h(a),g=c(a,"DIV",{class:!0});var l=r(g);k=c(l,"H1",{class:!0,style:!0});var s=r(k);R=c(s,"B",{});var n=r(R);B=o(n,"Capfiles"),n.forEach(i),s.forEach(i),l.forEach(i),F=h(a),Ha&&Ha.l(a),H=h(a),$=c(a,"HR",{class:!0}),N=h(a),O=c(a,"DIV",{class:!0});var f=r(O);A=c(f,"H1",{class:!0,style:!0});var d=r(A);L=c(d,"B",{});var p=r(L);j=o(p,"Edit Capfile Content"),p.forEach(i),d.forEach(i),f.forEach(i),J=o(a,'\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),z=c(a,"DIV",{class:!0});var v=r(z);M=c(v,"DIV",{class:!0});var w=r(M);K=c(w,"BUTTON",{ref:!0,class:!0});var E=r(K);X=o(E,"Apply Filter"),E.forEach(i),w.forEach(i),Y=h(v),Z=c(v,"DIV",{class:!0});var m=r(Z);aa=c(m,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),m.forEach(i),v.forEach(i),ea=h(a),ta=c(a,"BR",{}),la=h(a),$a&&$a.l(a),sa=h(a),na=c(a,"BR",{}),ca=h(a),ra=c(a,"DIV",{class:!0});var T=r(ra);oa=c(T,"DIV",{class:!0});var D=r(oa);ia=c(D,"BUTTON",{class:!0});var x=r(ia);ha=o(x,"Convert to CSV and Store to GridFs"),x.forEach(i),D.forEach(i),fa=h(T),da=c(T,"DIV",{class:!0});var y=r(da);pa=c(y,"BUTTON",{class:!0});var C=r(pa);va=o(C,"Download Table as CSV"),C.forEach(i),y.forEach(i),T.forEach(i),wa=h(a),ua=c(a,"HR",{class:!0}),Ea=h(a),ga=c(a,"DIV",{class:!0});var I=r(ga);ma=c(I,"H1",{class:!0,style:!0});var S=r(ma);Ta=c(S,"B",{});var G=r(Ta);ba=o(G,"Gridfs Files (CSVs stored in GridFS)"),G.forEach(i),S.forEach(i),I.forEach(i),Da=h(a),xa=c(a,"BUTTON",{class:!0});var P=r(xa);ya=o(P,"Reload GrifFS"),P.forEach(i),Ca=h(a),Va=c(a,"HR",{class:!0}),ka=h(a),Na&&Na.l(a),Ra=h(a),Ia=c(a,"HR",{class:!0}),this.h()},h(){U.title="Database",f(k,"class","w3-text-yellow"),d(k,"text-shadow","1px 1px 0 #444"),f(g,"class","w3-panel w3-blue"),f($,"class","svelte-lxonyp"),f(A,"class","w3-text-yellow"),d(A,"text-shadow","1px 1px 0 #444"),f(O,"class","w3-panel w3-blue"),f(K,"ref","filterTable"),f(K,"class","w3-col w3-input w3-border"),f(M,"class","w3-third"),f(aa,"id","filterTable"),f(aa,"class","w3-input w3-border"),f(aa,"name","name"),f(aa,"type","text"),f(aa,"placeholder","Filter String"),f(Z,"class","w3-rest"),f(z,"class","w3-row w3-section"),f(ia,"class","w3-col w3-input w3-border"),f(oa,"class","w3-half"),f(pa,"class","w3-col w3-input w3-border"),f(da,"class","w3-half"),f(ra,"class","w3-row w3-section"),f(ua,"class","svelte-lxonyp"),f(ma,"class","w3-text-yellow"),d(ma,"text-shadow","1px 1px 0 #444"),f(ga,"class","w3-panel w3-blue"),f(xa,"class","w3-col w3-input w3-border"),f(Va,"class","svelte-lxonyp"),f(Ia,"class","svelte-lxonyp")},m(l,s){p(l,e,s),D(t,l,s),p(l,u,s),p(l,g,s),v(g,k),v(k,R),v(R,B),p(l,F,s),Ha&&Ha.m(l,s),p(l,H,s),p(l,$,s),p(l,N,s),p(l,O,s),v(O,A),v(A,L),v(L,j),p(l,J,s),p(l,z,s),v(z,M),v(M,K),v(K,X),v(z,Y),v(z,Z),v(Z,aa),p(l,ea,s),p(l,ta,s),p(l,la,s),$a&&$a.m(l,s),p(l,sa,s),p(l,na,s),p(l,ca,s),p(l,ra,s),v(ra,oa),v(oa,ia),v(ia,ha),v(ra,fa),v(ra,da),v(da,pa),v(pa,va),p(l,wa,s),p(l,ua,s),p(l,Ea,s),p(l,ga,s),v(ga,ma),v(ma,Ta),v(Ta,ba),p(l,Da,s),p(l,xa,s),v(xa,ya),p(l,Ca,s),p(l,Va,s),p(l,ka,s),Na&&Na.m(l,s),p(l,Ra,s),p(l,Ia,s),Ba=!0,Sa||(Fa=[w(K,"click",W),w(ia,"click",Q),w(pa,"click",_),w(xa,"click",a[3])],Sa=!0)},p(a,[e]){a[1].length>0?Ha?Ha.p(a,e):(Ha=G(a),Ha.c(),Ha.m(H.parentNode,H)):Ha&&(Ha.d(1),Ha=null),a[2].length>0?$a?($a.p(a,e),4&e&&m($a,1)):($a=P(a),$a.c(),m($a,1),$a.m(sa.parentNode,sa)):$a&&(I(),x($a,1,1,(()=>{$a=null})),C()),a[0].length>0?Na?Na.p(a,e):(Na=q(a),Na.c(),Na.m(Ra.parentNode,Ra)):Na&&(Na.d(1),Na=null)},i(a){Ba||(m(t.$$.fragment,a),m($a),Ba=!0)},o(a){x(t.$$.fragment,a),x($a),Ba=!1},d(a){a&&i(e),y(t,a),a&&i(u),a&&i(g),a&&i(F),Ha&&Ha.d(a),a&&i(H),a&&i($),a&&i(N),a&&i(O),a&&i(J),a&&i(z),a&&i(ea),a&&i(ta),a&&i(la),$a&&$a.d(a),a&&i(sa),a&&i(na),a&&i(ca),a&&i(ra),a&&i(wa),a&&i(ua),a&&i(Ea),a&&i(ga),a&&i(Da),a&&i(xa),a&&i(Ca),a&&i(Va),a&&i(ka),Na&&Na.d(a),a&&i(Ra),a&&i(Ia),Sa=!1,E(Fa)}}}function Q(){}function _(){}function K(a,e){let t=document.createElement("a");document.body.appendChild(t),t.style="display: none";let l=window.URL.createObjectURL(a);t.href=l,t.download=e,t.click(),window.URL.revokeObjectURL(l)}function W(){}function X(a,e,t){let l=[],s=[],n=[];function c(){F("/gridfs/all",(function(a){let e=JSON.parse(a.response);e.data&&(N.success("Found data."),t(0,l=e.data),console.log("gridfsData",l))}))}return k((async()=>{c(),F("/capfile/all",(function(a){let e=JSON.parse(a.response);e.data&&(N.success("Found data."),t(1,s=e.data),console.log("capfileData",s))}))})),[l,s,n,c,function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;H("/capfile/download","POST",{filepath:a},(function(a){K(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;$("/capfile/edit","POST",{filepath:a},(function(a){a.data&&(t(2,n=a.data),console.log("editData:",n),N.success("Configuration update successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let a=this.parentElement.parentElement.firstElementChild.innerText;H("/gridfs/download","POST",{filename:a},(function(a){K(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends a{constructor(a){super(),e(this,a,X,M,t,{})}}

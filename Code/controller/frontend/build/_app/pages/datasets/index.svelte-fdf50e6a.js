import{S as a,i as l,s as e,e as s,t,k as n,c as o,a as c,g as r,d as i,n as h,b as f,N as d,f as g,F as p,G as v,h as w,Q as u,M as E,j as m,L as x,m as T,o as b,v as y,r as D,w as k,z as C,T as H}from"../../chunks/vendor-c052606d.js";import{T as R,x as I,n as V}from"../../chunks/requests-213c1aee.js";/* empty css                                                       */const{document:B}=H;function F(a,l,e){const s=a.slice();return s[3]=l[e],s[5]=e,s}function L(a,l,e){const s=a.slice();return s[6]=l[e],s[5]=e,s}function S(a){let l,e,v,w,u,m,x,T,b,y,D,k=a[1],C=[];for(let s=0;s<k.length;s+=1)C[s]=N(L(a,k,s));return{c(){l=s("div"),e=s("div"),v=s("table"),w=s("thead"),u=s("tr"),m=s("th"),x=t("Filename"),T=n(),b=s("th"),y=t("Actions"),D=n();for(let a=0;a<C.length;a+=1)C[a].c();this.h()},l(a){l=o(a,"DIV",{class:!0});var s=c(l);e=o(s,"DIV",{class:!0});var t=c(e);v=o(t,"TABLE",{class:!0,style:!0});var n=c(v);w=o(n,"THEAD",{});var f=c(w);u=o(f,"TR",{class:!0});var d=c(u);m=o(d,"TH",{class:!0});var g=c(m);x=r(g,"Filename"),g.forEach(i),T=h(d),b=o(d,"TH",{class:!0});var p=c(b);y=r(p,"Actions"),p.forEach(i),d.forEach(i),f.forEach(i),D=h(n);for(let l=0;l<C.length;l+=1)C[l].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(b,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(v,"class","w3-table-all"),d(v,"width","100%"),f(e,"class","w3-responsive"),f(l,"class","w3-container")},m(a,s){g(a,l,s),p(l,e),p(e,v),p(v,w),p(w,u),p(u,m),p(m,x),p(u,T),p(u,b),p(b,y),p(v,D);for(let l=0;l<C.length;l+=1)C[l].m(v,null)},p(a,l){if(6&l){let e;for(k=a[1],e=0;e<k.length;e+=1){const s=L(a,k,e);C[e]?C[e].p(s,l):(C[e]=N(s),C[e].c(),C[e].m(v,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}},d(a){a&&i(l),E(C,a)}}}function N(a){let l,e,d,E,m,x,T,b,y,D,k,C,H,R,I=a[6]+"";return{c(){l=s("tr"),e=s("td"),d=t(I),E=n(),m=s("td"),x=s("button"),T=t("Edit"),b=n(),y=s("td"),D=s("button"),k=t("Download"),C=n(),this.h()},l(a){l=o(a,"TR",{index:!0});var s=c(l);e=o(s,"TD",{class:!0});var t=c(e);d=r(t,I),t.forEach(i),E=h(s),m=o(s,"TD",{class:!0});var n=c(m);x=o(n,"BUTTON",{index:!0});var f=c(x);T=r(f,"Edit"),f.forEach(i),n.forEach(i),b=h(s),y=o(s,"TD",{class:!0});var g=c(y);D=o(g,"BUTTON",{index:!0});var p=c(D);k=r(p,"Download"),p.forEach(i),g.forEach(i),C=h(s),s.forEach(i),this.h()},h(){f(e,"class","w3-left-align"),f(x,"index",a[5]),f(m,"class","w3-right-align"),f(D,"index",a[5]),f(y,"class","w3-right-align"),f(l,"index",a[5])},m(s,t){g(s,l,t),p(l,e),p(e,d),p(l,E),p(l,m),p(m,x),p(x,T),p(l,b),p(l,y),p(y,D),p(D,k),p(l,C),H||(R=[v(x,"click",j),v(D,"click",j),v(l,"click",a[2])],H=!0)},p(a,l){2&l&&I!==(I=a[6]+"")&&w(d,I)},d(a){a&&i(l),H=!1,u(R)}}}function U(a){let l,e,v,w,u,m,x,T,b,y,D,k=a[0],C=[];for(let s=0;s<k.length;s+=1)C[s]=A(F(a,k,s));return{c(){l=s("div"),e=s("div"),v=s("table"),w=s("thead"),u=s("tr"),m=s("th"),x=t("Filename"),T=n(),b=s("th"),y=t("Actions"),D=n();for(let a=0;a<C.length;a+=1)C[a].c();this.h()},l(a){l=o(a,"DIV",{class:!0});var s=c(l);e=o(s,"DIV",{class:!0});var t=c(e);v=o(t,"TABLE",{class:!0,style:!0});var n=c(v);w=o(n,"THEAD",{});var f=c(w);u=o(f,"TR",{class:!0});var d=c(u);m=o(d,"TH",{class:!0});var g=c(m);x=r(g,"Filename"),g.forEach(i),T=h(d),b=o(d,"TH",{class:!0});var p=c(b);y=r(p,"Actions"),p.forEach(i),d.forEach(i),f.forEach(i),D=h(n);for(let l=0;l<C.length;l+=1)C[l].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(b,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(v,"class","w3-table-all"),d(v,"width","100%"),f(e,"class","w3-responsive"),f(l,"class","w3-container")},m(a,s){g(a,l,s),p(l,e),p(e,v),p(v,w),p(w,u),p(u,m),p(m,x),p(u,T),p(u,b),p(b,y),p(v,D);for(let l=0;l<C.length;l+=1)C[l].m(v,null)},p(a,l){if(1&l){let e;for(k=a[0],e=0;e<k.length;e+=1){const s=F(a,k,e);C[e]?C[e].p(s,l):(C[e]=A(s),C[e].c(),C[e].m(v,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}},d(a){a&&i(l),E(C,a)}}}function A(a){let l,e,d,u,E,m,x,T,b,y,D=a[3]+"";return{c(){l=s("tr"),e=s("td"),d=t(D),u=n(),E=s("td"),m=s("button"),x=t("Download"),T=n(),this.h()},l(a){l=o(a,"TR",{});var s=c(l);e=o(s,"TD",{class:!0});var t=c(e);d=r(t,D),t.forEach(i),u=h(s),E=o(s,"TD",{class:!0});var n=c(E);m=o(n,"BUTTON",{index:!0});var f=c(m);x=r(f,"Download"),f.forEach(i),n.forEach(i),T=h(s),s.forEach(i),this.h()},h(){f(e,"class","w3-left-align"),f(m,"index",a[5]),f(E,"class","w3-right-align")},m(a,s){g(a,l,s),p(l,e),p(e,d),p(l,u),p(l,E),p(E,m),p(m,x),p(l,T),b||(y=v(m,"click",j),b=!0)},p(a,l){1&l&&D!==(D=a[3]+"")&&w(d,D)},d(a){a&&i(l),b=!1,y()}}}function O(a){let l,e,w,u,E,C,H,I,V,F,L,N,A,O,j,G,q,J,_,z,M,P,Q,K,W,X,Y,Z,aa,la,ea;e=new R({});let sa=a[1].length>0&&S(a),ta=a[0].length>0&&U(a);return{c(){l=n(),m(e.$$.fragment),w=n(),u=s("div"),E=s("h1"),C=s("b"),H=t("Capfiles"),I=n(),sa&&sa.c(),V=n(),F=s("hr"),L=n(),N=s("div"),A=s("h1"),O=s("b"),j=t("Edit Capfile Content"),G=t("\n\non click on capfiles, show another table of capfile content\n\n\n"),q=s("button"),J=t("Convert to CSV"),_=n(),z=s("hr"),M=n(),P=s("div"),Q=s("h1"),K=s("b"),W=t("CSV Files (stored in GridFS)"),X=n(),ta&&ta.c(),Y=n(),Z=s("hr"),this.h()},l(a){x('[data-svelte="svelte-qmgm2y"]',B.head).forEach(i),l=h(a),T(e.$$.fragment,a),w=h(a),u=o(a,"DIV",{class:!0});var s=c(u);E=o(s,"H1",{class:!0,style:!0});var t=c(E);C=o(t,"B",{});var n=c(C);H=r(n,"Capfiles"),n.forEach(i),t.forEach(i),s.forEach(i),I=h(a),sa&&sa.l(a),V=h(a),F=o(a,"HR",{class:!0}),L=h(a),N=o(a,"DIV",{class:!0});var f=c(N);A=o(f,"H1",{class:!0,style:!0});var d=c(A);O=o(d,"B",{});var g=c(O);j=r(g,"Edit Capfile Content"),g.forEach(i),d.forEach(i),f.forEach(i),G=r(a,"\n\non click on capfiles, show another table of capfile content\n\n\n"),q=o(a,"BUTTON",{class:!0});var p=c(q);J=r(p,"Convert to CSV"),p.forEach(i),_=h(a),z=o(a,"HR",{class:!0}),M=h(a),P=o(a,"DIV",{class:!0});var v=c(P);Q=o(v,"H1",{class:!0,style:!0});var m=c(Q);K=o(m,"B",{});var b=c(K);W=r(b,"CSV Files (stored in GridFS)"),b.forEach(i),m.forEach(i),v.forEach(i),X=h(a),ta&&ta.l(a),Y=h(a),Z=o(a,"HR",{class:!0}),this.h()},h(){B.title="Database",f(E,"class","w3-text-yellow"),d(E,"text-shadow","1px 1px 0 #444"),f(u,"class","w3-panel w3-blue"),f(F,"class","svelte-lxonyp"),f(A,"class","w3-text-yellow"),d(A,"text-shadow","1px 1px 0 #444"),f(N,"class","w3-panel w3-blue"),f(q,"class","w3-col w3-input w3-border"),f(z,"class","svelte-lxonyp"),f(Q,"class","w3-text-yellow"),d(Q,"text-shadow","1px 1px 0 #444"),f(P,"class","w3-panel w3-blue"),f(Z,"class","svelte-lxonyp")},m(a,s){g(a,l,s),b(e,a,s),g(a,w,s),g(a,u,s),p(u,E),p(E,C),p(C,H),g(a,I,s),sa&&sa.m(a,s),g(a,V,s),g(a,F,s),g(a,L,s),g(a,N,s),p(N,A),p(A,O),p(O,j),g(a,G,s),g(a,q,s),p(q,J),g(a,_,s),g(a,z,s),g(a,M,s),g(a,P,s),p(P,Q),p(Q,K),p(K,W),g(a,X,s),ta&&ta.m(a,s),g(a,Y,s),g(a,Z,s),aa=!0,la||(ea=v(q,"click",$),la=!0)},p(a,[l]){a[1].length>0?sa?sa.p(a,l):(sa=S(a),sa.c(),sa.m(V.parentNode,V)):sa&&(sa.d(1),sa=null),a[0].length>0?ta?ta.p(a,l):(ta=U(a),ta.c(),ta.m(Y.parentNode,Y)):ta&&(ta.d(1),ta=null)},i(a){aa||(y(e.$$.fragment,a),aa=!0)},o(a){D(e.$$.fragment,a),aa=!1},d(a){a&&i(l),k(e,a),a&&i(w),a&&i(u),a&&i(I),sa&&sa.d(a),a&&i(V),a&&i(F),a&&i(L),a&&i(N),a&&i(G),a&&i(q),a&&i(_),a&&i(z),a&&i(M),a&&i(P),a&&i(X),ta&&ta.d(a),a&&i(Y),a&&i(Z),la=!1,ea()}}}function $(){}function j(){}function G(a,l,e){let s=[],t=[];return C((async()=>{I("/allgridfs",(function(a){let l=JSON.parse(a.response);l.data&&(V.success("Found data."),e(0,s=l.data),console.log(s))})),I("/capfile/all",(function(a){let l=JSON.parse(a.response);l.data&&(V.success("Found data."),e(1,t=l.data),console.log(t))}))})),[s,t,function(){let a=document.getElementById("downloadLogfile").value,l=!1;console.log("download logfile",logfiles);for(let t=0;t<logfiles.length;t++)parseInt(a)==parseInt(logfiles[t]._id)&&(l=!0);if(!l)return void V.danger("Please specify an LogID.");let e="/download/db2/logfiles/"+a;var s=performance.now();I(e,(function(a){!function(a,l){let e=document.createElement("a");document.body.appendChild(e),e.style="display: none";let s=window.URL.createObjectURL(a);e.href=s,e.download=l,e.click(),window.URL.revokeObjectURL(s)}(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]));var l=performance.now();console.log("CSV Logfile download took "+(l-s)+" milliseconds.")}))}]}export default class extends a{constructor(a){super(),l(this,a,G,O,e,{})}}

import{S as a,i as l,s as e,e as s,t,k as n,c as o,a as c,g as r,d as i,n as h,b as d,N as f,f as p,F as w,G as g,h as v,Q as u,M as E,j as m,L as T,m as x,o as b,v as y,r as D,w as C,z as k,T as F}from"../../chunks/vendor-c052606d.js";import{T as H,x as R,n as B}from"../../chunks/requests-213c1aee.js";/* empty css                                                       */const{document:I}=F;function V(a,l,e){const s=a.slice();return s[3]=l[e],s[5]=e,s}function L(a,l,e){const s=a.slice();return s[6]=l[e],s[5]=e,s}function N(a){let l,e,g,v,u,m,T,x,b,y,D,C=a[1],k=[];for(let s=0;s<C.length;s+=1)k[s]=S(L(a,C,s));return{c(){l=s("div"),e=s("div"),g=s("table"),v=s("thead"),u=s("tr"),m=s("th"),T=t("Filename"),x=n(),b=s("th"),y=t("Actions"),D=n();for(let a=0;a<k.length;a+=1)k[a].c();this.h()},l(a){l=o(a,"DIV",{class:!0});var s=c(l);e=o(s,"DIV",{class:!0});var t=c(e);g=o(t,"TABLE",{class:!0,style:!0});var n=c(g);v=o(n,"THEAD",{});var d=c(v);u=o(d,"TR",{class:!0});var f=c(u);m=o(f,"TH",{class:!0});var p=c(m);T=r(p,"Filename"),p.forEach(i),x=h(f),b=o(f,"TH",{class:!0});var w=c(b);y=r(w,"Actions"),w.forEach(i),f.forEach(i),d.forEach(i),D=h(n);for(let l=0;l<k.length;l+=1)k[l].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){d(m,"class","w3-left-align"),d(b,"class","w3-right-align"),d(u,"class","w3-dark-grey"),d(g,"class","w3-table-all"),f(g,"width","100%"),d(e,"class","w3-responsive"),d(l,"class","w3-container")},m(a,s){p(a,l,s),w(l,e),w(e,g),w(g,v),w(v,u),w(u,m),w(m,T),w(u,x),w(u,b),w(b,y),w(g,D);for(let l=0;l<k.length;l+=1)k[l].m(g,null)},p(a,l){if(6&l){let e;for(C=a[1],e=0;e<C.length;e+=1){const s=L(a,C,e);k[e]?k[e].p(s,l):(k[e]=S(s),k[e].c(),k[e].m(g,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=C.length}},d(a){a&&i(l),E(k,a)}}}function S(a){let l,e,f,E,m,T,x,b,y,D,C,k,F,H,R=a[6]+"";return{c(){l=s("tr"),e=s("td"),f=t(R),E=n(),m=s("td"),T=s("button"),x=t("Edit"),b=n(),y=s("td"),D=s("button"),C=t("Download"),k=n(),this.h()},l(a){l=o(a,"TR",{index:!0});var s=c(l);e=o(s,"TD",{class:!0});var t=c(e);f=r(t,R),t.forEach(i),E=h(s),m=o(s,"TD",{class:!0});var n=c(m);T=o(n,"BUTTON",{index:!0});var d=c(T);x=r(d,"Edit"),d.forEach(i),n.forEach(i),b=h(s),y=o(s,"TD",{class:!0});var p=c(y);D=o(p,"BUTTON",{index:!0});var w=c(D);C=r(w,"Download"),w.forEach(i),p.forEach(i),k=h(s),s.forEach(i),this.h()},h(){d(e,"class","w3-left-align"),d(T,"index",a[5]),d(m,"class","w3-right-align"),d(D,"index",a[5]),d(y,"class","w3-right-align"),d(l,"index",a[5])},m(s,t){p(s,l,t),w(l,e),w(e,f),w(l,E),w(l,m),w(m,T),w(T,x),w(l,b),w(l,y),w(y,D),w(D,C),w(l,k),F||(H=[g(T,"click",G),g(D,"click",G),g(l,"click",a[2])],F=!0)},p(a,l){2&l&&R!==(R=a[6]+"")&&v(f,R)},d(a){a&&i(l),F=!1,u(H)}}}function U(a){let l,e,g,v,u,m,T,x,b,y,D,C=a[0],k=[];for(let s=0;s<C.length;s+=1)k[s]=O(V(a,C,s));return{c(){l=s("div"),e=s("div"),g=s("table"),v=s("thead"),u=s("tr"),m=s("th"),T=t("Filename"),x=n(),b=s("th"),y=t("Actions"),D=n();for(let a=0;a<k.length;a+=1)k[a].c();this.h()},l(a){l=o(a,"DIV",{class:!0});var s=c(l);e=o(s,"DIV",{class:!0});var t=c(e);g=o(t,"TABLE",{class:!0,style:!0});var n=c(g);v=o(n,"THEAD",{});var d=c(v);u=o(d,"TR",{class:!0});var f=c(u);m=o(f,"TH",{class:!0});var p=c(m);T=r(p,"Filename"),p.forEach(i),x=h(f),b=o(f,"TH",{class:!0});var w=c(b);y=r(w,"Actions"),w.forEach(i),f.forEach(i),d.forEach(i),D=h(n);for(let l=0;l<k.length;l+=1)k[l].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){d(m,"class","w3-left-align"),d(b,"class","w3-right-align"),d(u,"class","w3-dark-grey"),d(g,"class","w3-table-all"),f(g,"width","100%"),d(e,"class","w3-responsive"),d(l,"class","w3-container")},m(a,s){p(a,l,s),w(l,e),w(e,g),w(g,v),w(v,u),w(u,m),w(m,T),w(u,x),w(u,b),w(b,y),w(g,D);for(let l=0;l<k.length;l+=1)k[l].m(g,null)},p(a,l){if(1&l){let e;for(C=a[0],e=0;e<C.length;e+=1){const s=V(a,C,e);k[e]?k[e].p(s,l):(k[e]=O(s),k[e].c(),k[e].m(g,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=C.length}},d(a){a&&i(l),E(k,a)}}}function O(a){let l,e,f,u,E,m,T,x,b,y,D=a[3]+"";return{c(){l=s("tr"),e=s("td"),f=t(D),u=n(),E=s("td"),m=s("button"),T=t("Download"),x=n(),this.h()},l(a){l=o(a,"TR",{});var s=c(l);e=o(s,"TD",{class:!0});var t=c(e);f=r(t,D),t.forEach(i),u=h(s),E=o(s,"TD",{class:!0});var n=c(E);m=o(n,"BUTTON",{index:!0});var d=c(m);T=r(d,"Download"),d.forEach(i),n.forEach(i),x=h(s),s.forEach(i),this.h()},h(){d(e,"class","w3-left-align"),d(m,"index",a[5]),d(E,"class","w3-right-align")},m(a,s){p(a,l,s),w(l,e),w(e,f),w(l,u),w(l,E),w(E,m),w(m,T),w(l,x),b||(y=g(m,"click",G),b=!0)},p(a,l){1&l&&D!==(D=a[3]+"")&&v(f,D)},d(a){a&&i(l),b=!1,y()}}}function A(a){let l,e,v,E,k,F,R,B,V,L,S,O,A,G,q,J,_,z,M,P,Q,K,W,X,Y,Z,aa,la,ea,sa,ta,na,oa,ca;e=new H({});let ra=a[1].length>0&&N(a),ia=a[0].length>0&&U(a);return{c(){l=n(),m(e.$$.fragment),v=n(),E=s("div"),k=s("h1"),F=s("b"),R=t("Capfiles"),B=n(),ra&&ra.c(),V=n(),L=s("button"),S=t("Download Capture File"),O=n(),A=s("hr"),G=n(),q=s("div"),J=s("h1"),_=s("b"),z=t("Edit Capfile Content"),M=t("\n\non click on capfiles, show another table of capfile content\n\n\n"),P=s("button"),Q=t("Convert to CSV"),K=n(),W=s("hr"),X=n(),Y=s("div"),Z=s("h1"),aa=s("b"),la=t("CSV Files (stored in GridFS)"),ea=n(),ia&&ia.c(),sa=n(),ta=s("hr"),this.h()},l(a){T('[data-svelte="svelte-qmgm2y"]',I.head).forEach(i),l=h(a),x(e.$$.fragment,a),v=h(a),E=o(a,"DIV",{class:!0});var s=c(E);k=o(s,"H1",{class:!0,style:!0});var t=c(k);F=o(t,"B",{});var n=c(F);R=r(n,"Capfiles"),n.forEach(i),t.forEach(i),s.forEach(i),B=h(a),ra&&ra.l(a),V=h(a),L=o(a,"BUTTON",{class:!0});var d=c(L);S=r(d,"Download Capture File"),d.forEach(i),O=h(a),A=o(a,"HR",{class:!0}),G=h(a),q=o(a,"DIV",{class:!0});var f=c(q);J=o(f,"H1",{class:!0,style:!0});var p=c(J);_=o(p,"B",{});var w=c(_);z=r(w,"Edit Capfile Content"),w.forEach(i),p.forEach(i),f.forEach(i),M=r(a,"\n\non click on capfiles, show another table of capfile content\n\n\n"),P=o(a,"BUTTON",{class:!0});var g=c(P);Q=r(g,"Convert to CSV"),g.forEach(i),K=h(a),W=o(a,"HR",{class:!0}),X=h(a),Y=o(a,"DIV",{class:!0});var u=c(Y);Z=o(u,"H1",{class:!0,style:!0});var m=c(Z);aa=o(m,"B",{});var b=c(aa);la=r(b,"CSV Files (stored in GridFS)"),b.forEach(i),m.forEach(i),u.forEach(i),ea=h(a),ia&&ia.l(a),sa=h(a),ta=o(a,"HR",{class:!0}),this.h()},h(){I.title="Database",d(k,"class","w3-text-yellow"),f(k,"text-shadow","1px 1px 0 #444"),d(E,"class","w3-panel w3-blue"),d(L,"class","w3-col w3-input w3-border"),d(A,"class","svelte-lxonyp"),d(J,"class","w3-text-yellow"),f(J,"text-shadow","1px 1px 0 #444"),d(q,"class","w3-panel w3-blue"),d(P,"class","w3-col w3-input w3-border"),d(W,"class","svelte-lxonyp"),d(Z,"class","w3-text-yellow"),f(Z,"text-shadow","1px 1px 0 #444"),d(Y,"class","w3-panel w3-blue"),d(ta,"class","svelte-lxonyp")},m(a,s){p(a,l,s),b(e,a,s),p(a,v,s),p(a,E,s),w(E,k),w(k,F),w(F,R),p(a,B,s),ra&&ra.m(a,s),p(a,V,s),p(a,L,s),w(L,S),p(a,O,s),p(a,A,s),p(a,G,s),p(a,q,s),w(q,J),w(J,_),w(_,z),p(a,M,s),p(a,P,s),w(P,Q),p(a,K,s),p(a,W,s),p(a,X,s),p(a,Y,s),w(Y,Z),w(Z,aa),w(aa,la),p(a,ea,s),ia&&ia.m(a,s),p(a,sa,s),p(a,ta,s),na=!0,oa||(ca=[g(L,"click",$),g(P,"click",j)],oa=!0)},p(a,[l]){a[1].length>0?ra?ra.p(a,l):(ra=N(a),ra.c(),ra.m(V.parentNode,V)):ra&&(ra.d(1),ra=null),a[0].length>0?ia?ia.p(a,l):(ia=U(a),ia.c(),ia.m(sa.parentNode,sa)):ia&&(ia.d(1),ia=null)},i(a){na||(y(e.$$.fragment,a),na=!0)},o(a){D(e.$$.fragment,a),na=!1},d(a){a&&i(l),C(e,a),a&&i(v),a&&i(E),a&&i(B),ra&&ra.d(a),a&&i(V),a&&i(L),a&&i(O),a&&i(A),a&&i(G),a&&i(q),a&&i(M),a&&i(P),a&&i(K),a&&i(W),a&&i(X),a&&i(Y),a&&i(ea),ia&&ia.d(a),a&&i(sa),a&&i(ta),oa=!1,u(ca)}}}function $(){}function j(){}function G(){}function q(a,l,e){let s=[],t=[];return k((async()=>{R("/allgridfs",(function(a){let l=JSON.parse(a.response);l.data&&(B.success("Found data."),e(0,s=l.data),console.log(s))})),R("/capfile/all",(function(a){let l=JSON.parse(a.response);l.data&&(B.success("Found data."),e(1,t=l.data),console.log(t))}))})),[s,t,function(){let a=document.getElementById("downloadLogfile").value,l=!1;console.log("download logfile",logfiles);for(let t=0;t<logfiles.length;t++)parseInt(a)==parseInt(logfiles[t]._id)&&(l=!0);if(!l)return void B.danger("Please specify an LogID.");let e="/download/db2/logfiles/"+a;var s=performance.now();R(e,(function(a){!function(a,l){let e=document.createElement("a");document.body.appendChild(e),e.style="display: none";let s=window.URL.createObjectURL(a);e.href=s,e.download=l,e.click(),window.URL.revokeObjectURL(s)}(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]));var l=performance.now();console.log("CSV Logfile download took "+(l-s)+" milliseconds.")}))}]}export default class extends a{constructor(a){super(),l(this,a,q,A,e,{})}}

import{S as e,i as t,s as a,e as l,t as s,k as n,c,a as r,g as o,d as i,n as h,b as d,N as f,f as p,F as E,G as v,h as w,Q as g,M as u,j as m,L as T,m as b,o as y,v as D,r as x,w as C,z as k,T as V}from"../../chunks/vendor-c052606d.js";import{T as B,x as I,g as R,a as S,n as N}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:H}=V;function F(e,t,a){const l=e.slice();return l[7]=t[a],l[9]=a,l}function O(e,t,a){const l=e.slice();return l[10]=t[a],l[9]=a,l}function U(e,t,a){const l=e.slice();return l[12]=t[a],l[9]=a,l}function A(e){let t,a,v,w,g,m,T,b,y,D,x,C=e[1],k=[];for(let l=0;l<C.length;l+=1)k[l]=L(U(e,C,l));return{c(){t=l("div"),a=l("div"),v=l("table"),w=l("thead"),g=l("tr"),m=l("th"),T=s("Filename"),b=n(),y=l("th"),D=s("Actions"),x=n();for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){t=c(e,"DIV",{class:!0});var l=r(t);a=c(l,"DIV",{class:!0});var s=r(a);v=c(s,"TABLE",{class:!0,style:!0});var n=r(v);w=c(n,"THEAD",{});var d=r(w);g=c(d,"TR",{class:!0});var f=r(g);m=c(f,"TH",{class:!0});var p=r(m);T=o(p,"Filename"),p.forEach(i),b=h(f),y=c(f,"TH",{class:!0});var E=r(y);D=o(E,"Actions"),E.forEach(i),f.forEach(i),d.forEach(i),x=h(n);for(let t=0;t<k.length;t+=1)k[t].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){d(m,"class","w3-left-align"),d(y,"class","w3-right-align"),d(g,"class","w3-dark-grey"),d(v,"class","w3-table-all"),f(v,"width","100%"),d(a,"class","w3-responsive"),d(t,"class","w3-container")},m(e,l){p(e,t,l),E(t,a),E(a,v),E(v,w),E(w,g),E(g,m),E(m,T),E(g,b),E(g,y),E(y,D),E(v,x);for(let t=0;t<k.length;t+=1)k[t].m(v,null)},p(e,t){if(50&t){let a;for(C=e[1],a=0;a<C.length;a+=1){const l=U(e,C,a);k[a]?k[a].p(l,t):(k[a]=L(l),k[a].c(),k[a].m(v,null))}for(;a<k.length;a+=1)k[a].d(1);k.length=C.length}},d(e){e&&i(t),u(k,e)}}}function L(e){let t,a,f,u,m,T,b,y,D,x,C,k,V,B,I=e[12]+"";return{c(){t=l("tr"),a=l("td"),f=s(I),u=n(),m=l("td"),T=l("div"),b=l("button"),y=s("Edit"),D=n(),x=l("button"),C=s("Download"),k=n(),this.h()},l(e){t=c(e,"TR",{});var l=r(t);a=c(l,"TD",{class:!0});var s=r(a);f=o(s,I),s.forEach(i),u=h(l),m=c(l,"TD",{class:!0});var n=r(m);T=c(n,"DIV",{});var d=r(T);b=c(d,"BUTTON",{index:!0});var p=r(b);y=o(p,"Edit"),p.forEach(i),D=h(d),x=c(d,"BUTTON",{index:!0});var E=r(x);C=o(E,"Download"),E.forEach(i),d.forEach(i),n.forEach(i),k=h(l),l.forEach(i),this.h()},h(){d(a,"class","w3-left-align"),d(b,"index",e[9]),d(x,"index",e[9]),d(m,"class","w3-right-align")},m(l,s){p(l,t,s),E(t,a),E(a,f),E(t,u),E(t,m),E(m,T),E(T,b),E(b,y),E(T,D),E(T,x),E(x,C),E(t,k),V||(B=[v(b,"click",e[5]),v(x,"click",e[4])],V=!0)},p(e,t){2&t&&I!==(I=e[12]+"")&&w(f,I)},d(e){e&&i(t),V=!1,g(B)}}}function G(e){let t,a,v,w,g,m,T,b,y,D,x,C,k=e[2],V=[];for(let l=0;l<k.length;l+=1)V[l]=$(O(e,k,l));return{c(){t=l("div"),a=l("div"),v=l("table"),w=l("thead"),g=l("tr"),m=l("th"),T=s("Content"),b=n(),y=l("th"),D=s("Labels"),x=n(),C=l("tbody");for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){t=c(e,"DIV",{class:!0});var l=r(t);a=c(l,"DIV",{class:!0});var s=r(a);v=c(s,"TABLE",{id:!0,class:!0,style:!0});var n=r(v);w=c(n,"THEAD",{});var d=r(w);g=c(d,"TR",{class:!0});var f=r(g);m=c(f,"TH",{class:!0});var p=r(m);T=o(p,"Content"),p.forEach(i),b=h(f),y=c(f,"TH",{class:!0});var E=r(y);D=o(E,"Labels"),E.forEach(i),f.forEach(i),d.forEach(i),x=h(n),C=c(n,"TBODY",{});var u=r(C);for(let t=0;t<V.length;t+=1)V[t].l(u);u.forEach(i),n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){d(m,"class","w3-left-align"),d(y,"class","w3-right-align"),d(g,"class","w3-dark-grey"),d(v,"id","editTable"),d(v,"class","w3-table-all"),f(v,"width","100%"),d(a,"class","w3-responsive"),d(t,"class","w3-container")},m(e,l){p(e,t,l),E(t,a),E(a,v),E(v,w),E(w,g),E(g,m),E(m,T),E(g,b),E(g,y),E(y,D),E(v,x),E(v,C);for(let t=0;t<V.length;t+=1)V[t].m(C,null)},p(e,t){if(4&t){let a;for(k=e[2],a=0;a<k.length;a+=1){const l=O(e,k,a);V[a]?V[a].p(l,t):(V[a]=$(l),V[a].c(),V[a].m(C,null))}for(;a<V.length;a+=1)V[a].d(1);V.length=k.length}},d(e){e&&i(t),u(V,e)}}}function $(e){let t,a,f,v,g,u,m,T,b=JSON.stringify(e[10],null,2)+"";return{c(){t=l("tr"),a=l("td"),f=s(b),v=n(),g=l("td"),u=l("div"),m=l("input"),T=n(),this.h()},l(e){t=c(e,"TR",{});var l=r(t);a=c(l,"TD",{class:!0});var s=r(a);f=o(s,b),s.forEach(i),v=h(l),g=c(l,"TD",{class:!0});var n=r(g);u=c(n,"DIV",{});var d=r(u);m=c(d,"INPUT",{class:!0,type:!0,checked:!0,index:!0}),d.forEach(i),n.forEach(i),T=h(l),l.forEach(i),this.h()},h(){d(a,"class","w3-left-align"),d(m,"class","w3-check"),d(m,"type","checkbox"),m.checked="",d(m,"index",e[9]),d(g,"class","w3-right-align")},m(e,l){p(e,t,l),E(t,a),E(a,f),E(t,v),E(t,g),E(g,u),E(u,m),E(t,T)},p(e,t){4&t&&b!==(b=JSON.stringify(e[10],null,2)+"")&&w(f,b)},d(e){e&&i(t)}}}function j(e){let t,a,v,w,g,m,T,b,y,D,x,C=e[0],k=[];for(let l=0;l<C.length;l+=1)k[l]=P(F(e,C,l));return{c(){t=l("div"),a=l("div"),v=l("table"),w=l("thead"),g=l("tr"),m=l("th"),T=s("Filename"),b=n(),y=l("th"),D=s("Actions"),x=n();for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){t=c(e,"DIV",{class:!0});var l=r(t);a=c(l,"DIV",{class:!0});var s=r(a);v=c(s,"TABLE",{class:!0,style:!0});var n=r(v);w=c(n,"THEAD",{});var d=r(w);g=c(d,"TR",{class:!0});var f=r(g);m=c(f,"TH",{class:!0});var p=r(m);T=o(p,"Filename"),p.forEach(i),b=h(f),y=c(f,"TH",{class:!0});var E=r(y);D=o(E,"Actions"),E.forEach(i),f.forEach(i),d.forEach(i),x=h(n);for(let t=0;t<k.length;t+=1)k[t].l(n);n.forEach(i),s.forEach(i),l.forEach(i),this.h()},h(){d(m,"class","w3-left-align"),d(y,"class","w3-right-align"),d(g,"class","w3-dark-grey"),d(v,"class","w3-table-all"),f(v,"width","100%"),d(a,"class","w3-responsive"),d(t,"class","w3-container")},m(e,l){p(e,t,l),E(t,a),E(a,v),E(v,w),E(w,g),E(g,m),E(m,T),E(g,b),E(g,y),E(y,D),E(v,x);for(let t=0;t<k.length;t+=1)k[t].m(v,null)},p(e,t){if(65&t){let a;for(C=e[0],a=0;a<C.length;a+=1){const l=F(e,C,a);k[a]?k[a].p(l,t):(k[a]=P(l),k[a].c(),k[a].m(v,null))}for(;a<k.length;a+=1)k[a].d(1);k.length=C.length}},d(e){e&&i(t),u(k,e)}}}function P(e){let t,a,f,g,u,m,T,b,y,D,x=e[7]+"";return{c(){t=l("tr"),a=l("td"),f=s(x),g=n(),u=l("td"),m=l("button"),T=s("Download"),b=n(),this.h()},l(e){t=c(e,"TR",{});var l=r(t);a=c(l,"TD",{class:!0});var s=r(a);f=o(s,x),s.forEach(i),g=h(l),u=c(l,"TD",{class:!0});var n=r(u);m=c(n,"BUTTON",{index:!0});var d=r(m);T=o(d,"Download"),d.forEach(i),n.forEach(i),b=h(l),l.forEach(i),this.h()},h(){d(a,"class","w3-left-align"),d(m,"index",e[9]),d(u,"class","w3-right-align")},m(l,s){p(l,t,s),E(t,a),E(a,f),E(t,g),E(t,u),E(u,m),E(m,T),E(t,b),y||(D=v(m,"click",e[6]),y=!0)},p(e,t){1&t&&x!==(x=e[7]+"")&&w(f,x)},d(e){e&&i(t),y=!1,D()}}}function J(e){let t,a,w,u,k,V,I,R,S,N,F,O,U,L,$,P,J,z,Y,_,K,W,X,Z,ee,te,ae,le,se,ne,ce,re,oe,ie,he,de,fe,pe,Ee,ve,we,ge,ue,me,Te,be,ye,De,xe,Ce,ke,Ve,Be,Ie,Re;a=new B({});let Se=e[1].length>0&&A(e),Ne=e[2].length>0&&G(e),He=e[0].length>0&&j(e);return{c(){t=n(),m(a.$$.fragment),w=n(),u=l("div"),k=l("h1"),V=l("b"),I=s("Capfiles"),R=n(),Se&&Se.c(),S=n(),N=l("hr"),F=n(),O=l("div"),U=l("h1"),L=l("b"),$=s("Edit Capfile Content"),P=s('\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),J=l("div"),z=l("div"),Y=l("button"),_=s("Apply Filter"),K=n(),W=l("div"),X=l("input"),Z=n(),ee=l("br"),te=n(),Ne&&Ne.c(),ae=n(),le=l("br"),se=n(),ne=l("div"),ce=l("div"),re=l("button"),oe=s("Convert to CSV and Store to GridFs"),ie=n(),he=l("div"),de=l("button"),fe=s("Download Table as CSV"),pe=n(),Ee=l("hr"),ve=n(),we=l("div"),ge=l("h1"),ue=l("b"),me=s("Gridfs Files (CSVs stored in GridFS)"),Te=n(),be=l("button"),ye=s("Reload GrifFS"),De=n(),xe=l("hr"),Ce=n(),He&&He.c(),ke=n(),Ve=l("hr"),this.h()},l(e){T('[data-svelte="svelte-qmgm2y"]',H.head).forEach(i),t=h(e),b(a.$$.fragment,e),w=h(e),u=c(e,"DIV",{class:!0});var l=r(u);k=c(l,"H1",{class:!0,style:!0});var s=r(k);V=c(s,"B",{});var n=r(V);I=o(n,"Capfiles"),n.forEach(i),s.forEach(i),l.forEach(i),R=h(e),Se&&Se.l(e),S=h(e),N=c(e,"HR",{class:!0}),F=h(e),O=c(e,"DIV",{class:!0});var d=r(O);U=c(d,"H1",{class:!0,style:!0});var f=r(U);L=c(f,"B",{});var p=r(L);$=o(p,"Edit Capfile Content"),p.forEach(i),f.forEach(i),d.forEach(i),P=o(e,'\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),J=c(e,"DIV",{class:!0});var E=r(J);z=c(E,"DIV",{class:!0});var v=r(z);Y=c(v,"BUTTON",{ref:!0,class:!0});var g=r(Y);_=o(g,"Apply Filter"),g.forEach(i),v.forEach(i),K=h(E),W=c(E,"DIV",{class:!0});var m=r(W);X=c(m,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),m.forEach(i),E.forEach(i),Z=h(e),ee=c(e,"BR",{}),te=h(e),Ne&&Ne.l(e),ae=h(e),le=c(e,"BR",{}),se=h(e),ne=c(e,"DIV",{class:!0});var y=r(ne);ce=c(y,"DIV",{class:!0});var D=r(ce);re=c(D,"BUTTON",{class:!0});var x=r(re);oe=o(x,"Convert to CSV and Store to GridFs"),x.forEach(i),D.forEach(i),ie=h(y),he=c(y,"DIV",{class:!0});var C=r(he);de=c(C,"BUTTON",{class:!0});var B=r(de);fe=o(B,"Download Table as CSV"),B.forEach(i),C.forEach(i),y.forEach(i),pe=h(e),Ee=c(e,"HR",{class:!0}),ve=h(e),we=c(e,"DIV",{class:!0});var A=r(we);ge=c(A,"H1",{class:!0,style:!0});var G=r(ge);ue=c(G,"B",{});var j=r(ue);me=o(j,"Gridfs Files (CSVs stored in GridFS)"),j.forEach(i),G.forEach(i),A.forEach(i),Te=h(e),be=c(e,"BUTTON",{class:!0});var q=r(be);ye=o(q,"Reload GrifFS"),q.forEach(i),De=h(e),xe=c(e,"HR",{class:!0}),Ce=h(e),He&&He.l(e),ke=h(e),Ve=c(e,"HR",{class:!0}),this.h()},h(){H.title="Database",d(k,"class","w3-text-yellow"),f(k,"text-shadow","1px 1px 0 #444"),d(u,"class","w3-panel w3-blue"),d(N,"class","svelte-lxonyp"),d(U,"class","w3-text-yellow"),f(U,"text-shadow","1px 1px 0 #444"),d(O,"class","w3-panel w3-blue"),d(Y,"ref","filterTable"),d(Y,"class","w3-col w3-input w3-border"),d(z,"class","w3-third"),d(X,"id","filterTable"),d(X,"class","w3-input w3-border"),d(X,"name","name"),d(X,"type","text"),d(X,"placeholder","Filter String"),d(W,"class","w3-rest"),d(J,"class","w3-row w3-section"),d(re,"class","w3-col w3-input w3-border"),d(ce,"class","w3-half"),d(de,"class","w3-col w3-input w3-border"),d(he,"class","w3-half"),d(ne,"class","w3-row w3-section"),d(Ee,"class","svelte-lxonyp"),d(ge,"class","w3-text-yellow"),f(ge,"text-shadow","1px 1px 0 #444"),d(we,"class","w3-panel w3-blue"),d(be,"class","w3-col w3-input w3-border"),d(xe,"class","svelte-lxonyp"),d(Ve,"class","svelte-lxonyp")},m(l,s){p(l,t,s),y(a,l,s),p(l,w,s),p(l,u,s),E(u,k),E(k,V),E(V,I),p(l,R,s),Se&&Se.m(l,s),p(l,S,s),p(l,N,s),p(l,F,s),p(l,O,s),E(O,U),E(U,L),E(L,$),p(l,P,s),p(l,J,s),E(J,z),E(z,Y),E(Y,_),E(J,K),E(J,W),E(W,X),p(l,Z,s),p(l,ee,s),p(l,te,s),Ne&&Ne.m(l,s),p(l,ae,s),p(l,le,s),p(l,se,s),p(l,ne,s),E(ne,ce),E(ce,re),E(re,oe),E(ne,ie),E(ne,he),E(he,de),E(de,fe),p(l,pe,s),p(l,Ee,s),p(l,ve,s),p(l,we,s),E(we,ge),E(ge,ue),E(ue,me),p(l,Te,s),p(l,be,s),E(be,ye),p(l,De,s),p(l,xe,s),p(l,Ce,s),He&&He.m(l,s),p(l,ke,s),p(l,Ve,s),Be=!0,Ie||(Re=[v(Y,"click",Q),v(re,"click",q),v(de,"click",M),v(be,"click",e[3])],Ie=!0)},p(e,[t]){e[1].length>0?Se?Se.p(e,t):(Se=A(e),Se.c(),Se.m(S.parentNode,S)):Se&&(Se.d(1),Se=null),e[2].length>0?Ne?Ne.p(e,t):(Ne=G(e),Ne.c(),Ne.m(ae.parentNode,ae)):Ne&&(Ne.d(1),Ne=null),e[0].length>0?He?He.p(e,t):(He=j(e),He.c(),He.m(ke.parentNode,ke)):He&&(He.d(1),He=null)},i(e){Be||(D(a.$$.fragment,e),Be=!0)},o(e){x(a.$$.fragment,e),Be=!1},d(e){e&&i(t),C(a,e),e&&i(w),e&&i(u),e&&i(R),Se&&Se.d(e),e&&i(S),e&&i(N),e&&i(F),e&&i(O),e&&i(P),e&&i(J),e&&i(Z),e&&i(ee),e&&i(te),Ne&&Ne.d(e),e&&i(ae),e&&i(le),e&&i(se),e&&i(ne),e&&i(pe),e&&i(Ee),e&&i(ve),e&&i(we),e&&i(Te),e&&i(be),e&&i(De),e&&i(xe),e&&i(Ce),He&&He.d(e),e&&i(ke),e&&i(Ve),Ie=!1,g(Re)}}}function q(){}function M(){}function z(e,t){let a=document.createElement("a");document.body.appendChild(a),a.style="display: none";let l=window.URL.createObjectURL(e);a.href=l,a.download=t,a.click(),window.URL.revokeObjectURL(l)}function Q(){let e=document.getElementById("editTable"),t=this.parentElement.nextElementSibling.firstElementChild.value;console.log(e,this,t);let a=e.children[1].childNodes;console.log("list of trs:",a,a.length);for(let l=1;l<a.length;l++){a[l].style.display="none",console.log(a[l].getElementsByTagName("td")),td=a[l].getElementsByTagName("td");for(let e=0;e<td.length;e++)if(cell=a[l].getElementsByTagName("td")[e],cell&&cell.innerHTML.toUpperCase().indexOf(t)>-1){a[l].style.display="";break}}}function Y(e,t,a){let l=[],s=[],n=[];function c(){I("/datasets/all",(function(e){let t=JSON.parse(e.response);t.data&&(N.success("Found data."),a(0,l=t.data),console.log("gridfsData",l))}))}return k((async()=>{c(),I("/capfile/all",(function(e){let t=JSON.parse(e.response);t.data&&(N.success("Found data."),a(1,s=t.data),console.log("capfileData",s))}))})),[l,s,n,c,function(){let e=this.parentElement.parentElement.parentElement.firstElementChild.innerText;R("/capfile/download","POST",{filepath:e},(function(e){z(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let e=this.parentElement.parentElement.parentElement.firstElementChild.innerText;S("/capfile/edit","POST",{filepath:e},(function(e){e.data&&(a(2,n=e.data),console.log("editData:",n),N.success("Loading data successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let e=this.parentElement.parentElement.firstElementChild.innerText;R("/datasets/download","POST",{filename:e},(function(e){z(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends e{constructor(e){super(),t(this,e,Y,J,a,{})}}

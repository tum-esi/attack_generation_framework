import{S as a,i as e,s as l,e as s,t,k as n,c as o,a as c,g as r,d as i,n as h,b as f,N as d,f as p,F as v,G as g,h as w,Q as u,M as E,j as m,L as x,m as T,o as b,v as y,r as D,w as k,z as C,T as H}from"../../chunks/vendor-c052606d.js";import{T as I,x as R,n as V}from"../../chunks/requests-213c1aee.js";/* empty css                                                       */const{document:B}=H;function F(a,e,l){const s=a.slice();return s[3]=e[l],s[5]=l,s}function L(a,e,l){const s=a.slice();return s[6]=e[l],s[5]=l,s}function S(a){let e,l,g,w,u,m,x,T,b,y,D,k=a[1],C=[];for(let s=0;s<k.length;s+=1)C[s]=N(L(a,k,s));return{c(){e=s("div"),l=s("div"),g=s("table"),w=s("thead"),u=s("tr"),m=s("th"),x=t("Filename"),T=n(),b=s("th"),y=t("Actions"),D=n();for(let a=0;a<C.length;a+=1)C[a].c();this.h()},l(a){e=o(a,"DIV",{class:!0});var s=c(e);l=o(s,"DIV",{class:!0});var t=c(l);g=o(t,"TABLE",{class:!0,style:!0});var n=c(g);w=o(n,"THEAD",{});var f=c(w);u=o(f,"TR",{class:!0});var d=c(u);m=o(d,"TH",{class:!0});var p=c(m);x=r(p,"Filename"),p.forEach(i),T=h(d),b=o(d,"TH",{class:!0});var v=c(b);y=r(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),D=h(n);for(let e=0;e<C.length;e+=1)C[e].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(b,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(g,"class","w3-table-all"),d(g,"width","100%"),f(l,"class","w3-responsive"),f(e,"class","w3-container")},m(a,s){p(a,e,s),v(e,l),v(l,g),v(g,w),v(w,u),v(u,m),v(m,x),v(u,T),v(u,b),v(b,y),v(g,D);for(let e=0;e<C.length;e+=1)C[e].m(g,null)},p(a,e){if(6&e){let l;for(k=a[1],l=0;l<k.length;l+=1){const s=L(a,k,l);C[l]?C[l].p(s,e):(C[l]=N(s),C[l].c(),C[l].m(g,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=k.length}},d(a){a&&i(e),E(C,a)}}}function N(a){let e,l,d,E,m,x,T,b,y,D,k,C,H,I,R=a[6]+"";return{c(){e=s("tr"),l=s("td"),d=t(R),E=n(),m=s("td"),x=s("div"),T=s("button"),b=t("Edit"),y=n(),D=s("button"),k=t("Download"),C=n(),this.h()},l(a){e=o(a,"TR",{index:!0});var s=c(e);l=o(s,"TD",{class:!0});var t=c(l);d=r(t,R),t.forEach(i),E=h(s),m=o(s,"TD",{class:!0});var n=c(m);x=o(n,"DIV",{});var f=c(x);T=o(f,"BUTTON",{index:!0});var p=c(T);b=r(p,"Edit"),p.forEach(i),y=h(f),D=o(f,"BUTTON",{index:!0});var v=c(D);k=r(v,"Download"),v.forEach(i),f.forEach(i),n.forEach(i),C=h(s),s.forEach(i),this.h()},h(){f(l,"class","w3-left-align"),f(T,"index",a[5]),f(D,"index",a[5]),f(m,"class","w3-right-align"),f(e,"index",a[5])},m(s,t){p(s,e,t),v(e,l),v(l,d),v(e,E),v(e,m),v(m,x),v(x,T),v(T,b),v(x,y),v(x,D),v(D,k),v(e,C),H||(I=[g(T,"click",j),g(D,"click",j),g(e,"click",a[2])],H=!0)},p(a,e){2&e&&R!==(R=a[6]+"")&&w(d,R)},d(a){a&&i(e),H=!1,u(I)}}}function U(a){let e,l,g,w,u,m,x,T,b,y,D,k=a[0],C=[];for(let s=0;s<k.length;s+=1)C[s]=A(F(a,k,s));return{c(){e=s("div"),l=s("div"),g=s("table"),w=s("thead"),u=s("tr"),m=s("th"),x=t("Filename"),T=n(),b=s("th"),y=t("Actions"),D=n();for(let a=0;a<C.length;a+=1)C[a].c();this.h()},l(a){e=o(a,"DIV",{class:!0});var s=c(e);l=o(s,"DIV",{class:!0});var t=c(l);g=o(t,"TABLE",{class:!0,style:!0});var n=c(g);w=o(n,"THEAD",{});var f=c(w);u=o(f,"TR",{class:!0});var d=c(u);m=o(d,"TH",{class:!0});var p=c(m);x=r(p,"Filename"),p.forEach(i),T=h(d),b=o(d,"TH",{class:!0});var v=c(b);y=r(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),D=h(n);for(let e=0;e<C.length;e+=1)C[e].l(n);n.forEach(i),t.forEach(i),s.forEach(i),this.h()},h(){f(m,"class","w3-left-align"),f(b,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(g,"class","w3-table-all"),d(g,"width","100%"),f(l,"class","w3-responsive"),f(e,"class","w3-container")},m(a,s){p(a,e,s),v(e,l),v(l,g),v(g,w),v(w,u),v(u,m),v(m,x),v(u,T),v(u,b),v(b,y),v(g,D);for(let e=0;e<C.length;e+=1)C[e].m(g,null)},p(a,e){if(1&e){let l;for(k=a[0],l=0;l<k.length;l+=1){const s=F(a,k,l);C[l]?C[l].p(s,e):(C[l]=A(s),C[l].c(),C[l].m(g,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=k.length}},d(a){a&&i(e),E(C,a)}}}function A(a){let e,l,d,u,E,m,x,T,b,y,D=a[3]+"";return{c(){e=s("tr"),l=s("td"),d=t(D),u=n(),E=s("td"),m=s("button"),x=t("Download"),T=n(),this.h()},l(a){e=o(a,"TR",{});var s=c(e);l=o(s,"TD",{class:!0});var t=c(l);d=r(t,D),t.forEach(i),u=h(s),E=o(s,"TD",{class:!0});var n=c(E);m=o(n,"BUTTON",{index:!0});var f=c(m);x=r(f,"Download"),f.forEach(i),n.forEach(i),T=h(s),s.forEach(i),this.h()},h(){f(l,"class","w3-left-align"),f(m,"index",a[5]),f(E,"class","w3-right-align")},m(a,s){p(a,e,s),v(e,l),v(l,d),v(e,u),v(e,E),v(E,m),v(m,x),v(e,T),b||(y=g(m,"click",j),b=!0)},p(a,e){1&e&&D!==(D=a[3]+"")&&w(d,D)},d(a){a&&i(e),b=!1,y()}}}function O(a){let e,l,w,u,E,C,H,R,V,F,L,N,A,O,j,G,q,J,_,z,M,P,Q,K,W,X,Y,Z,aa,ea,la;l=new I({});let sa=a[1].length>0&&S(a),ta=a[0].length>0&&U(a);return{c(){e=n(),m(l.$$.fragment),w=n(),u=s("div"),E=s("h1"),C=s("b"),H=t("Capfiles"),R=n(),sa&&sa.c(),V=n(),F=s("hr"),L=n(),N=s("div"),A=s("h1"),O=s("b"),j=t("Edit Capfile Content"),G=t("\n\non click on capfiles, show another table of capfile content\n\n\n"),q=s("button"),J=t("Convert to CSV"),_=n(),z=s("hr"),M=n(),P=s("div"),Q=s("h1"),K=s("b"),W=t("CSV Files (stored in GridFS)"),X=n(),ta&&ta.c(),Y=n(),Z=s("hr"),this.h()},l(a){x('[data-svelte="svelte-qmgm2y"]',B.head).forEach(i),e=h(a),T(l.$$.fragment,a),w=h(a),u=o(a,"DIV",{class:!0});var s=c(u);E=o(s,"H1",{class:!0,style:!0});var t=c(E);C=o(t,"B",{});var n=c(C);H=r(n,"Capfiles"),n.forEach(i),t.forEach(i),s.forEach(i),R=h(a),sa&&sa.l(a),V=h(a),F=o(a,"HR",{class:!0}),L=h(a),N=o(a,"DIV",{class:!0});var f=c(N);A=o(f,"H1",{class:!0,style:!0});var d=c(A);O=o(d,"B",{});var p=c(O);j=r(p,"Edit Capfile Content"),p.forEach(i),d.forEach(i),f.forEach(i),G=r(a,"\n\non click on capfiles, show another table of capfile content\n\n\n"),q=o(a,"BUTTON",{class:!0});var v=c(q);J=r(v,"Convert to CSV"),v.forEach(i),_=h(a),z=o(a,"HR",{class:!0}),M=h(a),P=o(a,"DIV",{class:!0});var g=c(P);Q=o(g,"H1",{class:!0,style:!0});var m=c(Q);K=o(m,"B",{});var b=c(K);W=r(b,"CSV Files (stored in GridFS)"),b.forEach(i),m.forEach(i),g.forEach(i),X=h(a),ta&&ta.l(a),Y=h(a),Z=o(a,"HR",{class:!0}),this.h()},h(){B.title="Database",f(E,"class","w3-text-yellow"),d(E,"text-shadow","1px 1px 0 #444"),f(u,"class","w3-panel w3-blue"),f(F,"class","svelte-lxonyp"),f(A,"class","w3-text-yellow"),d(A,"text-shadow","1px 1px 0 #444"),f(N,"class","w3-panel w3-blue"),f(q,"class","w3-col w3-input w3-border"),f(z,"class","svelte-lxonyp"),f(Q,"class","w3-text-yellow"),d(Q,"text-shadow","1px 1px 0 #444"),f(P,"class","w3-panel w3-blue"),f(Z,"class","svelte-lxonyp")},m(a,s){p(a,e,s),b(l,a,s),p(a,w,s),p(a,u,s),v(u,E),v(E,C),v(C,H),p(a,R,s),sa&&sa.m(a,s),p(a,V,s),p(a,F,s),p(a,L,s),p(a,N,s),v(N,A),v(A,O),v(O,j),p(a,G,s),p(a,q,s),v(q,J),p(a,_,s),p(a,z,s),p(a,M,s),p(a,P,s),v(P,Q),v(Q,K),v(K,W),p(a,X,s),ta&&ta.m(a,s),p(a,Y,s),p(a,Z,s),aa=!0,ea||(la=g(q,"click",$),ea=!0)},p(a,[e]){a[1].length>0?sa?sa.p(a,e):(sa=S(a),sa.c(),sa.m(V.parentNode,V)):sa&&(sa.d(1),sa=null),a[0].length>0?ta?ta.p(a,e):(ta=U(a),ta.c(),ta.m(Y.parentNode,Y)):ta&&(ta.d(1),ta=null)},i(a){aa||(y(l.$$.fragment,a),aa=!0)},o(a){D(l.$$.fragment,a),aa=!1},d(a){a&&i(e),k(l,a),a&&i(w),a&&i(u),a&&i(R),sa&&sa.d(a),a&&i(V),a&&i(F),a&&i(L),a&&i(N),a&&i(G),a&&i(q),a&&i(_),a&&i(z),a&&i(M),a&&i(P),a&&i(X),ta&&ta.d(a),a&&i(Y),a&&i(Z),ea=!1,la()}}}function $(){}function j(){}function G(a,e,l){let s=[],t=[];return C((async()=>{R("/allgridfs",(function(a){let e=JSON.parse(a.response);e.data&&(V.success("Found data."),l(0,s=e.data),console.log(s))})),R("/capfile/all",(function(a){let e=JSON.parse(a.response);e.data&&(V.success("Found data."),l(1,t=e.data),console.log(t))}))})),[s,t,function(){let a=document.getElementById("downloadLogfile").value,e=!1;console.log("download logfile",logfiles);for(let t=0;t<logfiles.length;t++)parseInt(a)==parseInt(logfiles[t]._id)&&(e=!0);if(!e)return void V.danger("Please specify an LogID.");let l="/download/db2/logfiles/"+a;var s=performance.now();R(l,(function(a){!function(a,e){let l=document.createElement("a");document.body.appendChild(l),l.style="display: none";let s=window.URL.createObjectURL(a);l.href=s,l.download=e,l.click(),window.URL.revokeObjectURL(s)}(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]));var e=performance.now();console.log("CSV Logfile download took "+(e-s)+" milliseconds.")}))}]}export default class extends a{constructor(a){super(),e(this,a,G,O,l,{})}}

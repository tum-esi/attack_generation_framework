import{S as a,i as e,s as t,e as l,t as s,k as n,c,a as r,g as o,d as h,n as d,b as f,N as p,f as v,F as w,G as E,h as u,Q as g,M as m,j as T,L as b,m as y,o as D,v as x,r as C,w as k,z as V,T as I}from"../../chunks/vendor-c052606d.js";import{T as R,x as B,g as S,a as H,n as N}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:F}=I;function O(a,e,t){const l=a.slice();return l[7]=e[t],l[9]=t,l}function U(a,e,t){const l=a.slice();return l[10]=e[t],l[9]=t,l}function A(a,e,t){const l=a.slice();return l[12]=e[t],l[9]=t,l}function L(a){let e,t,i,E,u,g,T,b,y,D,x,C=a[1],k=[];for(let l=0;l<C.length;l+=1)k[l]=G(A(a,C,l));return{c(){e=l("div"),t=l("div"),i=l("table"),E=l("thead"),u=l("tr"),g=l("th"),T=s("Filename"),b=n(),y=l("th"),D=s("Actions"),x=n();for(let a=0;a<k.length;a+=1)k[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);i=c(s,"TABLE",{class:!0,style:!0});var n=r(i);E=c(n,"THEAD",{});var f=r(E);u=c(f,"TR",{class:!0});var p=r(u);g=c(p,"TH",{class:!0});var v=r(g);T=o(v,"Filename"),v.forEach(h),b=d(p),y=c(p,"TH",{class:!0});var w=r(y);D=o(w,"Actions"),w.forEach(h),p.forEach(h),f.forEach(h),x=d(n);for(let e=0;e<k.length;e+=1)k[e].l(n);n.forEach(h),s.forEach(h),l.forEach(h),this.h()},h(){f(g,"class","w3-left-align"),f(y,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(i,"class","w3-table-all"),p(i,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){v(a,e,l),w(e,t),w(t,i),w(i,E),w(E,u),w(u,g),w(g,T),w(u,b),w(u,y),w(y,D),w(i,x);for(let e=0;e<k.length;e+=1)k[e].m(i,null)},p(a,e){if(50&e){let t;for(C=a[1],t=0;t<C.length;t+=1){const l=A(a,C,t);k[t]?k[t].p(l,e):(k[t]=G(l),k[t].c(),k[t].m(i,null))}for(;t<k.length;t+=1)k[t].d(1);k.length=C.length}},d(a){a&&h(e),m(k,a)}}}function G(a){let e,t,i,p,m,T,b,y,D,x,C,k,V,I,R=a[12]+"";return{c(){e=l("tr"),t=l("td"),i=s(R),p=n(),m=l("td"),T=l("div"),b=l("button"),y=s("Edit"),D=n(),x=l("button"),C=s("Download"),k=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);i=o(s,R),s.forEach(h),p=d(l),m=c(l,"TD",{class:!0});var n=r(m);T=c(n,"DIV",{});var f=r(T);b=c(f,"BUTTON",{index:!0});var v=r(b);y=o(v,"Edit"),v.forEach(h),D=d(f),x=c(f,"BUTTON",{index:!0});var w=r(x);C=o(w,"Download"),w.forEach(h),f.forEach(h),n.forEach(h),k=d(l),l.forEach(h),this.h()},h(){f(t,"class","w3-left-align"),f(b,"index",a[9]),f(x,"index",a[9]),f(m,"class","w3-right-align")},m(l,s){v(l,e,s),w(e,t),w(t,i),w(e,p),w(e,m),w(m,T),w(T,b),w(b,y),w(T,D),w(T,x),w(x,C),w(e,k),V||(I=[E(b,"click",a[5]),E(x,"click",a[4])],V=!0)},p(a,e){2&e&&R!==(R=a[12]+"")&&u(i,R)},d(a){a&&h(e),V=!1,g(I)}}}function $(a){let e,t,i,E,u,g,T,b,y,D,x,C,k=a[2],V=[];for(let l=0;l<k.length;l+=1)V[l]=j(U(a,k,l));return{c(){e=l("div"),t=l("div"),i=l("table"),E=l("thead"),u=l("tr"),g=l("th"),T=s("Content"),b=n(),y=l("th"),D=s("Labels"),x=n(),C=l("tbody");for(let a=0;a<V.length;a+=1)V[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);i=c(s,"TABLE",{id:!0,class:!0,style:!0});var n=r(i);E=c(n,"THEAD",{});var f=r(E);u=c(f,"TR",{class:!0});var p=r(u);g=c(p,"TH",{class:!0});var v=r(g);T=o(v,"Content"),v.forEach(h),b=d(p),y=c(p,"TH",{class:!0});var w=r(y);D=o(w,"Labels"),w.forEach(h),p.forEach(h),f.forEach(h),x=d(n),C=c(n,"TBODY",{});var m=r(C);for(let e=0;e<V.length;e+=1)V[e].l(m);m.forEach(h),n.forEach(h),s.forEach(h),l.forEach(h),this.h()},h(){f(g,"class","w3-left-align"),f(y,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(i,"id","editTable"),f(i,"class","w3-table-all"),p(i,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){v(a,e,l),w(e,t),w(t,i),w(i,E),w(E,u),w(u,g),w(g,T),w(u,b),w(u,y),w(y,D),w(i,x),w(i,C);for(let e=0;e<V.length;e+=1)V[e].m(C,null)},p(a,e){if(4&e){let t;for(k=a[2],t=0;t<k.length;t+=1){const l=U(a,k,t);V[t]?V[t].p(l,e):(V[t]=j(l),V[t].c(),V[t].m(C,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=k.length}},d(a){a&&h(e),m(V,a)}}}function j(a){let e,t,i,p,E,g,m,T,b=JSON.stringify(a[10],null,2)+"";return{c(){e=l("tr"),t=l("td"),i=s(b),p=n(),E=l("td"),g=l("div"),m=l("input"),T=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);i=o(s,b),s.forEach(h),p=d(l),E=c(l,"TD",{class:!0});var n=r(E);g=c(n,"DIV",{});var f=r(g);m=c(f,"INPUT",{class:!0,type:!0,checked:!0,index:!0}),f.forEach(h),n.forEach(h),T=d(l),l.forEach(h),this.h()},h(){f(t,"class","w3-left-align"),f(m,"class","w3-check"),f(m,"type","checkbox"),m.checked="",f(m,"index",a[9]),f(E,"class","w3-right-align")},m(a,l){v(a,e,l),w(e,t),w(t,i),w(e,p),w(e,E),w(E,g),w(g,m),w(e,T)},p(a,e){4&e&&b!==(b=JSON.stringify(a[10],null,2)+"")&&u(i,b)},d(a){a&&h(e)}}}function P(a){let e,t,i,E,u,g,T,b,y,D,x,C=a[0],k=[];for(let l=0;l<C.length;l+=1)k[l]=J(O(a,C,l));return{c(){e=l("div"),t=l("div"),i=l("table"),E=l("thead"),u=l("tr"),g=l("th"),T=s("Filename"),b=n(),y=l("th"),D=s("Actions"),x=n();for(let a=0;a<k.length;a+=1)k[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var l=r(e);t=c(l,"DIV",{class:!0});var s=r(t);i=c(s,"TABLE",{class:!0,style:!0});var n=r(i);E=c(n,"THEAD",{});var f=r(E);u=c(f,"TR",{class:!0});var p=r(u);g=c(p,"TH",{class:!0});var v=r(g);T=o(v,"Filename"),v.forEach(h),b=d(p),y=c(p,"TH",{class:!0});var w=r(y);D=o(w,"Actions"),w.forEach(h),p.forEach(h),f.forEach(h),x=d(n);for(let e=0;e<k.length;e+=1)k[e].l(n);n.forEach(h),s.forEach(h),l.forEach(h),this.h()},h(){f(g,"class","w3-left-align"),f(y,"class","w3-right-align"),f(u,"class","w3-dark-grey"),f(i,"class","w3-table-all"),p(i,"width","100%"),f(t,"class","w3-responsive"),f(e,"class","w3-container")},m(a,l){v(a,e,l),w(e,t),w(t,i),w(i,E),w(E,u),w(u,g),w(g,T),w(u,b),w(u,y),w(y,D),w(i,x);for(let e=0;e<k.length;e+=1)k[e].m(i,null)},p(a,e){if(65&e){let t;for(C=a[0],t=0;t<C.length;t+=1){const l=O(a,C,t);k[t]?k[t].p(l,e):(k[t]=J(l),k[t].c(),k[t].m(i,null))}for(;t<k.length;t+=1)k[t].d(1);k.length=C.length}},d(a){a&&h(e),m(k,a)}}}function J(a){let e,t,i,p,g,m,T,b,y,D,x=a[7]+"";return{c(){e=l("tr"),t=l("td"),i=s(x),p=n(),g=l("td"),m=l("button"),T=s("Download"),b=n(),this.h()},l(a){e=c(a,"TR",{});var l=r(e);t=c(l,"TD",{class:!0});var s=r(t);i=o(s,x),s.forEach(h),p=d(l),g=c(l,"TD",{class:!0});var n=r(g);m=c(n,"BUTTON",{index:!0});var f=r(m);T=o(f,"Download"),f.forEach(h),n.forEach(h),b=d(l),l.forEach(h),this.h()},h(){f(t,"class","w3-left-align"),f(m,"index",a[9]),f(g,"class","w3-right-align")},m(l,s){v(l,e,s),w(e,t),w(t,i),w(e,p),w(e,g),w(g,m),w(m,T),w(e,b),y||(D=E(m,"click",a[6]),y=!0)},p(a,e){1&e&&x!==(x=a[7]+"")&&u(i,x)},d(a){a&&h(e),y=!1,D()}}}function q(a){let e,t,i,u,m,V,I,B,S,H,N,O,U,A,G,j,J,q,Q,_,K,W,X,Z,aa,ea,ta,la,sa,na,ca,ra,oa,ia,ha,da,fa,pa,va,wa,Ea,ua,ga,ma,Ta,ba,ya,Da,xa,Ca,ka,Va,Ia,Ra,Ba;t=new R({});let Sa=a[1].length>0&&L(a),Ha=a[2].length>0&&$(a),Na=a[0].length>0&&P(a);return{c(){e=n(),T(t.$$.fragment),i=n(),u=l("div"),m=l("h1"),V=l("b"),I=s("Capfiles"),B=n(),Sa&&Sa.c(),S=n(),H=l("hr"),N=n(),O=l("div"),U=l("h1"),A=l("b"),G=s("Edit Capfile Content"),j=s('\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),J=l("div"),q=l("div"),Q=l("button"),_=s("Apply Filter"),K=n(),W=l("div"),X=l("input"),Z=n(),aa=l("br"),ea=n(),Ha&&Ha.c(),ta=n(),la=l("br"),sa=n(),na=l("div"),ca=l("div"),ra=l("button"),oa=s("Convert to CSV and Store to GridFs"),ia=n(),ha=l("div"),da=l("button"),fa=s("Download Table as CSV"),pa=n(),va=l("hr"),wa=n(),Ea=l("div"),ua=l("h1"),ga=l("b"),ma=s("Gridfs Files (CSVs stored in GridFS)"),Ta=n(),ba=l("button"),ya=s("Reload GrifFS"),Da=n(),xa=l("hr"),Ca=n(),Na&&Na.c(),ka=n(),Va=l("hr"),this.h()},l(a){b('[data-svelte="svelte-qmgm2y"]',F.head).forEach(h),e=d(a),y(t.$$.fragment,a),i=d(a),u=c(a,"DIV",{class:!0});var l=r(u);m=c(l,"H1",{class:!0,style:!0});var s=r(m);V=c(s,"B",{});var n=r(V);I=o(n,"Capfiles"),n.forEach(h),s.forEach(h),l.forEach(h),B=d(a),Sa&&Sa.l(a),S=d(a),H=c(a,"HR",{class:!0}),N=d(a),O=c(a,"DIV",{class:!0});var f=r(O);U=c(f,"H1",{class:!0,style:!0});var p=r(U);A=c(p,"B",{});var v=r(A);G=o(v,"Edit Capfile Content"),v.forEach(h),p.forEach(h),f.forEach(h),j=o(a,'\n\non click on "Edit" in capfiles table, displays table with capfile content\n\n\n'),J=c(a,"DIV",{class:!0});var w=r(J);q=c(w,"DIV",{class:!0});var E=r(q);Q=c(E,"BUTTON",{ref:!0,class:!0});var g=r(Q);_=o(g,"Apply Filter"),g.forEach(h),E.forEach(h),K=d(w),W=c(w,"DIV",{class:!0});var T=r(W);X=c(T,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),T.forEach(h),w.forEach(h),Z=d(a),aa=c(a,"BR",{}),ea=d(a),Ha&&Ha.l(a),ta=d(a),la=c(a,"BR",{}),sa=d(a),na=c(a,"DIV",{class:!0});var D=r(na);ca=c(D,"DIV",{class:!0});var x=r(ca);ra=c(x,"BUTTON",{class:!0});var C=r(ra);oa=o(C,"Convert to CSV and Store to GridFs"),C.forEach(h),x.forEach(h),ia=d(D),ha=c(D,"DIV",{class:!0});var k=r(ha);da=c(k,"BUTTON",{class:!0});var R=r(da);fa=o(R,"Download Table as CSV"),R.forEach(h),k.forEach(h),D.forEach(h),pa=d(a),va=c(a,"HR",{class:!0}),wa=d(a),Ea=c(a,"DIV",{class:!0});var L=r(Ea);ua=c(L,"H1",{class:!0,style:!0});var $=r(ua);ga=c($,"B",{});var P=r(ga);ma=o(P,"Gridfs Files (CSVs stored in GridFS)"),P.forEach(h),$.forEach(h),L.forEach(h),Ta=d(a),ba=c(a,"BUTTON",{class:!0});var M=r(ba);ya=o(M,"Reload GrifFS"),M.forEach(h),Da=d(a),xa=c(a,"HR",{class:!0}),Ca=d(a),Na&&Na.l(a),ka=d(a),Va=c(a,"HR",{class:!0}),this.h()},h(){F.title="Database",f(m,"class","w3-text-yellow"),p(m,"text-shadow","1px 1px 0 #444"),f(u,"class","w3-panel w3-blue"),f(H,"class","svelte-lxonyp"),f(U,"class","w3-text-yellow"),p(U,"text-shadow","1px 1px 0 #444"),f(O,"class","w3-panel w3-blue"),f(Q,"ref","filterTable"),f(Q,"class","w3-col w3-input w3-border"),f(q,"class","w3-third"),f(X,"id","filterTable"),f(X,"class","w3-input w3-border"),f(X,"name","name"),f(X,"type","text"),f(X,"placeholder","Filter String"),f(W,"class","w3-rest"),f(J,"class","w3-row w3-section"),f(ra,"class","w3-col w3-input w3-border"),f(ca,"class","w3-half"),f(da,"class","w3-col w3-input w3-border"),f(ha,"class","w3-half"),f(na,"class","w3-row w3-section"),f(va,"class","svelte-lxonyp"),f(ua,"class","w3-text-yellow"),p(ua,"text-shadow","1px 1px 0 #444"),f(Ea,"class","w3-panel w3-blue"),f(ba,"class","w3-col w3-input w3-border"),f(xa,"class","svelte-lxonyp"),f(Va,"class","svelte-lxonyp")},m(l,s){v(l,e,s),D(t,l,s),v(l,i,s),v(l,u,s),w(u,m),w(m,V),w(V,I),v(l,B,s),Sa&&Sa.m(l,s),v(l,S,s),v(l,H,s),v(l,N,s),v(l,O,s),w(O,U),w(U,A),w(A,G),v(l,j,s),v(l,J,s),w(J,q),w(q,Q),w(Q,_),w(J,K),w(J,W),w(W,X),v(l,Z,s),v(l,aa,s),v(l,ea,s),Ha&&Ha.m(l,s),v(l,ta,s),v(l,la,s),v(l,sa,s),v(l,na,s),w(na,ca),w(ca,ra),w(ra,oa),w(na,ia),w(na,ha),w(ha,da),w(da,fa),v(l,pa,s),v(l,va,s),v(l,wa,s),v(l,Ea,s),w(Ea,ua),w(ua,ga),w(ga,ma),v(l,Ta,s),v(l,ba,s),w(ba,ya),v(l,Da,s),v(l,xa,s),v(l,Ca,s),Na&&Na.m(l,s),v(l,ka,s),v(l,Va,s),Ia=!0,Ra||(Ba=[E(Q,"click",Y),E(ra,"click",M),E(da,"click",z),E(ba,"click",a[3])],Ra=!0)},p(a,[e]){a[1].length>0?Sa?Sa.p(a,e):(Sa=L(a),Sa.c(),Sa.m(S.parentNode,S)):Sa&&(Sa.d(1),Sa=null),a[2].length>0?Ha?Ha.p(a,e):(Ha=$(a),Ha.c(),Ha.m(ta.parentNode,ta)):Ha&&(Ha.d(1),Ha=null),a[0].length>0?Na?Na.p(a,e):(Na=P(a),Na.c(),Na.m(ka.parentNode,ka)):Na&&(Na.d(1),Na=null)},i(a){Ia||(x(t.$$.fragment,a),Ia=!0)},o(a){C(t.$$.fragment,a),Ia=!1},d(a){a&&h(e),k(t,a),a&&h(i),a&&h(u),a&&h(B),Sa&&Sa.d(a),a&&h(S),a&&h(H),a&&h(N),a&&h(O),a&&h(j),a&&h(J),a&&h(Z),a&&h(aa),a&&h(ea),Ha&&Ha.d(a),a&&h(ta),a&&h(la),a&&h(sa),a&&h(na),a&&h(pa),a&&h(va),a&&h(wa),a&&h(Ea),a&&h(Ta),a&&h(ba),a&&h(Da),a&&h(xa),a&&h(Ca),Na&&Na.d(a),a&&h(ka),a&&h(Va),Ra=!1,g(Ba)}}}function M(){}function z(){}function Q(a,e){let t=document.createElement("a");document.body.appendChild(t),t.style="display: none";let l=window.URL.createObjectURL(a);t.href=l,t.download=e,t.click(),window.URL.revokeObjectURL(l)}function Y(){let a=document.getElementById("editTable");console.log(a,this);let e=a.children[1].children;for(i=1;i<e.length;i++){e[i].style.display="none",td=e[i].getElementsByTagName("td");for(var t=0;t<td.length;t++)if(cell=e[i].getElementsByTagName("td")[t],cell&&cell.innerHTML.toUpperCase().indexOf(filter)>-1){e[i].style.display="";break}}}function _(a,e,t){let l=[],s=[],n=[];function c(){B("/datasets/all",(function(a){let e=JSON.parse(a.response);e.data&&(N.success("Found data."),t(0,l=e.data),console.log("gridfsData",l))}))}return V((async()=>{c(),B("/capfile/all",(function(a){let e=JSON.parse(a.response);e.data&&(N.success("Found data."),t(1,s=e.data),console.log("capfileData",s))}))})),[l,s,n,c,function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;S("/capfile/download","POST",{filepath:a},(function(a){Q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){let a=this.parentElement.parentElement.parentElement.firstElementChild.innerText;H("/capfile/edit","POST",{filepath:a},(function(a){a.data&&(t(2,n=a.data),console.log("editData:",n),N.success("Loading data successfull."))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let a=this.parentElement.parentElement.firstElementChild.innerText;S("/datasets/download","POST",{filename:a},(function(a){Q(new Blob([a.response],{type:"octet/stream"}),decodeURIComponent(a.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends a{constructor(a){super(),e(this,a,_,q,t,{})}}

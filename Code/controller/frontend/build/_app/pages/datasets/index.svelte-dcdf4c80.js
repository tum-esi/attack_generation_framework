import{S as e,i as a,s as t,e as s,t as l,k as n,c,a as o,g as r,d as i,n as h,b as f,N as d,f as p,F as v,G as u,h as w,Q as E,M as m,j as g,L as T,m as x,o as b,v as y,r as D,w as C,z as R,T as k}from"../../chunks/vendor-c052606d.js";import{T as H,x as F,g as S,n as B}from"../../chunks/requests-ecdf3b79.js";/* empty css                                                       */const{document:V}=k;function O(e,a,t){const s=e.slice();return s[5]=a[t],s[7]=t,s}function U(e,a,t){const s=e.slice();return s[8]=a[t],s[7]=t,s}function I(e){let a,t,u,w,E,g,T,x,b,y,D,C=e[1],R=[];for(let s=0;s<C.length;s+=1)R[s]=N(U(e,C,s));return{c(){a=s("div"),t=s("div"),u=s("table"),w=s("thead"),E=s("tr"),g=s("th"),T=l("Filename"),x=n(),b=s("th"),y=l("Actions"),D=n();for(let e=0;e<R.length;e+=1)R[e].c();this.h()},l(e){a=c(e,"DIV",{class:!0});var s=o(a);t=c(s,"DIV",{class:!0});var l=o(t);u=c(l,"TABLE",{class:!0,style:!0});var n=o(u);w=c(n,"THEAD",{});var f=o(w);E=c(f,"TR",{class:!0});var d=o(E);g=c(d,"TH",{class:!0});var p=o(g);T=r(p,"Filename"),p.forEach(i),x=h(d),b=c(d,"TH",{class:!0});var v=o(b);y=r(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),D=h(n);for(let a=0;a<R.length;a+=1)R[a].l(n);n.forEach(i),l.forEach(i),s.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(b,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(u,"class","w3-table-all"),d(u,"width","100%"),f(t,"class","w3-responsive"),f(a,"class","w3-container")},m(e,s){p(e,a,s),v(a,t),v(t,u),v(u,w),v(w,E),v(E,g),v(g,T),v(E,x),v(E,b),v(b,y),v(u,D);for(let a=0;a<R.length;a+=1)R[a].m(u,null)},p(e,a){if(26&a){let t;for(C=e[1],t=0;t<C.length;t+=1){const s=U(e,C,t);R[t]?R[t].p(s,a):(R[t]=N(s),R[t].c(),R[t].m(u,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=C.length}},d(e){e&&i(a),m(R,e)}}}function N(e){let a,t,d,m,g,T,x,b,y,D,C,R,k,H,F=e[8]+"";return{c(){a=s("tr"),t=s("td"),d=l(F),m=n(),g=s("td"),T=s("div"),x=s("button"),b=l("Edit"),y=n(),D=s("button"),C=l("Download"),R=n(),this.h()},l(e){a=c(e,"TR",{});var s=o(a);t=c(s,"TD",{class:!0});var l=o(t);d=r(l,F),l.forEach(i),m=h(s),g=c(s,"TD",{class:!0});var n=o(g);T=c(n,"DIV",{});var f=o(T);x=c(f,"BUTTON",{index:!0});var p=o(x);b=r(p,"Edit"),p.forEach(i),y=h(f),D=c(f,"BUTTON",{index:!0});var v=o(D);C=r(v,"Download"),v.forEach(i),f.forEach(i),n.forEach(i),R=h(s),s.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(x,"index",e[7]),f(D,"index",e[7]),f(g,"class","w3-right-align")},m(s,l){p(s,a,l),v(a,t),v(t,d),v(a,m),v(a,g),v(g,T),v(T,x),v(x,b),v(T,y),v(T,D),v(D,C),v(a,R),k||(H=[u(x,"click",e[4]),u(D,"click",e[3])],k=!0)},p(e,a){2&a&&F!==(F=e[8]+"")&&w(d,F)},d(e){e&&i(a),k=!1,E(H)}}}function A(e){let a,t,u,w,E,g,T,x,b,y,D,C=e[0],R=[];for(let s=0;s<C.length;s+=1)R[s]=$(O(e,C,s));return{c(){a=s("div"),t=s("div"),u=s("table"),w=s("thead"),E=s("tr"),g=s("th"),T=l("Filename"),x=n(),b=s("th"),y=l("Actions"),D=n();for(let e=0;e<R.length;e+=1)R[e].c();this.h()},l(e){a=c(e,"DIV",{class:!0});var s=o(a);t=c(s,"DIV",{class:!0});var l=o(t);u=c(l,"TABLE",{class:!0,style:!0});var n=o(u);w=c(n,"THEAD",{});var f=o(w);E=c(f,"TR",{class:!0});var d=o(E);g=c(d,"TH",{class:!0});var p=o(g);T=r(p,"Filename"),p.forEach(i),x=h(d),b=c(d,"TH",{class:!0});var v=o(b);y=r(v,"Actions"),v.forEach(i),d.forEach(i),f.forEach(i),D=h(n);for(let a=0;a<R.length;a+=1)R[a].l(n);n.forEach(i),l.forEach(i),s.forEach(i),this.h()},h(){f(g,"class","w3-left-align"),f(b,"class","w3-right-align"),f(E,"class","w3-dark-grey"),f(u,"class","w3-table-all"),d(u,"width","100%"),f(t,"class","w3-responsive"),f(a,"class","w3-container")},m(e,s){p(e,a,s),v(a,t),v(t,u),v(u,w),v(w,E),v(E,g),v(g,T),v(E,x),v(E,b),v(b,y),v(u,D);for(let a=0;a<R.length;a+=1)R[a].m(u,null)},p(e,a){if(17&a){let t;for(C=e[0],t=0;t<C.length;t+=1){const s=O(e,C,t);R[t]?R[t].p(s,a):(R[t]=$(s),R[t].c(),R[t].m(u,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=C.length}},d(e){e&&i(a),m(R,e)}}}function $(e){let a,t,d,E,m,g,T,x,b,y,D=e[5]+"";return{c(){a=s("tr"),t=s("td"),d=l(D),E=n(),m=s("td"),g=s("button"),T=l("Download"),x=n(),this.h()},l(e){a=c(e,"TR",{});var s=o(a);t=c(s,"TD",{class:!0});var l=o(t);d=r(l,D),l.forEach(i),E=h(s),m=c(s,"TD",{class:!0});var n=o(m);g=c(n,"BUTTON",{index:!0});var f=o(g);T=r(f,"Download"),f.forEach(i),n.forEach(i),x=h(s),s.forEach(i),this.h()},h(){f(t,"class","w3-left-align"),f(g,"index",e[7]),f(m,"class","w3-right-align")},m(s,l){p(s,a,l),v(a,t),v(t,d),v(a,E),v(a,m),v(m,g),v(g,T),v(a,x),b||(y=u(g,"click",e[4]),b=!0)},p(e,a){1&a&&D!==(D=e[5]+"")&&w(d,D)},d(e){e&&i(a),b=!1,y()}}}function G(e){let a,t,w,m,R,k,F,S,B,O,U,N,$,G,j,q,J,P,z,M,Q,_,K,W,X,Y,Z,ee,ae,te,se,le,ne,ce,oe,re;t=new H({});let ie=e[1].length>0&&I(e),he=e[0].length>0&&A(e);return{c(){a=n(),g(t.$$.fragment),w=n(),m=s("div"),R=s("h1"),k=s("b"),F=l("Capfiles"),S=n(),ie&&ie.c(),B=n(),O=s("hr"),U=n(),N=s("div"),$=s("h1"),G=s("b"),j=l("Edit Capfile Content"),q=l("\n\non click on capfiles, show another table of capfile content\n\n\n"),J=s("button"),P=l("Convert to CSV"),z=n(),M=s("hr"),Q=n(),_=s("div"),K=s("h1"),W=s("b"),X=l("Gridfs Files (CSVs stored in GridFS)"),Y=n(),Z=s("button"),ee=l("Reload GrifFS"),ae=n(),te=s("hr"),se=n(),he&&he.c(),le=n(),ne=s("hr"),this.h()},l(e){T('[data-svelte="svelte-qmgm2y"]',V.head).forEach(i),a=h(e),x(t.$$.fragment,e),w=h(e),m=c(e,"DIV",{class:!0});var s=o(m);R=c(s,"H1",{class:!0,style:!0});var l=o(R);k=c(l,"B",{});var n=o(k);F=r(n,"Capfiles"),n.forEach(i),l.forEach(i),s.forEach(i),S=h(e),ie&&ie.l(e),B=h(e),O=c(e,"HR",{class:!0}),U=h(e),N=c(e,"DIV",{class:!0});var f=o(N);$=c(f,"H1",{class:!0,style:!0});var d=o($);G=c(d,"B",{});var p=o(G);j=r(p,"Edit Capfile Content"),p.forEach(i),d.forEach(i),f.forEach(i),q=r(e,"\n\non click on capfiles, show another table of capfile content\n\n\n"),J=c(e,"BUTTON",{class:!0});var v=o(J);P=r(v,"Convert to CSV"),v.forEach(i),z=h(e),M=c(e,"HR",{class:!0}),Q=h(e),_=c(e,"DIV",{class:!0});var u=o(_);K=c(u,"H1",{class:!0,style:!0});var E=o(K);W=c(E,"B",{});var g=o(W);X=r(g,"Gridfs Files (CSVs stored in GridFS)"),g.forEach(i),E.forEach(i),u.forEach(i),Y=h(e),Z=c(e,"BUTTON",{class:!0});var b=o(Z);ee=r(b,"Reload GrifFS"),b.forEach(i),ae=h(e),te=c(e,"HR",{class:!0}),se=h(e),he&&he.l(e),le=h(e),ne=c(e,"HR",{class:!0}),this.h()},h(){V.title="Database",f(R,"class","w3-text-yellow"),d(R,"text-shadow","1px 1px 0 #444"),f(m,"class","w3-panel w3-blue"),f(O,"class","svelte-lxonyp"),f($,"class","w3-text-yellow"),d($,"text-shadow","1px 1px 0 #444"),f(N,"class","w3-panel w3-blue"),f(J,"class","w3-col w3-input w3-border"),f(M,"class","svelte-lxonyp"),f(K,"class","w3-text-yellow"),d(K,"text-shadow","1px 1px 0 #444"),f(_,"class","w3-panel w3-blue"),f(Z,"class","w3-col w3-input w3-border"),f(te,"class","svelte-lxonyp"),f(ne,"class","svelte-lxonyp")},m(s,l){p(s,a,l),b(t,s,l),p(s,w,l),p(s,m,l),v(m,R),v(R,k),v(k,F),p(s,S,l),ie&&ie.m(s,l),p(s,B,l),p(s,O,l),p(s,U,l),p(s,N,l),v(N,$),v($,G),v(G,j),p(s,q,l),p(s,J,l),v(J,P),p(s,z,l),p(s,M,l),p(s,Q,l),p(s,_,l),v(_,K),v(K,W),v(W,X),p(s,Y,l),p(s,Z,l),v(Z,ee),p(s,ae,l),p(s,te,l),p(s,se,l),he&&he.m(s,l),p(s,le,l),p(s,ne,l),ce=!0,oe||(re=[u(J,"click",L),u(Z,"click",e[2])],oe=!0)},p(e,[a]){e[1].length>0?ie?ie.p(e,a):(ie=I(e),ie.c(),ie.m(B.parentNode,B)):ie&&(ie.d(1),ie=null),e[0].length>0?he?he.p(e,a):(he=A(e),he.c(),he.m(le.parentNode,le)):he&&(he.d(1),he=null)},i(e){ce||(y(t.$$.fragment,e),ce=!0)},o(e){D(t.$$.fragment,e),ce=!1},d(e){e&&i(a),C(t,e),e&&i(w),e&&i(m),e&&i(S),ie&&ie.d(e),e&&i(B),e&&i(O),e&&i(U),e&&i(N),e&&i(q),e&&i(J),e&&i(z),e&&i(M),e&&i(Q),e&&i(_),e&&i(Y),e&&i(Z),e&&i(ae),e&&i(te),e&&i(se),he&&he.d(e),e&&i(le),e&&i(ne),oe=!1,E(re)}}}function L(){}function j(e,a){let t=document.createElement("a");document.body.appendChild(t),t.style="display: none";let s=window.URL.createObjectURL(e);t.href=s,t.download=a,t.click(),window.URL.revokeObjectURL(s)}function q(e,a,t){let s=[],l=[];function n(){F("/allgridfs/all",(function(e){let a=JSON.parse(e.response);a.data&&(B.success("Found data."),t(0,s=a.data))}))}return R((async()=>{n(),F("/capfile",(function(e){let a=JSON.parse(e.response);a.data&&(B.success("Found data."),t(1,l=a.data),console.log(l))}))})),[s,l,n,function(){let e=this.parentElement.parentElement.parentElement.firstElementChild.innerText;S("/capfile","POST",{filepath:e},(function(e){j(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))},function(){console.log(this.parentElement.parentElement.firstElementChild.innerText);let e=this.parentElement.parentElement.firstElementChild.innerText;S("/allgridfs/download","POST",{filename:e},(function(e){j(new Blob([e.response],{type:"octet/stream"}),decodeURIComponent(e.getResponseHeader("Content-Disposition").split("filename=")[1].split(";")[0]))}))}]}export default class extends e{constructor(e){super(),a(this,e,q,G,t,{})}}
